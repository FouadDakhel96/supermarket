{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport { DragAndDropService, DragSourceType, VerticalDirection } from \"../dragAndDrop/dragAndDropService\";\nimport { Autowired, Optional, PostConstruct } from \"../context/context\";\nimport { Events } from \"../eventKeys\";\nimport { last } from '../utils/array';\nimport { BeanStub } from \"../context/beanStub\";\nimport { _ } from \"../utils\";\n\nvar RowDragFeature =\n/** @class */\nfunction (_super) {\n  __extends(RowDragFeature, _super);\n\n  function RowDragFeature(eContainer, gridPanel) {\n    var _this = _super.call(this) || this;\n\n    _this.isMultiRowDrag = false;\n    _this.isGridSorted = false;\n    _this.isGridFiltered = false;\n    _this.isRowGroupActive = false;\n    _this.eContainer = eContainer;\n    _this.gridPanel = gridPanel;\n    return _this;\n  }\n\n  RowDragFeature.prototype.postConstruct = function () {\n    if (this.gridOptionsWrapper.isRowModelDefault()) {\n      this.clientSideRowModel = this.rowModel;\n    }\n\n    this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n    this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));\n    this.onSortChanged();\n    this.onFilterChanged();\n    this.onRowGroupChanged();\n  };\n\n  RowDragFeature.prototype.onSortChanged = function () {\n    var sortModel = this.sortController.getSortModel();\n    this.isGridSorted = !_.missingOrEmpty(sortModel);\n  };\n\n  RowDragFeature.prototype.onFilterChanged = function () {\n    this.isGridFiltered = this.filterManager.isAnyFilterPresent();\n  };\n\n  RowDragFeature.prototype.onRowGroupChanged = function () {\n    var rowGroups = this.columnController.getRowGroupColumns();\n    this.isRowGroupActive = !_.missingOrEmpty(rowGroups);\n  };\n\n  RowDragFeature.prototype.getContainer = function () {\n    return this.eContainer;\n  };\n\n  RowDragFeature.prototype.isInterestedIn = function (type) {\n    return type === DragSourceType.RowDrag;\n  };\n\n  RowDragFeature.prototype.getIconName = function () {\n    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n\n    if (managedDrag && this.shouldPreventRowMove()) {\n      return DragAndDropService.ICON_NOT_ALLOWED;\n    }\n\n    return DragAndDropService.ICON_MOVE;\n  };\n\n  RowDragFeature.prototype.shouldPreventRowMove = function () {\n    return this.isGridSorted || this.isGridFiltered || this.isRowGroupActive;\n  };\n\n  RowDragFeature.prototype.getRowNodes = function (draggingEvent) {\n    if (!this.isFromThisGrid(draggingEvent)) {\n      return draggingEvent.dragItem.rowNodes;\n    }\n\n    var enableMultiRowDragging = this.gridOptionsWrapper.isEnableMultiRowDragging();\n    var selectedNodes = this.selectionController.getSelectedNodes();\n    var currentNode = draggingEvent.dragItem.rowNode;\n\n    if (enableMultiRowDragging && selectedNodes.indexOf(currentNode) !== -1) {\n      this.isMultiRowDrag = true;\n      return __spreadArrays(selectedNodes);\n    }\n\n    this.isMultiRowDrag = false;\n    return [currentNode];\n  };\n\n  RowDragFeature.prototype.onDragEnter = function (draggingEvent) {\n    // when entering, we fire the enter event, then in onEnterOrDragging,\n    // we also fire the move event. so we get both events when entering.\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER, draggingEvent);\n    this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n      rowNode.setDragging(true);\n    });\n    this.onEnterOrDragging(draggingEvent);\n  };\n\n  RowDragFeature.prototype.onDragging = function (draggingEvent) {\n    this.onEnterOrDragging(draggingEvent);\n  };\n\n  RowDragFeature.prototype.isFromThisGrid = function (draggingEvent) {\n    return this.gridPanel.getGui().contains(draggingEvent.dragSource.eElement);\n  };\n\n  RowDragFeature.prototype.isDropZoneWithinThisGrid = function (draggingEvent) {\n    var gridGui = this.gridPanel.getGui();\n    var dropZoneTarget = draggingEvent.dropZoneTarget;\n    return !gridGui.contains(dropZoneTarget);\n  };\n\n  RowDragFeature.prototype.onEnterOrDragging = function (draggingEvent) {\n    // this event is fired for enter and move\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE, draggingEvent);\n    this.lastDraggingEvent = draggingEvent;\n    var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n\n    if (managedDrag) {\n      this.doManagedDrag(draggingEvent, pixel);\n    }\n\n    this.checkCenterForScrolling(pixel);\n  };\n\n  RowDragFeature.prototype.doManagedDrag = function (draggingEvent, pixel) {\n    var _this = this;\n\n    var rowNodes;\n    var isFromThisGrid = this.isFromThisGrid(draggingEvent);\n\n    if (isFromThisGrid) {\n      rowNodes = [draggingEvent.dragItem.rowNode];\n\n      if (this.isMultiRowDrag) {\n        rowNodes = __spreadArrays(this.selectionController.getSelectedNodes()).sort(function (a, b) {\n          return _this.getRowIndexNumber(a) - _this.getRowIndexNumber(b);\n        });\n      }\n\n      draggingEvent.dragItem.rowNodes = rowNodes;\n    } else {\n      rowNodes = draggingEvent.dragItem.rowNodes;\n    }\n\n    var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n\n    if (managedDrag && this.shouldPreventRowMove()) {\n      return;\n    }\n\n    if (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !isFromThisGrid) {\n      if (!this.isDropZoneWithinThisGrid(draggingEvent)) {\n        this.clientSideRowModel.highlightRowAtPixel(rowNodes[0], pixel);\n      }\n    } else {\n      this.moveRows(rowNodes, pixel);\n    }\n  };\n\n  RowDragFeature.prototype.getRowIndexNumber = function (rowNode) {\n    return parseInt(last(rowNode.getRowIndexString().split('-')), 10);\n  };\n\n  RowDragFeature.prototype.moveRowAndClearHighlight = function (draggingEvent) {\n    var _this = this;\n\n    var lastHighlightedRowNode = this.clientSideRowModel.getLastHighlightedRowNode();\n    var isBelow = lastHighlightedRowNode && lastHighlightedRowNode.highlighted === 'below';\n    var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n    var rowNodes = draggingEvent.dragItem.rowNodes;\n    var increment = isBelow ? 1 : 0;\n\n    if (this.isFromThisGrid(draggingEvent)) {\n      rowNodes.forEach(function (rowNode) {\n        if (rowNode.rowTop < pixel) {\n          increment -= 1;\n        }\n      });\n      this.moveRows(rowNodes, pixel, increment);\n    } else {\n      var getRowNodeId_1 = this.gridOptionsWrapper.getRowNodeIdFunc();\n      var addIndex = this.clientSideRowModel.getRowIndexAtPixel(pixel) + 1;\n\n      if (this.clientSideRowModel.getHighlightPosition(pixel) === 'above') {\n        addIndex--;\n      }\n\n      this.clientSideRowModel.updateRowData({\n        add: rowNodes.map(function (node) {\n          return node.data;\n        }).filter(function (data) {\n          return !_this.clientSideRowModel.getRowNode(getRowNodeId_1 ? getRowNodeId_1(data) : data.id);\n        }),\n        addIndex: addIndex\n      });\n    }\n\n    this.clearRowHighlight();\n  };\n\n  RowDragFeature.prototype.clearRowHighlight = function () {\n    this.clientSideRowModel.highlightRowAtPixel(null);\n  };\n\n  RowDragFeature.prototype.moveRows = function (rowNodes, pixel, increment) {\n    if (increment === void 0) {\n      increment = 0;\n    }\n\n    var rowWasMoved = this.clientSideRowModel.ensureRowsAtPixel(rowNodes, pixel, increment);\n\n    if (rowWasMoved) {\n      this.focusController.clearFocusedCell();\n\n      if (this.rangeController) {\n        this.rangeController.removeAllCellRanges();\n      }\n    }\n  };\n\n  RowDragFeature.prototype.checkCenterForScrolling = function (pixel) {\n    // scroll if the mouse is within 50px of the grid edge\n    var pixelRange = this.gridPanel.getVScrollPosition(); // console.log(`pixelRange = (${pixelRange.top}, ${pixelRange.bottom})`);\n\n    this.needToMoveUp = pixel < pixelRange.top + 50;\n    this.needToMoveDown = pixel > pixelRange.bottom - 50; // console.log(`needToMoveUp = ${this.needToMoveUp} = pixel < (pixelRange.top + 50) = ${pixel} < (${pixelRange.top} + 50)`);\n    // console.log(`needToMoveDown = ${this.needToMoveDown} = pixel < (pixelRange.top + 50) = ${pixel} < (${pixelRange.top} + 50)`);\n\n    if (this.needToMoveUp || this.needToMoveDown) {\n      this.ensureIntervalStarted();\n    } else {\n      this.ensureIntervalCleared();\n    }\n  };\n\n  RowDragFeature.prototype.ensureIntervalStarted = function () {\n    if (this.movingIntervalId) {\n      return;\n    }\n\n    this.intervalCount = 0;\n    this.movingIntervalId = window.setInterval(this.moveInterval.bind(this), 100);\n  };\n\n  RowDragFeature.prototype.ensureIntervalCleared = function () {\n    if (!this.moveInterval) {\n      return;\n    }\n\n    window.clearInterval(this.movingIntervalId);\n    this.movingIntervalId = null;\n  };\n\n  RowDragFeature.prototype.moveInterval = function () {\n    // the amounts we move get bigger at each interval, so the speed accelerates, starting a bit slow\n    // and getting faster. this is to give smoother user experience. we max at 100px to limit the speed.\n    var pixelsToMove;\n    this.intervalCount++;\n    pixelsToMove = 10 + this.intervalCount * 5;\n\n    if (pixelsToMove > 100) {\n      pixelsToMove = 100;\n    }\n\n    var pixelsMoved;\n\n    if (this.needToMoveDown) {\n      pixelsMoved = this.gridPanel.scrollVertically(pixelsToMove);\n    } else if (this.needToMoveUp) {\n      pixelsMoved = this.gridPanel.scrollVertically(-pixelsToMove);\n    }\n\n    if (pixelsMoved !== 0) {\n      this.onDragging(this.lastDraggingEvent);\n    }\n  };\n\n  RowDragFeature.prototype.addRowDropZone = function (params) {\n    var _this = this;\n\n    if (!params.getContainer()) {\n      _.doOnce(function () {\n        return console.warn('ag-Grid: addRowDropZone - A container target needs to be provided');\n      }, 'add-drop-zone-empty-target');\n\n      return;\n    }\n\n    if (this.dragAndDropService.findExternalZone(params)) {\n      console.warn('ag-Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.');\n      return;\n    }\n\n    var processedParams = {\n      getContainer: params.getContainer\n    };\n\n    if (params.fromGrid) {\n      params.fromGrid = undefined;\n      processedParams = params;\n    } else {\n      if (params.onDragEnter) {\n        processedParams.onDragEnter = function (e) {\n          params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n        };\n      }\n\n      if (params.onDragLeave) {\n        processedParams.onDragLeave = function (e) {\n          params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n        };\n      }\n\n      if (params.onDragging) {\n        processedParams.onDragging = function (e) {\n          params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n        };\n      }\n\n      if (params.onDragStop) {\n        processedParams.onDragStop = function (e) {\n          params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n        };\n      }\n    }\n\n    this.dragAndDropService.addDropTarget(__assign({\n      isInterestedIn: function (type) {\n        return type === DragSourceType.RowDrag;\n      },\n      getIconName: function () {\n        return DragAndDropService.ICON_MOVE;\n      },\n      external: true\n    }, processedParams));\n  };\n\n  RowDragFeature.prototype.getRowDropZone = function (events) {\n    var _this = this;\n\n    var getContainer = this.getContainer.bind(this);\n    var onDragEnter = this.onDragEnter.bind(this);\n    var onDragLeave = this.onDragLeave.bind(this);\n    var onDragging = this.onDragging.bind(this);\n    var onDragStop = this.onDragStop.bind(this);\n\n    if (!events) {\n      return {\n        getContainer: getContainer,\n        onDragEnter: onDragEnter,\n        onDragLeave: onDragLeave,\n        onDragging: onDragging,\n        onDragStop: onDragStop,\n        fromGrid: true\n      };\n    }\n\n    return {\n      getContainer: getContainer,\n      onDragEnter: events.onDragEnter ? function (e) {\n        onDragEnter(e);\n        events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n      } : onDragEnter,\n      onDragLeave: events.onDragLeave ? function (e) {\n        onDragLeave(e);\n        events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n      } : onDragLeave,\n      onDragging: events.onDragging ? function (e) {\n        onDragging(e);\n        events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n      } : onDragging,\n      onDragStop: events.onDragStop ? function (e) {\n        onDragStop(e);\n        events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n      } : onDragStop,\n      fromGrid: true\n    };\n  };\n\n  RowDragFeature.prototype.draggingToRowDragEvent = function (type, draggingEvent) {\n    var yNormalised = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n    var mouseIsPastLastRow = yNormalised > this.rowModel.getCurrentPageHeight();\n    var overIndex = -1;\n    var overNode = null;\n\n    if (!mouseIsPastLastRow) {\n      overIndex = this.rowModel.getRowIndexAtPixel(yNormalised);\n      overNode = this.rowModel.getRow(overIndex);\n    }\n\n    var vDirectionString;\n\n    switch (draggingEvent.vDirection) {\n      case VerticalDirection.Down:\n        vDirectionString = 'down';\n        break;\n\n      case VerticalDirection.Up:\n        vDirectionString = 'up';\n        break;\n\n      default:\n        vDirectionString = null;\n        break;\n    }\n\n    var event = {\n      type: type,\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      event: draggingEvent.event,\n      node: draggingEvent.dragItem.rowNode,\n      nodes: draggingEvent.dragItem.rowNodes,\n      overIndex: overIndex,\n      overNode: overNode,\n      y: yNormalised,\n      vDirection: vDirectionString\n    };\n    return event;\n  };\n\n  RowDragFeature.prototype.dispatchGridEvent = function (type, draggingEvent) {\n    var event = this.draggingToRowDragEvent(type, draggingEvent);\n    this.eventService.dispatchEvent(event);\n  };\n\n  RowDragFeature.prototype.onDragLeave = function (draggingEvent) {\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE, draggingEvent);\n    this.stopDragging(draggingEvent);\n    this.clearRowHighlight();\n\n    if (this.isFromThisGrid(draggingEvent)) {\n      this.isMultiRowDrag = false;\n    }\n  };\n\n  RowDragFeature.prototype.onDragStop = function (draggingEvent) {\n    this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END, draggingEvent);\n    this.stopDragging(draggingEvent);\n\n    if (this.gridOptionsWrapper.isRowDragManaged() && (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !this.isFromThisGrid(draggingEvent)) && !this.isDropZoneWithinThisGrid(draggingEvent)) {\n      this.moveRowAndClearHighlight(draggingEvent);\n    }\n  };\n\n  RowDragFeature.prototype.stopDragging = function (draggingEvent) {\n    this.ensureIntervalCleared();\n    this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n      rowNode.setDragging(false);\n    });\n  };\n\n  __decorate([Autowired('dragAndDropService')], RowDragFeature.prototype, \"dragAndDropService\", void 0);\n\n  __decorate([Autowired('rowModel')], RowDragFeature.prototype, \"rowModel\", void 0);\n\n  __decorate([Autowired('columnController')], RowDragFeature.prototype, \"columnController\", void 0);\n\n  __decorate([Autowired('focusController')], RowDragFeature.prototype, \"focusController\", void 0);\n\n  __decorate([Autowired('sortController')], RowDragFeature.prototype, \"sortController\", void 0);\n\n  __decorate([Autowired('filterManager')], RowDragFeature.prototype, \"filterManager\", void 0);\n\n  __decorate([Autowired('gridOptionsWrapper')], RowDragFeature.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([Autowired('selectionController')], RowDragFeature.prototype, \"selectionController\", void 0);\n\n  __decorate([Optional('rangeController')], RowDragFeature.prototype, \"rangeController\", void 0);\n\n  __decorate([Autowired('mouseEventService')], RowDragFeature.prototype, \"mouseEventService\", void 0);\n\n  __decorate([PostConstruct], RowDragFeature.prototype, \"postConstruct\", null);\n\n  return RowDragFeature;\n}(BeanStub);\n\nexport { RowDragFeature };","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/@ag-grid-community/core/dist/es6/gridPanel/rowDragFeature.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__spreadArrays","il","k","a","j","jl","DragAndDropService","DragSourceType","VerticalDirection","Autowired","Optional","PostConstruct","Events","last","BeanStub","_","RowDragFeature","_super","eContainer","gridPanel","_this","isMultiRowDrag","isGridSorted","isGridFiltered","isRowGroupActive","postConstruct","gridOptionsWrapper","isRowModelDefault","clientSideRowModel","rowModel","addManagedListener","eventService","EVENT_SORT_CHANGED","onSortChanged","bind","EVENT_FILTER_CHANGED","onFilterChanged","EVENT_COLUMN_ROW_GROUP_CHANGED","onRowGroupChanged","sortModel","sortController","getSortModel","missingOrEmpty","filterManager","isAnyFilterPresent","rowGroups","columnController","getRowGroupColumns","getContainer","isInterestedIn","type","RowDrag","getIconName","managedDrag","isRowDragManaged","shouldPreventRowMove","ICON_NOT_ALLOWED","ICON_MOVE","getRowNodes","draggingEvent","isFromThisGrid","dragItem","rowNodes","enableMultiRowDragging","isEnableMultiRowDragging","selectedNodes","selectionController","getSelectedNodes","currentNode","rowNode","indexOf","onDragEnter","dispatchGridEvent","EVENT_ROW_DRAG_ENTER","forEach","setDragging","onEnterOrDragging","onDragging","getGui","contains","dragSource","eElement","isDropZoneWithinThisGrid","gridGui","dropZoneTarget","EVENT_ROW_DRAG_MOVE","lastDraggingEvent","pixel","mouseEventService","getNormalisedPosition","y","doManagedDrag","checkCenterForScrolling","sort","getRowIndexNumber","isSuppressMoveWhenRowDragging","highlightRowAtPixel","moveRows","parseInt","getRowIndexString","split","moveRowAndClearHighlight","lastHighlightedRowNode","getLastHighlightedRowNode","isBelow","highlighted","increment","rowTop","getRowNodeId_1","getRowNodeIdFunc","addIndex","getRowIndexAtPixel","getHighlightPosition","updateRowData","add","map","node","data","filter","getRowNode","id","clearRowHighlight","rowWasMoved","ensureRowsAtPixel","focusController","clearFocusedCell","rangeController","removeAllCellRanges","pixelRange","getVScrollPosition","needToMoveUp","top","needToMoveDown","bottom","ensureIntervalStarted","ensureIntervalCleared","movingIntervalId","intervalCount","window","setInterval","moveInterval","clearInterval","pixelsToMove","pixelsMoved","scrollVertically","addRowDropZone","params","doOnce","console","warn","dragAndDropService","findExternalZone","processedParams","fromGrid","undefined","e","draggingToRowDragEvent","onDragLeave","EVENT_ROW_DRAG_LEAVE","onDragStop","EVENT_ROW_DRAG_END","addDropTarget","external","getRowDropZone","events","yNormalised","mouseIsPastLastRow","getCurrentPageHeight","overIndex","overNode","getRow","vDirectionString","vDirection","Down","Up","event","api","getApi","columnApi","getColumnApi","nodes","dispatchEvent","stopDragging"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { DragAndDropService, DragSourceType, VerticalDirection } from \"../dragAndDrop/dragAndDropService\";\nimport { Autowired, Optional, PostConstruct } from \"../context/context\";\nimport { Events } from \"../eventKeys\";\nimport { last } from '../utils/array';\nimport { BeanStub } from \"../context/beanStub\";\nimport { _ } from \"../utils\";\nvar RowDragFeature = /** @class */ (function (_super) {\n    __extends(RowDragFeature, _super);\n    function RowDragFeature(eContainer, gridPanel) {\n        var _this = _super.call(this) || this;\n        _this.isMultiRowDrag = false;\n        _this.isGridSorted = false;\n        _this.isGridFiltered = false;\n        _this.isRowGroupActive = false;\n        _this.eContainer = eContainer;\n        _this.gridPanel = gridPanel;\n        return _this;\n    }\n    RowDragFeature.prototype.postConstruct = function () {\n        if (this.gridOptionsWrapper.isRowModelDefault()) {\n            this.clientSideRowModel = this.rowModel;\n        }\n        this.addManagedListener(this.eventService, Events.EVENT_SORT_CHANGED, this.onSortChanged.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_FILTER_CHANGED, this.onFilterChanged.bind(this));\n        this.addManagedListener(this.eventService, Events.EVENT_COLUMN_ROW_GROUP_CHANGED, this.onRowGroupChanged.bind(this));\n        this.onSortChanged();\n        this.onFilterChanged();\n        this.onRowGroupChanged();\n    };\n    RowDragFeature.prototype.onSortChanged = function () {\n        var sortModel = this.sortController.getSortModel();\n        this.isGridSorted = !_.missingOrEmpty(sortModel);\n    };\n    RowDragFeature.prototype.onFilterChanged = function () {\n        this.isGridFiltered = this.filterManager.isAnyFilterPresent();\n    };\n    RowDragFeature.prototype.onRowGroupChanged = function () {\n        var rowGroups = this.columnController.getRowGroupColumns();\n        this.isRowGroupActive = !_.missingOrEmpty(rowGroups);\n    };\n    RowDragFeature.prototype.getContainer = function () {\n        return this.eContainer;\n    };\n    RowDragFeature.prototype.isInterestedIn = function (type) {\n        return type === DragSourceType.RowDrag;\n    };\n    RowDragFeature.prototype.getIconName = function () {\n        var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n        if (managedDrag && this.shouldPreventRowMove()) {\n            return DragAndDropService.ICON_NOT_ALLOWED;\n        }\n        return DragAndDropService.ICON_MOVE;\n    };\n    RowDragFeature.prototype.shouldPreventRowMove = function () {\n        return this.isGridSorted || this.isGridFiltered || this.isRowGroupActive;\n    };\n    RowDragFeature.prototype.getRowNodes = function (draggingEvent) {\n        if (!this.isFromThisGrid(draggingEvent)) {\n            return draggingEvent.dragItem.rowNodes;\n        }\n        var enableMultiRowDragging = this.gridOptionsWrapper.isEnableMultiRowDragging();\n        var selectedNodes = this.selectionController.getSelectedNodes();\n        var currentNode = draggingEvent.dragItem.rowNode;\n        if (enableMultiRowDragging && selectedNodes.indexOf(currentNode) !== -1) {\n            this.isMultiRowDrag = true;\n            return __spreadArrays(selectedNodes);\n        }\n        this.isMultiRowDrag = false;\n        return [currentNode];\n    };\n    RowDragFeature.prototype.onDragEnter = function (draggingEvent) {\n        // when entering, we fire the enter event, then in onEnterOrDragging,\n        // we also fire the move event. so we get both events when entering.\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER, draggingEvent);\n        this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n            rowNode.setDragging(true);\n        });\n        this.onEnterOrDragging(draggingEvent);\n    };\n    RowDragFeature.prototype.onDragging = function (draggingEvent) {\n        this.onEnterOrDragging(draggingEvent);\n    };\n    RowDragFeature.prototype.isFromThisGrid = function (draggingEvent) {\n        return this.gridPanel.getGui().contains(draggingEvent.dragSource.eElement);\n    };\n    RowDragFeature.prototype.isDropZoneWithinThisGrid = function (draggingEvent) {\n        var gridGui = this.gridPanel.getGui();\n        var dropZoneTarget = draggingEvent.dropZoneTarget;\n        return !gridGui.contains(dropZoneTarget);\n    };\n    RowDragFeature.prototype.onEnterOrDragging = function (draggingEvent) {\n        // this event is fired for enter and move\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE, draggingEvent);\n        this.lastDraggingEvent = draggingEvent;\n        var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n        var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n        if (managedDrag) {\n            this.doManagedDrag(draggingEvent, pixel);\n        }\n        this.checkCenterForScrolling(pixel);\n    };\n    RowDragFeature.prototype.doManagedDrag = function (draggingEvent, pixel) {\n        var _this = this;\n        var rowNodes;\n        var isFromThisGrid = this.isFromThisGrid(draggingEvent);\n        if (isFromThisGrid) {\n            rowNodes = [draggingEvent.dragItem.rowNode];\n            if (this.isMultiRowDrag) {\n                rowNodes = __spreadArrays(this.selectionController.getSelectedNodes()).sort(function (a, b) { return _this.getRowIndexNumber(a) - _this.getRowIndexNumber(b); });\n            }\n            draggingEvent.dragItem.rowNodes = rowNodes;\n        }\n        else {\n            rowNodes = draggingEvent.dragItem.rowNodes;\n        }\n        var managedDrag = this.gridOptionsWrapper.isRowDragManaged();\n        if (managedDrag && this.shouldPreventRowMove()) {\n            return;\n        }\n        if (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !isFromThisGrid) {\n            if (!this.isDropZoneWithinThisGrid(draggingEvent)) {\n                this.clientSideRowModel.highlightRowAtPixel(rowNodes[0], pixel);\n            }\n        }\n        else {\n            this.moveRows(rowNodes, pixel);\n        }\n    };\n    RowDragFeature.prototype.getRowIndexNumber = function (rowNode) {\n        return parseInt(last(rowNode.getRowIndexString().split('-')), 10);\n    };\n    RowDragFeature.prototype.moveRowAndClearHighlight = function (draggingEvent) {\n        var _this = this;\n        var lastHighlightedRowNode = this.clientSideRowModel.getLastHighlightedRowNode();\n        var isBelow = lastHighlightedRowNode && lastHighlightedRowNode.highlighted === 'below';\n        var pixel = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n        var rowNodes = draggingEvent.dragItem.rowNodes;\n        var increment = isBelow ? 1 : 0;\n        if (this.isFromThisGrid(draggingEvent)) {\n            rowNodes.forEach(function (rowNode) {\n                if (rowNode.rowTop < pixel) {\n                    increment -= 1;\n                }\n            });\n            this.moveRows(rowNodes, pixel, increment);\n        }\n        else {\n            var getRowNodeId_1 = this.gridOptionsWrapper.getRowNodeIdFunc();\n            var addIndex = this.clientSideRowModel.getRowIndexAtPixel(pixel) + 1;\n            if (this.clientSideRowModel.getHighlightPosition(pixel) === 'above') {\n                addIndex--;\n            }\n            this.clientSideRowModel.updateRowData({\n                add: rowNodes\n                    .map(function (node) { return node.data; })\n                    .filter(function (data) { return !_this.clientSideRowModel.getRowNode(getRowNodeId_1 ? getRowNodeId_1(data) : data.id); }),\n                addIndex: addIndex\n            });\n        }\n        this.clearRowHighlight();\n    };\n    RowDragFeature.prototype.clearRowHighlight = function () {\n        this.clientSideRowModel.highlightRowAtPixel(null);\n    };\n    RowDragFeature.prototype.moveRows = function (rowNodes, pixel, increment) {\n        if (increment === void 0) { increment = 0; }\n        var rowWasMoved = this.clientSideRowModel.ensureRowsAtPixel(rowNodes, pixel, increment);\n        if (rowWasMoved) {\n            this.focusController.clearFocusedCell();\n            if (this.rangeController) {\n                this.rangeController.removeAllCellRanges();\n            }\n        }\n    };\n    RowDragFeature.prototype.checkCenterForScrolling = function (pixel) {\n        // scroll if the mouse is within 50px of the grid edge\n        var pixelRange = this.gridPanel.getVScrollPosition();\n        // console.log(`pixelRange = (${pixelRange.top}, ${pixelRange.bottom})`);\n        this.needToMoveUp = pixel < (pixelRange.top + 50);\n        this.needToMoveDown = pixel > (pixelRange.bottom - 50);\n        // console.log(`needToMoveUp = ${this.needToMoveUp} = pixel < (pixelRange.top + 50) = ${pixel} < (${pixelRange.top} + 50)`);\n        // console.log(`needToMoveDown = ${this.needToMoveDown} = pixel < (pixelRange.top + 50) = ${pixel} < (${pixelRange.top} + 50)`);\n        if (this.needToMoveUp || this.needToMoveDown) {\n            this.ensureIntervalStarted();\n        }\n        else {\n            this.ensureIntervalCleared();\n        }\n    };\n    RowDragFeature.prototype.ensureIntervalStarted = function () {\n        if (this.movingIntervalId) {\n            return;\n        }\n        this.intervalCount = 0;\n        this.movingIntervalId = window.setInterval(this.moveInterval.bind(this), 100);\n    };\n    RowDragFeature.prototype.ensureIntervalCleared = function () {\n        if (!this.moveInterval) {\n            return;\n        }\n        window.clearInterval(this.movingIntervalId);\n        this.movingIntervalId = null;\n    };\n    RowDragFeature.prototype.moveInterval = function () {\n        // the amounts we move get bigger at each interval, so the speed accelerates, starting a bit slow\n        // and getting faster. this is to give smoother user experience. we max at 100px to limit the speed.\n        var pixelsToMove;\n        this.intervalCount++;\n        pixelsToMove = 10 + (this.intervalCount * 5);\n        if (pixelsToMove > 100) {\n            pixelsToMove = 100;\n        }\n        var pixelsMoved;\n        if (this.needToMoveDown) {\n            pixelsMoved = this.gridPanel.scrollVertically(pixelsToMove);\n        }\n        else if (this.needToMoveUp) {\n            pixelsMoved = this.gridPanel.scrollVertically(-pixelsToMove);\n        }\n        if (pixelsMoved !== 0) {\n            this.onDragging(this.lastDraggingEvent);\n        }\n    };\n    RowDragFeature.prototype.addRowDropZone = function (params) {\n        var _this = this;\n        if (!params.getContainer()) {\n            _.doOnce(function () { return console.warn('ag-Grid: addRowDropZone - A container target needs to be provided'); }, 'add-drop-zone-empty-target');\n            return;\n        }\n        if (this.dragAndDropService.findExternalZone(params)) {\n            console.warn('ag-Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.');\n            return;\n        }\n        var processedParams = {\n            getContainer: params.getContainer\n        };\n        if (params.fromGrid) {\n            params.fromGrid = undefined;\n            processedParams = params;\n        }\n        else {\n            if (params.onDragEnter) {\n                processedParams.onDragEnter = function (e) {\n                    params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n                };\n            }\n            if (params.onDragLeave) {\n                processedParams.onDragLeave = function (e) {\n                    params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n                };\n            }\n            if (params.onDragging) {\n                processedParams.onDragging = function (e) {\n                    params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n                };\n            }\n            if (params.onDragStop) {\n                processedParams.onDragStop = function (e) {\n                    params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n                };\n            }\n        }\n        this.dragAndDropService.addDropTarget(__assign({ isInterestedIn: function (type) { return type === DragSourceType.RowDrag; }, getIconName: function () { return DragAndDropService.ICON_MOVE; }, external: true }, processedParams));\n    };\n    RowDragFeature.prototype.getRowDropZone = function (events) {\n        var _this = this;\n        var getContainer = this.getContainer.bind(this);\n        var onDragEnter = this.onDragEnter.bind(this);\n        var onDragLeave = this.onDragLeave.bind(this);\n        var onDragging = this.onDragging.bind(this);\n        var onDragStop = this.onDragStop.bind(this);\n        if (!events) {\n            return { getContainer: getContainer, onDragEnter: onDragEnter, onDragLeave: onDragLeave, onDragging: onDragging, onDragStop: onDragStop, fromGrid: true };\n        }\n        return {\n            getContainer: getContainer,\n            onDragEnter: events.onDragEnter\n                ? (function (e) {\n                    onDragEnter(e);\n                    events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER, e));\n                })\n                : onDragEnter,\n            onDragLeave: events.onDragLeave\n                ? (function (e) {\n                    onDragLeave(e);\n                    events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE, e));\n                })\n                : onDragLeave,\n            onDragging: events.onDragging\n                ? (function (e) {\n                    onDragging(e);\n                    events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE, e));\n                })\n                : onDragging,\n            onDragStop: events.onDragStop\n                ? (function (e) {\n                    onDragStop(e);\n                    events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END, e));\n                })\n                : onDragStop,\n            fromGrid: true\n        };\n    };\n    RowDragFeature.prototype.draggingToRowDragEvent = function (type, draggingEvent) {\n        var yNormalised = this.mouseEventService.getNormalisedPosition(draggingEvent).y;\n        var mouseIsPastLastRow = yNormalised > this.rowModel.getCurrentPageHeight();\n        var overIndex = -1;\n        var overNode = null;\n        if (!mouseIsPastLastRow) {\n            overIndex = this.rowModel.getRowIndexAtPixel(yNormalised);\n            overNode = this.rowModel.getRow(overIndex);\n        }\n        var vDirectionString;\n        switch (draggingEvent.vDirection) {\n            case VerticalDirection.Down:\n                vDirectionString = 'down';\n                break;\n            case VerticalDirection.Up:\n                vDirectionString = 'up';\n                break;\n            default:\n                vDirectionString = null;\n                break;\n        }\n        var event = {\n            type: type,\n            api: this.gridOptionsWrapper.getApi(),\n            columnApi: this.gridOptionsWrapper.getColumnApi(),\n            event: draggingEvent.event,\n            node: draggingEvent.dragItem.rowNode,\n            nodes: draggingEvent.dragItem.rowNodes,\n            overIndex: overIndex,\n            overNode: overNode,\n            y: yNormalised,\n            vDirection: vDirectionString\n        };\n        return event;\n    };\n    RowDragFeature.prototype.dispatchGridEvent = function (type, draggingEvent) {\n        var event = this.draggingToRowDragEvent(type, draggingEvent);\n        this.eventService.dispatchEvent(event);\n    };\n    RowDragFeature.prototype.onDragLeave = function (draggingEvent) {\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE, draggingEvent);\n        this.stopDragging(draggingEvent);\n        this.clearRowHighlight();\n        if (this.isFromThisGrid(draggingEvent)) {\n            this.isMultiRowDrag = false;\n        }\n    };\n    RowDragFeature.prototype.onDragStop = function (draggingEvent) {\n        this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END, draggingEvent);\n        this.stopDragging(draggingEvent);\n        if (this.gridOptionsWrapper.isRowDragManaged() &&\n            (this.gridOptionsWrapper.isSuppressMoveWhenRowDragging() || !this.isFromThisGrid(draggingEvent)) &&\n            !this.isDropZoneWithinThisGrid(draggingEvent)) {\n            this.moveRowAndClearHighlight(draggingEvent);\n        }\n    };\n    RowDragFeature.prototype.stopDragging = function (draggingEvent) {\n        this.ensureIntervalCleared();\n        this.getRowNodes(draggingEvent).forEach(function (rowNode) {\n            rowNode.setDragging(false);\n        });\n    };\n    __decorate([\n        Autowired('dragAndDropService')\n    ], RowDragFeature.prototype, \"dragAndDropService\", void 0);\n    __decorate([\n        Autowired('rowModel')\n    ], RowDragFeature.prototype, \"rowModel\", void 0);\n    __decorate([\n        Autowired('columnController')\n    ], RowDragFeature.prototype, \"columnController\", void 0);\n    __decorate([\n        Autowired('focusController')\n    ], RowDragFeature.prototype, \"focusController\", void 0);\n    __decorate([\n        Autowired('sortController')\n    ], RowDragFeature.prototype, \"sortController\", void 0);\n    __decorate([\n        Autowired('filterManager')\n    ], RowDragFeature.prototype, \"filterManager\", void 0);\n    __decorate([\n        Autowired('gridOptionsWrapper')\n    ], RowDragFeature.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate([\n        Autowired('selectionController')\n    ], RowDragFeature.prototype, \"selectionController\", void 0);\n    __decorate([\n        Optional('rangeController')\n    ], RowDragFeature.prototype, \"rangeController\", void 0);\n    __decorate([\n        Autowired('mouseEventService')\n    ], RowDragFeature.prototype, \"mouseEventService\", void 0);\n    __decorate([\n        PostConstruct\n    ], RowDragFeature.prototype, \"postConstruct\", null);\n    return RowDragFeature;\n}(BeanStub));\nexport { RowDragFeature };\n"]},"metadata":{},"sourceType":"module"}