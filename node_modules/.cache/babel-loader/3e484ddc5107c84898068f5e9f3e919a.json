{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Constants } from \"../constants\";\nimport { Autowired, Bean, PostConstruct } from \"../context/context\";\nimport { Events } from '../events';\nimport { BeanStub } from \"../context/beanStub\";\nimport { _ } from \"../utils\";\n\nvar PopupService =\n/** @class */\nfunction (_super) {\n  __extends(PopupService, _super);\n\n  function PopupService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.popupList = [];\n    return _this;\n  }\n\n  PopupService.prototype.init = function () {\n    var _this = this;\n\n    this.addManagedListener(this.eventService, Events.EVENT_KEYBOARD_FOCUS, function () {\n      _this.popupList.forEach(function (popup) {\n        _.addCssClass(popup.element, 'ag-keyboard-focus');\n      });\n    });\n    this.addManagedListener(this.eventService, Events.EVENT_MOUSE_FOCUS, function () {\n      _this.popupList.forEach(function (popup) {\n        _.removeCssClass(popup.element, 'ag-keyboard-focus');\n      });\n    });\n  };\n\n  PopupService.prototype.registerGridCore = function (gridCore) {\n    this.gridCore = gridCore;\n  };\n\n  PopupService.prototype.getPopupParent = function () {\n    var ePopupParent = this.gridOptionsWrapper.getPopupParent();\n\n    if (ePopupParent) {\n      return ePopupParent;\n    }\n\n    return this.gridCore.getRootGui();\n  };\n\n  PopupService.prototype.positionPopupForMenu = function (params) {\n    var sourceRect = params.eventSource.getBoundingClientRect();\n    var parentRect = this.getParentRect();\n    var y = this.keepYWithinBounds(params, sourceRect.top - parentRect.top);\n    var minWidth = params.ePopup.clientWidth > 0 ? params.ePopup.clientWidth : 200;\n    params.ePopup.style.minWidth = minWidth + \"px\";\n    var widthOfParent = parentRect.right - parentRect.left;\n    var maxX = widthOfParent - minWidth; // the x position of the popup depends on RTL or LTR. for normal cases, LTR, we put the child popup\n    // to the right, unless it doesn't fit and we then put it to the left. for RTL it's the other way around,\n    // we try place it first to the left, and then if not to the right.\n\n    var x;\n\n    if (this.gridOptionsWrapper.isEnableRtl()) {\n      // for RTL, try left first\n      x = xLeftPosition();\n\n      if (x < 0) {\n        x = xRightPosition();\n      }\n\n      if (x > maxX) {\n        x = 0;\n      }\n    } else {\n      // for LTR, try right first\n      x = xRightPosition();\n\n      if (x > maxX) {\n        x = xLeftPosition();\n      }\n\n      if (x < 0) {\n        x = 0;\n      }\n    }\n\n    params.ePopup.style.left = x + \"px\";\n    params.ePopup.style.top = y + \"px\";\n\n    function xRightPosition() {\n      return sourceRect.right - parentRect.left - 2;\n    }\n\n    function xLeftPosition() {\n      return sourceRect.left - parentRect.left - minWidth;\n    }\n  };\n\n  PopupService.prototype.positionPopupUnderMouseEvent = function (params) {\n    var _a = this.calculatePointerAlign(params.mouseEvent),\n        x = _a.x,\n        y = _a.y;\n\n    var ePopup = params.ePopup,\n        nudgeX = params.nudgeX,\n        nudgeY = params.nudgeY;\n    this.positionPopup({\n      ePopup: ePopup,\n      x: x,\n      y: y,\n      nudgeX: nudgeX,\n      nudgeY: nudgeY,\n      keepWithinBounds: true\n    });\n    this.callPostProcessPopup(params.type, params.ePopup, null, params.mouseEvent, params.column, params.rowNode);\n  };\n\n  PopupService.prototype.calculatePointerAlign = function (e) {\n    var parentRect = this.getParentRect();\n    return {\n      x: e.clientX - parentRect.left,\n      y: e.clientY - parentRect.top\n    };\n  };\n\n  PopupService.prototype.positionPopupUnderComponent = function (params) {\n    var sourceRect = params.eventSource.getBoundingClientRect();\n    var alignSide = params.alignSide || 'left';\n    var parentRect = this.getParentRect();\n    var x = sourceRect.left - parentRect.left;\n\n    if (alignSide === 'right') {\n      x -= params.ePopup.offsetWidth - sourceRect.width;\n    }\n\n    this.positionPopup({\n      ePopup: params.ePopup,\n      minWidth: params.minWidth,\n      minHeight: params.minHeight,\n      nudgeX: params.nudgeX,\n      nudgeY: params.nudgeY,\n      x: x,\n      y: sourceRect.top - parentRect.top + sourceRect.height,\n      keepWithinBounds: params.keepWithinBounds\n    });\n    this.callPostProcessPopup(params.type, params.ePopup, params.eventSource, null, params.column, params.rowNode);\n  };\n\n  PopupService.prototype.positionPopupOverComponent = function (params) {\n    var sourceRect = params.eventSource.getBoundingClientRect();\n    var parentRect = this.getParentRect();\n    this.positionPopup({\n      ePopup: params.ePopup,\n      minWidth: params.minWidth,\n      nudgeX: params.nudgeX,\n      nudgeY: params.nudgeY,\n      x: sourceRect.left - parentRect.left,\n      y: sourceRect.top - parentRect.top,\n      keepWithinBounds: params.keepWithinBounds\n    });\n    this.callPostProcessPopup(params.type, params.ePopup, params.eventSource, null, params.column, params.rowNode);\n  };\n\n  PopupService.prototype.callPostProcessPopup = function (type, ePopup, eventSource, mouseEvent, column, rowNode) {\n    var callback = this.gridOptionsWrapper.getPostProcessPopupFunc();\n\n    if (callback) {\n      var params = {\n        column: column,\n        rowNode: rowNode,\n        ePopup: ePopup,\n        type: type,\n        eventSource: eventSource,\n        mouseEvent: mouseEvent\n      };\n      callback(params);\n    }\n  };\n\n  PopupService.prototype.positionPopup = function (params) {\n    var x = params.x;\n    var y = params.y;\n\n    if (params.nudgeX) {\n      x += params.nudgeX;\n    }\n\n    if (params.nudgeY) {\n      y += params.nudgeY;\n    } // if popup is overflowing to the bottom, move it up\n\n\n    if (params.keepWithinBounds) {\n      x = this.keepXWithinBounds(params, x);\n      y = this.keepYWithinBounds(params, y);\n    }\n\n    params.ePopup.style.left = x + \"px\";\n    params.ePopup.style.top = y + \"px\";\n  };\n\n  PopupService.prototype.getActivePopups = function () {\n    return this.popupList.map(function (popup) {\n      return popup.element;\n    });\n  };\n\n  PopupService.prototype.getParentRect = function () {\n    // subtract the popup parent borders, because popupParent.getBoundingClientRect\n    // returns the rect outside the borders, but the 0,0 coordinate for absolute\n    // positioning is inside the border, leading the popup to be off by the width\n    // of the border\n    var popupParent = this.getPopupParent();\n    var eDocument = this.gridOptionsWrapper.getDocument();\n\n    if (popupParent === eDocument.body) {\n      popupParent = eDocument.documentElement;\n    }\n\n    var style = getComputedStyle(popupParent);\n    var bounds = popupParent.getBoundingClientRect();\n    return {\n      top: bounds.top + parseFloat(style.borderTopWidth) || 0,\n      left: bounds.left + parseFloat(style.borderLeftWidth) || 0,\n      right: bounds.right + parseFloat(style.borderRightWidth) || 0,\n      bottom: bounds.bottom + parseFloat(style.borderBottomWidth) || 0\n    };\n  };\n\n  PopupService.prototype.keepYWithinBounds = function (params, y) {\n    var eDocument = this.gridOptionsWrapper.getDocument();\n    var docElement = eDocument.documentElement;\n    var popupParent = this.getPopupParent();\n    var parentRect = popupParent.getBoundingClientRect();\n    var documentRect = eDocument.documentElement.getBoundingClientRect();\n    var isBody = popupParent === eDocument.body;\n    var minHeight = Math.min(200, parentRect.height);\n    var diff = 0;\n\n    if (params.minHeight && params.minHeight < minHeight) {\n      minHeight = params.minHeight;\n    } else if (params.ePopup.offsetHeight > 0) {\n      minHeight = params.ePopup.clientHeight;\n      diff = _.getAbsoluteHeight(params.ePopup) - minHeight;\n    }\n\n    var heightOfParent = isBody ? _.getAbsoluteHeight(docElement) + docElement.scrollTop : parentRect.height;\n\n    if (isBody) {\n      heightOfParent -= Math.abs(documentRect.top - parentRect.top);\n    }\n\n    var maxY = heightOfParent - minHeight - diff;\n    return Math.min(Math.max(y, 0), Math.abs(maxY));\n  };\n\n  PopupService.prototype.keepXWithinBounds = function (params, x) {\n    var eDocument = this.gridOptionsWrapper.getDocument();\n    var docElement = eDocument.documentElement;\n    var popupParent = this.getPopupParent();\n    var parentRect = popupParent.getBoundingClientRect();\n    var documentRect = eDocument.documentElement.getBoundingClientRect();\n    var isBody = popupParent === eDocument.body;\n    var ePopup = params.ePopup;\n    var minWidth = Math.min(200, parentRect.width);\n    var diff = 0;\n\n    if (params.minWidth && params.minWidth < minWidth) {\n      minWidth = params.minWidth;\n    } else if (ePopup.offsetWidth > 0) {\n      minWidth = ePopup.offsetWidth;\n      ePopup.style.minWidth = minWidth + \"px\";\n      diff = _.getAbsoluteWidth(ePopup) - minWidth;\n    }\n\n    var widthOfParent = isBody ? _.getAbsoluteWidth(docElement) + docElement.scrollLeft : parentRect.width;\n\n    if (isBody) {\n      widthOfParent -= Math.abs(documentRect.left - parentRect.left);\n    }\n\n    var maxX = widthOfParent - minWidth - diff;\n    return Math.min(Math.max(x, 0), Math.abs(maxX));\n  }; // adds an element to a div, but also listens to background checking for clicks,\n  // so that when the background is clicked, the child is removed again, giving\n  // a model look to popups.\n\n\n  PopupService.prototype.addAsModalPopup = function (eChild, closeOnEsc, closedCallback, click) {\n    return this.addPopup(true, eChild, closeOnEsc, closedCallback, click);\n  };\n\n  PopupService.prototype.addPopup = function (modal, eChild, closeOnEsc, closedCallback, click, alwaysOnTop) {\n    var _this = this;\n\n    var eDocument = this.gridOptionsWrapper.getDocument();\n\n    if (!eDocument) {\n      console.warn('ag-grid: could not find the document, document is empty');\n      return function () {};\n    }\n\n    var pos = _.findIndex(this.popupList, function (popup) {\n      return popup.element === eChild;\n    });\n\n    if (pos !== -1) {\n      var popup = this.popupList[pos];\n      return popup.hideFunc;\n    }\n\n    var ePopupParent = this.getPopupParent(); // for angular specifically, but shouldn't cause an issue with js or other fw's\n    // https://github.com/angular/angular/issues/8563\n\n    ePopupParent.appendChild(eChild);\n    eChild.style.top = '0px';\n    eChild.style.left = '0px'; // add env CSS class to child, in case user provided a popup parent, which means\n    // theme class may be missing\n\n    var eWrapper = document.createElement('div');\n    var theme = this.environment.getTheme().theme;\n\n    if (theme) {\n      _.addCssClass(eWrapper, theme);\n    }\n\n    _.addCssClass(eWrapper, 'ag-popup');\n\n    _.addCssClass(eChild, this.gridOptionsWrapper.isEnableRtl() ? 'ag-rtl' : 'ag-ltr');\n\n    _.addCssClass(eChild, 'ag-popup-child');\n\n    eWrapper.appendChild(eChild);\n    ePopupParent.appendChild(eWrapper);\n\n    if (alwaysOnTop) {\n      this.setAlwaysOnTop(eWrapper, true);\n    } else {\n      this.bringPopupToFront(eWrapper);\n    }\n\n    var popupHidden = false;\n\n    var hidePopupOnKeyboardEvent = function hidePopupOnKeyboardEvent(event) {\n      var key = event.which || event.keyCode;\n\n      if (!eWrapper.contains(document.activeElement)) {\n        return;\n      }\n\n      switch (key) {\n        case Constants.KEY_ESCAPE:\n          hidePopup({\n            keyboardEvent: event\n          });\n      }\n    };\n\n    var hidePopupOnMouseEvent = function hidePopupOnMouseEvent(event) {\n      hidePopup({\n        mouseEvent: event\n      });\n    };\n\n    var hidePopupOnTouchEvent = function hidePopupOnTouchEvent(event) {\n      hidePopup({\n        touchEvent: event\n      });\n    };\n\n    var hidePopup = function hidePopup(params) {\n      if (params === void 0) {\n        params = {};\n      }\n\n      var mouseEvent = params.mouseEvent,\n          touchEvent = params.touchEvent,\n          keyboardEvent = params.keyboardEvent;\n\n      if ( // we don't hide popup if the event was on the child, or any\n      // children of this child\n      _this.isEventFromCurrentPopup({\n        mouseEvent: mouseEvent,\n        touchEvent: touchEvent\n      }, eChild) || // if the event to close is actually the open event, then ignore it\n      _this.isEventSameChainAsOriginalEvent({\n        originalMouseEvent: click,\n        mouseEvent: mouseEvent,\n        touchEvent: touchEvent\n      }) || // this method should only be called once. the client can have different\n      // paths, each one wanting to close, so this method may be called multiple times.\n      popupHidden) {\n        return;\n      }\n\n      popupHidden = true;\n      ePopupParent.removeChild(eWrapper);\n      eDocument.removeEventListener('keydown', hidePopupOnKeyboardEvent);\n      eDocument.removeEventListener('mousedown', hidePopupOnMouseEvent);\n      eDocument.removeEventListener('touchstart', hidePopupOnTouchEvent);\n      eDocument.removeEventListener('contextmenu', hidePopupOnMouseEvent);\n\n      _this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);\n\n      if (closedCallback) {\n        closedCallback(mouseEvent || touchEvent || keyboardEvent);\n      }\n\n      _this.popupList = _this.popupList.filter(function (popup) {\n        return popup.element !== eChild;\n      });\n    }; // if we add these listeners now, then the current mouse\n    // click will be included, which we don't want\n\n\n    window.setTimeout(function () {\n      if (closeOnEsc) {\n        eDocument.addEventListener('keydown', hidePopupOnKeyboardEvent);\n      }\n\n      if (modal) {\n        eDocument.addEventListener('mousedown', hidePopupOnMouseEvent);\n\n        _this.eventService.addEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);\n\n        eDocument.addEventListener('touchstart', hidePopupOnTouchEvent);\n        eDocument.addEventListener('contextmenu', hidePopupOnMouseEvent);\n      }\n    }, 0);\n    this.popupList.push({\n      element: eChild,\n      hideFunc: hidePopup\n    });\n    return hidePopup;\n  };\n\n  PopupService.prototype.isEventFromCurrentPopup = function (params, target) {\n    var mouseEvent = params.mouseEvent,\n        touchEvent = params.touchEvent;\n    var event = mouseEvent ? mouseEvent : touchEvent;\n\n    if (!event) {\n      return false;\n    }\n\n    var indexOfThisChild = _.findIndex(this.popupList, function (popup) {\n      return popup.element === target;\n    });\n\n    if (indexOfThisChild === -1) {\n      return false;\n    }\n\n    for (var i = indexOfThisChild; i < this.popupList.length; i++) {\n      var popup = this.popupList[i];\n\n      if (_.isElementInEventPath(popup.element, event)) {\n        return true;\n      }\n    } // if the user did not write their own Custom Element to be rendered as popup\n    // and this component has an additional popup element, they should have the\n    // `ag-custom-component-popup` class to be detected as part of the Custom Component\n\n\n    return this.isElementWithinCustomPopup(event.target);\n  };\n\n  PopupService.prototype.isElementWithinCustomPopup = function (el) {\n    if (!this.popupList.length) {\n      return false;\n    }\n\n    while (el && el !== document.body) {\n      if (el.classList.contains('ag-custom-component-popup') || el.parentElement === null) {\n        return true;\n      }\n\n      el = el.parentElement;\n    }\n\n    return false;\n  }; // in some browsers, the context menu event can be fired before the click event, which means\n  // the context menu event could open the popup, but then the click event closes it straight away.\n\n\n  PopupService.prototype.isEventSameChainAsOriginalEvent = function (params) {\n    var originalMouseEvent = params.originalMouseEvent,\n        mouseEvent = params.mouseEvent,\n        touchEvent = params.touchEvent; // we check the coordinates of the event, to see if it's the same event. there is a 1 / 1000 chance that\n    // the event is a different event, however that is an edge case that is not very relevant (the user clicking\n    // twice on the same location isn't a normal path).\n    // event could be mouse event or touch event.\n\n    var mouseEventOrTouch = null;\n\n    if (mouseEvent) {\n      // mouse event can be used direction, it has coordinates\n      mouseEventOrTouch = mouseEvent;\n    } else if (touchEvent) {\n      // touch event doesn't have coordinates, need it's touch object\n      mouseEventOrTouch = touchEvent.touches[0];\n    }\n\n    if (mouseEventOrTouch && originalMouseEvent) {\n      // for x, allow 4px margin, to cover iPads, where touch (which opens menu) is followed\n      // by browser click (when you finger up, touch is interrupted as click in browser)\n      var screenX_1 = mouseEvent ? mouseEvent.screenX : 0;\n      var screenY_1 = mouseEvent ? mouseEvent.screenY : 0;\n      var xMatch = Math.abs(originalMouseEvent.screenX - screenX_1) < 5;\n      var yMatch = Math.abs(originalMouseEvent.screenY - screenY_1) < 5;\n\n      if (xMatch && yMatch) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  PopupService.prototype.getWrapper = function (ePopup) {\n    while (!_.containsClass(ePopup, 'ag-popup') && ePopup.parentElement) {\n      ePopup = ePopup.parentElement;\n    }\n\n    return _.containsClass(ePopup, 'ag-popup') ? ePopup : null;\n  };\n\n  PopupService.prototype.setAlwaysOnTop = function (ePopup, alwaysOnTop) {\n    var eWrapper = this.getWrapper(ePopup);\n\n    if (!eWrapper) {\n      return;\n    }\n\n    _.addOrRemoveCssClass(eWrapper, 'ag-always-on-top', !!alwaysOnTop);\n\n    if (alwaysOnTop) {\n      this.bringPopupToFront(eWrapper);\n    }\n  };\n\n  PopupService.prototype.bringPopupToFront = function (ePopup) {\n    var parent = this.getPopupParent();\n    var popupList = Array.prototype.slice.call(parent.querySelectorAll('.ag-popup'));\n    var popupLen = popupList.length;\n    var alwaysOnTopList = Array.prototype.slice.call(parent.querySelectorAll('.ag-popup.ag-always-on-top'));\n    var onTopLength = alwaysOnTopList.length;\n    var eWrapper = this.getWrapper(ePopup);\n\n    if (!eWrapper || popupLen <= 1 || !parent.contains(ePopup)) {\n      return;\n    }\n\n    var pos = popupList.indexOf(eWrapper);\n\n    if (onTopLength) {\n      var isPopupAlwaysOnTop = _.containsClass(eWrapper, 'ag-always-on-top');\n\n      if (isPopupAlwaysOnTop) {\n        if (pos !== popupLen - 1) {\n          _.last(alwaysOnTopList).insertAdjacentElement('afterend', eWrapper);\n        }\n      } else if (pos !== popupLen - onTopLength - 1) {\n        alwaysOnTopList[0].insertAdjacentElement('beforebegin', eWrapper);\n      }\n    } else if (pos !== popupLen - 1) {\n      _.last(popupList).insertAdjacentElement('afterend', eWrapper);\n    }\n\n    var params = {\n      type: 'popupToFront',\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi(),\n      eWrapper: eWrapper\n    };\n    this.eventService.dispatchEvent(params);\n  };\n\n  __decorate([Autowired('gridOptionsWrapper')], PopupService.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([Autowired('environment')], PopupService.prototype, \"environment\", void 0);\n\n  __decorate([PostConstruct], PopupService.prototype, \"init\", null);\n\n  PopupService = __decorate([Bean('popupService')], PopupService);\n  return PopupService;\n}(BeanStub);\n\nexport { PopupService };","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/@ag-grid-community/core/dist/es6/widgets/popupService.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Constants","Autowired","Bean","PostConstruct","Events","BeanStub","_","PopupService","_super","_this","apply","popupList","init","addManagedListener","eventService","EVENT_KEYBOARD_FOCUS","forEach","popup","addCssClass","element","EVENT_MOUSE_FOCUS","removeCssClass","registerGridCore","gridCore","getPopupParent","ePopupParent","gridOptionsWrapper","getRootGui","positionPopupForMenu","params","sourceRect","eventSource","getBoundingClientRect","parentRect","getParentRect","y","keepYWithinBounds","top","minWidth","ePopup","clientWidth","style","widthOfParent","right","left","maxX","x","isEnableRtl","xLeftPosition","xRightPosition","positionPopupUnderMouseEvent","_a","calculatePointerAlign","mouseEvent","nudgeX","nudgeY","positionPopup","keepWithinBounds","callPostProcessPopup","type","column","rowNode","e","clientX","clientY","positionPopupUnderComponent","alignSide","offsetWidth","width","minHeight","height","positionPopupOverComponent","callback","getPostProcessPopupFunc","keepXWithinBounds","getActivePopups","map","popupParent","eDocument","getDocument","body","documentElement","getComputedStyle","bounds","parseFloat","borderTopWidth","borderLeftWidth","borderRightWidth","bottom","borderBottomWidth","docElement","documentRect","isBody","Math","min","diff","offsetHeight","clientHeight","getAbsoluteHeight","heightOfParent","scrollTop","abs","maxY","max","getAbsoluteWidth","scrollLeft","addAsModalPopup","eChild","closeOnEsc","closedCallback","click","addPopup","modal","alwaysOnTop","console","warn","pos","findIndex","hideFunc","appendChild","eWrapper","document","createElement","theme","environment","getTheme","setAlwaysOnTop","bringPopupToFront","popupHidden","hidePopupOnKeyboardEvent","event","which","keyCode","contains","activeElement","KEY_ESCAPE","hidePopup","keyboardEvent","hidePopupOnMouseEvent","hidePopupOnTouchEvent","touchEvent","isEventFromCurrentPopup","isEventSameChainAsOriginalEvent","originalMouseEvent","removeChild","removeEventListener","EVENT_DRAG_STARTED","filter","window","setTimeout","addEventListener","push","indexOfThisChild","isElementInEventPath","isElementWithinCustomPopup","el","classList","parentElement","mouseEventOrTouch","touches","screenX_1","screenX","screenY_1","screenY","xMatch","yMatch","getWrapper","containsClass","addOrRemoveCssClass","parent","slice","call","querySelectorAll","popupLen","alwaysOnTopList","onTopLength","indexOf","isPopupAlwaysOnTop","last","insertAdjacentElement","api","getApi","columnApi","getColumnApi","dispatchEvent"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Constants } from \"../constants\";\nimport { Autowired, Bean, PostConstruct } from \"../context/context\";\nimport { Events } from '../events';\nimport { BeanStub } from \"../context/beanStub\";\nimport { _ } from \"../utils\";\nvar PopupService = /** @class */ (function (_super) {\n    __extends(PopupService, _super);\n    function PopupService() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.popupList = [];\n        return _this;\n    }\n    PopupService.prototype.init = function () {\n        var _this = this;\n        this.addManagedListener(this.eventService, Events.EVENT_KEYBOARD_FOCUS, function () {\n            _this.popupList.forEach(function (popup) {\n                _.addCssClass(popup.element, 'ag-keyboard-focus');\n            });\n        });\n        this.addManagedListener(this.eventService, Events.EVENT_MOUSE_FOCUS, function () {\n            _this.popupList.forEach(function (popup) {\n                _.removeCssClass(popup.element, 'ag-keyboard-focus');\n            });\n        });\n    };\n    PopupService.prototype.registerGridCore = function (gridCore) {\n        this.gridCore = gridCore;\n    };\n    PopupService.prototype.getPopupParent = function () {\n        var ePopupParent = this.gridOptionsWrapper.getPopupParent();\n        if (ePopupParent) {\n            return ePopupParent;\n        }\n        return this.gridCore.getRootGui();\n    };\n    PopupService.prototype.positionPopupForMenu = function (params) {\n        var sourceRect = params.eventSource.getBoundingClientRect();\n        var parentRect = this.getParentRect();\n        var y = this.keepYWithinBounds(params, sourceRect.top - parentRect.top);\n        var minWidth = (params.ePopup.clientWidth > 0) ? params.ePopup.clientWidth : 200;\n        params.ePopup.style.minWidth = minWidth + \"px\";\n        var widthOfParent = parentRect.right - parentRect.left;\n        var maxX = widthOfParent - minWidth;\n        // the x position of the popup depends on RTL or LTR. for normal cases, LTR, we put the child popup\n        // to the right, unless it doesn't fit and we then put it to the left. for RTL it's the other way around,\n        // we try place it first to the left, and then if not to the right.\n        var x;\n        if (this.gridOptionsWrapper.isEnableRtl()) {\n            // for RTL, try left first\n            x = xLeftPosition();\n            if (x < 0) {\n                x = xRightPosition();\n            }\n            if (x > maxX) {\n                x = 0;\n            }\n        }\n        else {\n            // for LTR, try right first\n            x = xRightPosition();\n            if (x > maxX) {\n                x = xLeftPosition();\n            }\n            if (x < 0) {\n                x = 0;\n            }\n        }\n        params.ePopup.style.left = x + \"px\";\n        params.ePopup.style.top = y + \"px\";\n        function xRightPosition() {\n            return sourceRect.right - parentRect.left - 2;\n        }\n        function xLeftPosition() {\n            return sourceRect.left - parentRect.left - minWidth;\n        }\n    };\n    PopupService.prototype.positionPopupUnderMouseEvent = function (params) {\n        var _a = this.calculatePointerAlign(params.mouseEvent), x = _a.x, y = _a.y;\n        var ePopup = params.ePopup, nudgeX = params.nudgeX, nudgeY = params.nudgeY;\n        this.positionPopup({\n            ePopup: ePopup,\n            x: x,\n            y: y,\n            nudgeX: nudgeX,\n            nudgeY: nudgeY,\n            keepWithinBounds: true\n        });\n        this.callPostProcessPopup(params.type, params.ePopup, null, params.mouseEvent, params.column, params.rowNode);\n    };\n    PopupService.prototype.calculatePointerAlign = function (e) {\n        var parentRect = this.getParentRect();\n        return {\n            x: e.clientX - parentRect.left,\n            y: e.clientY - parentRect.top\n        };\n    };\n    PopupService.prototype.positionPopupUnderComponent = function (params) {\n        var sourceRect = params.eventSource.getBoundingClientRect();\n        var alignSide = params.alignSide || 'left';\n        var parentRect = this.getParentRect();\n        var x = sourceRect.left - parentRect.left;\n        if (alignSide === 'right') {\n            x -= (params.ePopup.offsetWidth - sourceRect.width);\n        }\n        this.positionPopup({\n            ePopup: params.ePopup,\n            minWidth: params.minWidth,\n            minHeight: params.minHeight,\n            nudgeX: params.nudgeX,\n            nudgeY: params.nudgeY,\n            x: x,\n            y: sourceRect.top - parentRect.top + sourceRect.height,\n            keepWithinBounds: params.keepWithinBounds\n        });\n        this.callPostProcessPopup(params.type, params.ePopup, params.eventSource, null, params.column, params.rowNode);\n    };\n    PopupService.prototype.positionPopupOverComponent = function (params) {\n        var sourceRect = params.eventSource.getBoundingClientRect();\n        var parentRect = this.getParentRect();\n        this.positionPopup({\n            ePopup: params.ePopup,\n            minWidth: params.minWidth,\n            nudgeX: params.nudgeX,\n            nudgeY: params.nudgeY,\n            x: sourceRect.left - parentRect.left,\n            y: sourceRect.top - parentRect.top,\n            keepWithinBounds: params.keepWithinBounds\n        });\n        this.callPostProcessPopup(params.type, params.ePopup, params.eventSource, null, params.column, params.rowNode);\n    };\n    PopupService.prototype.callPostProcessPopup = function (type, ePopup, eventSource, mouseEvent, column, rowNode) {\n        var callback = this.gridOptionsWrapper.getPostProcessPopupFunc();\n        if (callback) {\n            var params = {\n                column: column,\n                rowNode: rowNode,\n                ePopup: ePopup,\n                type: type,\n                eventSource: eventSource,\n                mouseEvent: mouseEvent\n            };\n            callback(params);\n        }\n    };\n    PopupService.prototype.positionPopup = function (params) {\n        var x = params.x;\n        var y = params.y;\n        if (params.nudgeX) {\n            x += params.nudgeX;\n        }\n        if (params.nudgeY) {\n            y += params.nudgeY;\n        }\n        // if popup is overflowing to the bottom, move it up\n        if (params.keepWithinBounds) {\n            x = this.keepXWithinBounds(params, x);\n            y = this.keepYWithinBounds(params, y);\n        }\n        params.ePopup.style.left = x + \"px\";\n        params.ePopup.style.top = y + \"px\";\n    };\n    PopupService.prototype.getActivePopups = function () {\n        return this.popupList.map(function (popup) { return popup.element; });\n    };\n    PopupService.prototype.getParentRect = function () {\n        // subtract the popup parent borders, because popupParent.getBoundingClientRect\n        // returns the rect outside the borders, but the 0,0 coordinate for absolute\n        // positioning is inside the border, leading the popup to be off by the width\n        // of the border\n        var popupParent = this.getPopupParent();\n        var eDocument = this.gridOptionsWrapper.getDocument();\n        if (popupParent === eDocument.body) {\n            popupParent = eDocument.documentElement;\n        }\n        var style = getComputedStyle(popupParent);\n        var bounds = popupParent.getBoundingClientRect();\n        return {\n            top: bounds.top + parseFloat(style.borderTopWidth) || 0,\n            left: bounds.left + parseFloat(style.borderLeftWidth) || 0,\n            right: bounds.right + parseFloat(style.borderRightWidth) || 0,\n            bottom: bounds.bottom + parseFloat(style.borderBottomWidth) || 0,\n        };\n    };\n    PopupService.prototype.keepYWithinBounds = function (params, y) {\n        var eDocument = this.gridOptionsWrapper.getDocument();\n        var docElement = eDocument.documentElement;\n        var popupParent = this.getPopupParent();\n        var parentRect = popupParent.getBoundingClientRect();\n        var documentRect = eDocument.documentElement.getBoundingClientRect();\n        var isBody = popupParent === eDocument.body;\n        var minHeight = Math.min(200, parentRect.height);\n        var diff = 0;\n        if (params.minHeight && params.minHeight < minHeight) {\n            minHeight = params.minHeight;\n        }\n        else if (params.ePopup.offsetHeight > 0) {\n            minHeight = params.ePopup.clientHeight;\n            diff = _.getAbsoluteHeight(params.ePopup) - minHeight;\n        }\n        var heightOfParent = isBody ? (_.getAbsoluteHeight(docElement) + docElement.scrollTop) : parentRect.height;\n        if (isBody) {\n            heightOfParent -= Math.abs(documentRect.top - parentRect.top);\n        }\n        var maxY = heightOfParent - minHeight - diff;\n        return Math.min(Math.max(y, 0), Math.abs(maxY));\n    };\n    PopupService.prototype.keepXWithinBounds = function (params, x) {\n        var eDocument = this.gridOptionsWrapper.getDocument();\n        var docElement = eDocument.documentElement;\n        var popupParent = this.getPopupParent();\n        var parentRect = popupParent.getBoundingClientRect();\n        var documentRect = eDocument.documentElement.getBoundingClientRect();\n        var isBody = popupParent === eDocument.body;\n        var ePopup = params.ePopup;\n        var minWidth = Math.min(200, parentRect.width);\n        var diff = 0;\n        if (params.minWidth && params.minWidth < minWidth) {\n            minWidth = params.minWidth;\n        }\n        else if (ePopup.offsetWidth > 0) {\n            minWidth = ePopup.offsetWidth;\n            ePopup.style.minWidth = minWidth + \"px\";\n            diff = _.getAbsoluteWidth(ePopup) - minWidth;\n        }\n        var widthOfParent = isBody ? (_.getAbsoluteWidth(docElement) + docElement.scrollLeft) : parentRect.width;\n        if (isBody) {\n            widthOfParent -= Math.abs(documentRect.left - parentRect.left);\n        }\n        var maxX = widthOfParent - minWidth - diff;\n        return Math.min(Math.max(x, 0), Math.abs(maxX));\n    };\n    // adds an element to a div, but also listens to background checking for clicks,\n    // so that when the background is clicked, the child is removed again, giving\n    // a model look to popups.\n    PopupService.prototype.addAsModalPopup = function (eChild, closeOnEsc, closedCallback, click) {\n        return this.addPopup(true, eChild, closeOnEsc, closedCallback, click);\n    };\n    PopupService.prototype.addPopup = function (modal, eChild, closeOnEsc, closedCallback, click, alwaysOnTop) {\n        var _this = this;\n        var eDocument = this.gridOptionsWrapper.getDocument();\n        if (!eDocument) {\n            console.warn('ag-grid: could not find the document, document is empty');\n            return function () { };\n        }\n        var pos = _.findIndex(this.popupList, function (popup) { return popup.element === eChild; });\n        if (pos !== -1) {\n            var popup = this.popupList[pos];\n            return popup.hideFunc;\n        }\n        var ePopupParent = this.getPopupParent();\n        // for angular specifically, but shouldn't cause an issue with js or other fw's\n        // https://github.com/angular/angular/issues/8563\n        ePopupParent.appendChild(eChild);\n        eChild.style.top = '0px';\n        eChild.style.left = '0px';\n        // add env CSS class to child, in case user provided a popup parent, which means\n        // theme class may be missing\n        var eWrapper = document.createElement('div');\n        var theme = this.environment.getTheme().theme;\n        if (theme) {\n            _.addCssClass(eWrapper, theme);\n        }\n        _.addCssClass(eWrapper, 'ag-popup');\n        _.addCssClass(eChild, this.gridOptionsWrapper.isEnableRtl() ? 'ag-rtl' : 'ag-ltr');\n        _.addCssClass(eChild, 'ag-popup-child');\n        eWrapper.appendChild(eChild);\n        ePopupParent.appendChild(eWrapper);\n        if (alwaysOnTop) {\n            this.setAlwaysOnTop(eWrapper, true);\n        }\n        else {\n            this.bringPopupToFront(eWrapper);\n        }\n        var popupHidden = false;\n        var hidePopupOnKeyboardEvent = function (event) {\n            var key = event.which || event.keyCode;\n            if (!eWrapper.contains(document.activeElement)) {\n                return;\n            }\n            switch (key) {\n                case Constants.KEY_ESCAPE:\n                    hidePopup({ keyboardEvent: event });\n            }\n        };\n        var hidePopupOnMouseEvent = function (event) {\n            hidePopup({ mouseEvent: event });\n        };\n        var hidePopupOnTouchEvent = function (event) {\n            hidePopup({ touchEvent: event });\n        };\n        var hidePopup = function (params) {\n            if (params === void 0) { params = {}; }\n            var mouseEvent = params.mouseEvent, touchEvent = params.touchEvent, keyboardEvent = params.keyboardEvent;\n            if (\n            // we don't hide popup if the event was on the child, or any\n            // children of this child\n            _this.isEventFromCurrentPopup({ mouseEvent: mouseEvent, touchEvent: touchEvent }, eChild) ||\n                // if the event to close is actually the open event, then ignore it\n                _this.isEventSameChainAsOriginalEvent({ originalMouseEvent: click, mouseEvent: mouseEvent, touchEvent: touchEvent }) ||\n                // this method should only be called once. the client can have different\n                // paths, each one wanting to close, so this method may be called multiple times.\n                popupHidden) {\n                return;\n            }\n            popupHidden = true;\n            ePopupParent.removeChild(eWrapper);\n            eDocument.removeEventListener('keydown', hidePopupOnKeyboardEvent);\n            eDocument.removeEventListener('mousedown', hidePopupOnMouseEvent);\n            eDocument.removeEventListener('touchstart', hidePopupOnTouchEvent);\n            eDocument.removeEventListener('contextmenu', hidePopupOnMouseEvent);\n            _this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);\n            if (closedCallback) {\n                closedCallback(mouseEvent || touchEvent || keyboardEvent);\n            }\n            _this.popupList = _this.popupList.filter(function (popup) { return popup.element !== eChild; });\n        };\n        // if we add these listeners now, then the current mouse\n        // click will be included, which we don't want\n        window.setTimeout(function () {\n            if (closeOnEsc) {\n                eDocument.addEventListener('keydown', hidePopupOnKeyboardEvent);\n            }\n            if (modal) {\n                eDocument.addEventListener('mousedown', hidePopupOnMouseEvent);\n                _this.eventService.addEventListener(Events.EVENT_DRAG_STARTED, hidePopupOnMouseEvent);\n                eDocument.addEventListener('touchstart', hidePopupOnTouchEvent);\n                eDocument.addEventListener('contextmenu', hidePopupOnMouseEvent);\n            }\n        }, 0);\n        this.popupList.push({\n            element: eChild,\n            hideFunc: hidePopup\n        });\n        return hidePopup;\n    };\n    PopupService.prototype.isEventFromCurrentPopup = function (params, target) {\n        var mouseEvent = params.mouseEvent, touchEvent = params.touchEvent;\n        var event = mouseEvent ? mouseEvent : touchEvent;\n        if (!event) {\n            return false;\n        }\n        var indexOfThisChild = _.findIndex(this.popupList, function (popup) { return popup.element === target; });\n        if (indexOfThisChild === -1) {\n            return false;\n        }\n        for (var i = indexOfThisChild; i < this.popupList.length; i++) {\n            var popup = this.popupList[i];\n            if (_.isElementInEventPath(popup.element, event)) {\n                return true;\n            }\n        }\n        // if the user did not write their own Custom Element to be rendered as popup\n        // and this component has an additional popup element, they should have the\n        // `ag-custom-component-popup` class to be detected as part of the Custom Component\n        return this.isElementWithinCustomPopup(event.target);\n    };\n    PopupService.prototype.isElementWithinCustomPopup = function (el) {\n        if (!this.popupList.length) {\n            return false;\n        }\n        while (el && el !== document.body) {\n            if (el.classList.contains('ag-custom-component-popup') || el.parentElement === null) {\n                return true;\n            }\n            el = el.parentElement;\n        }\n        return false;\n    };\n    // in some browsers, the context menu event can be fired before the click event, which means\n    // the context menu event could open the popup, but then the click event closes it straight away.\n    PopupService.prototype.isEventSameChainAsOriginalEvent = function (params) {\n        var originalMouseEvent = params.originalMouseEvent, mouseEvent = params.mouseEvent, touchEvent = params.touchEvent;\n        // we check the coordinates of the event, to see if it's the same event. there is a 1 / 1000 chance that\n        // the event is a different event, however that is an edge case that is not very relevant (the user clicking\n        // twice on the same location isn't a normal path).\n        // event could be mouse event or touch event.\n        var mouseEventOrTouch = null;\n        if (mouseEvent) {\n            // mouse event can be used direction, it has coordinates\n            mouseEventOrTouch = mouseEvent;\n        }\n        else if (touchEvent) {\n            // touch event doesn't have coordinates, need it's touch object\n            mouseEventOrTouch = touchEvent.touches[0];\n        }\n        if (mouseEventOrTouch && originalMouseEvent) {\n            // for x, allow 4px margin, to cover iPads, where touch (which opens menu) is followed\n            // by browser click (when you finger up, touch is interrupted as click in browser)\n            var screenX_1 = mouseEvent ? mouseEvent.screenX : 0;\n            var screenY_1 = mouseEvent ? mouseEvent.screenY : 0;\n            var xMatch = Math.abs(originalMouseEvent.screenX - screenX_1) < 5;\n            var yMatch = Math.abs(originalMouseEvent.screenY - screenY_1) < 5;\n            if (xMatch && yMatch) {\n                return true;\n            }\n        }\n        return false;\n    };\n    PopupService.prototype.getWrapper = function (ePopup) {\n        while (!_.containsClass(ePopup, 'ag-popup') && ePopup.parentElement) {\n            ePopup = ePopup.parentElement;\n        }\n        return _.containsClass(ePopup, 'ag-popup') ? ePopup : null;\n    };\n    PopupService.prototype.setAlwaysOnTop = function (ePopup, alwaysOnTop) {\n        var eWrapper = this.getWrapper(ePopup);\n        if (!eWrapper) {\n            return;\n        }\n        _.addOrRemoveCssClass(eWrapper, 'ag-always-on-top', !!alwaysOnTop);\n        if (alwaysOnTop) {\n            this.bringPopupToFront(eWrapper);\n        }\n    };\n    PopupService.prototype.bringPopupToFront = function (ePopup) {\n        var parent = this.getPopupParent();\n        var popupList = Array.prototype.slice.call(parent.querySelectorAll('.ag-popup'));\n        var popupLen = popupList.length;\n        var alwaysOnTopList = Array.prototype.slice.call(parent.querySelectorAll('.ag-popup.ag-always-on-top'));\n        var onTopLength = alwaysOnTopList.length;\n        var eWrapper = this.getWrapper(ePopup);\n        if (!eWrapper || popupLen <= 1 || !parent.contains(ePopup)) {\n            return;\n        }\n        var pos = popupList.indexOf(eWrapper);\n        if (onTopLength) {\n            var isPopupAlwaysOnTop = _.containsClass(eWrapper, 'ag-always-on-top');\n            if (isPopupAlwaysOnTop) {\n                if (pos !== popupLen - 1) {\n                    _.last(alwaysOnTopList).insertAdjacentElement('afterend', eWrapper);\n                }\n            }\n            else if (pos !== popupLen - onTopLength - 1) {\n                alwaysOnTopList[0].insertAdjacentElement('beforebegin', eWrapper);\n            }\n        }\n        else if (pos !== popupLen - 1) {\n            _.last(popupList).insertAdjacentElement('afterend', eWrapper);\n        }\n        var params = {\n            type: 'popupToFront',\n            api: this.gridOptionsWrapper.getApi(),\n            columnApi: this.gridOptionsWrapper.getColumnApi(),\n            eWrapper: eWrapper\n        };\n        this.eventService.dispatchEvent(params);\n    };\n    __decorate([\n        Autowired('gridOptionsWrapper')\n    ], PopupService.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate([\n        Autowired('environment')\n    ], PopupService.prototype, \"environment\", void 0);\n    __decorate([\n        PostConstruct\n    ], PopupService.prototype, \"init\", null);\n    PopupService = __decorate([\n        Bean('popupService')\n    ], PopupService);\n    return PopupService;\n}(BeanStub));\nexport { PopupService };\n"]},"metadata":{},"sourceType":"module"}