{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { EventService } from \"../eventService\";\nimport { Events } from \"../events\";\nimport { Autowired } from \"../context/context\";\nimport { Constants } from \"../constants\";\nimport { _ } from \"../utils\";\n\nvar RowNode =\n/** @class */\nfunction () {\n  function RowNode() {\n    /** Children mapped by the pivot columns */\n    this.childrenMapped = {};\n    /** True by default - can be overridden via gridOptions.isRowSelectable(rowNode) */\n\n    this.selectable = true;\n    /** Used by sorting service - to give deterministic sort to groups. Previously we\n     * just id for this, however id is a string and had slower sorting compared to numbers. */\n\n    this.__objectId = RowNode.OBJECT_ID_SEQUENCE++;\n    /** True when nodes with the same id are being removed and added as part of the same batch transaction */\n\n    this.alreadyRendered = false;\n    this.highlighted = null;\n    this.selected = false;\n  }\n\n  RowNode.prototype.setData = function (data) {\n    var oldData = this.data;\n    this.data = data;\n    this.valueCache.onDataChanged();\n    this.updateDataOnDetailNode();\n    this.checkRowSelectable();\n    var event = this.createDataChangedEvent(data, oldData, false);\n    this.dispatchLocalEvent(event);\n  }; // when we are doing master / detail, the detail node is lazy created, but then kept around.\n  // so if we show / hide the detail, the same detail rowNode is used. so we need to keep the data\n  // in sync, otherwise expand/collapse of the detail would still show the old values.\n\n\n  RowNode.prototype.updateDataOnDetailNode = function () {\n    if (this.detailNode) {\n      this.detailNode.data = this.data;\n    }\n  };\n\n  RowNode.prototype.createDataChangedEvent = function (newData, oldData, update) {\n    return {\n      type: RowNode.EVENT_DATA_CHANGED,\n      node: this,\n      oldData: oldData,\n      newData: newData,\n      update: update\n    };\n  };\n\n  RowNode.prototype.createLocalRowEvent = function (type) {\n    return {\n      type: type,\n      node: this\n    };\n  }; // similar to setRowData, however it is expected that the data is the same data item. this\n  // is intended to be used with Redux type stores, where the whole data can be changed. we are\n  // guaranteed that the data is the same entity (so grid doesn't need to worry about the id of the\n  // underlying data changing, hence doesn't need to worry about selection). the grid, upon receiving\n  // dataChanged event, will refresh the cells rather than rip them all out (so user can show transitions).\n\n\n  RowNode.prototype.updateData = function (data) {\n    var oldData = this.data;\n    this.data = data;\n    this.updateDataOnDetailNode();\n    this.checkRowSelectable();\n    this.updateDataOnDetailNode();\n    var event = this.createDataChangedEvent(data, oldData, true);\n    this.dispatchLocalEvent(event);\n  };\n\n  RowNode.prototype.getRowIndexString = function () {\n    if (this.rowPinned === Constants.PINNED_TOP) {\n      return 't-' + this.rowIndex;\n    } else if (this.rowPinned === Constants.PINNED_BOTTOM) {\n      return 'b-' + this.rowIndex;\n    }\n\n    return this.rowIndex.toString();\n  };\n\n  RowNode.prototype.createDaemonNode = function () {\n    var oldNode = new RowNode();\n    this.context.createBean(oldNode); // just copy the id and data, this is enough for the node to be used\n    // in the selection controller (the selection controller is the only\n    // place where daemon nodes can live).\n\n    oldNode.id = this.id;\n    oldNode.data = this.data;\n    oldNode.daemon = true;\n    oldNode.selected = this.selected;\n    oldNode.level = this.level;\n    return oldNode;\n  };\n\n  RowNode.prototype.setDataAndId = function (data, id) {\n    var oldNode = _.exists(this.id) ? this.createDaemonNode() : null;\n    var oldData = this.data;\n    this.data = data;\n    this.updateDataOnDetailNode();\n    this.setId(id);\n    this.selectionController.syncInRowNode(this, oldNode);\n    this.checkRowSelectable();\n    var event = this.createDataChangedEvent(data, oldData, false);\n    this.dispatchLocalEvent(event);\n  };\n\n  RowNode.prototype.checkRowSelectable = function () {\n    var isRowSelectableFunc = this.gridOptionsWrapper.getIsRowSelectableFunc();\n\n    var shouldInvokeIsRowSelectable = isRowSelectableFunc && _.exists(this);\n\n    this.setRowSelectable(shouldInvokeIsRowSelectable ? isRowSelectableFunc(this) : true);\n  };\n\n  RowNode.prototype.setRowSelectable = function (newVal) {\n    if (this.selectable !== newVal) {\n      this.selectable = newVal;\n\n      if (this.eventService) {\n        this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_SELECTABLE_CHANGED));\n      }\n    }\n  };\n\n  RowNode.prototype.setId = function (id) {\n    // see if user is providing the id's\n    var getRowNodeId = this.gridOptionsWrapper.getRowNodeIdFunc();\n\n    if (getRowNodeId) {\n      // if user is providing the id's, then we set the id only after the data has been set.\n      // this is important for virtual pagination and viewport, where empty rows exist.\n      if (this.data) {\n        this.id = getRowNodeId(this.data); // make sure id provided doesn't start with 'row-group-' as this is reserved. also check that\n        // it has 'startsWith' in case the user provided a number.\n\n        if (this.id && this.id.startsWith && this.id.startsWith(RowNode.ID_PREFIX_ROW_GROUP)) {\n          console.error(\"ag-Grid: Row ID's cannot start with \" + RowNode.ID_PREFIX_ROW_GROUP + \", this is a reserved prefix for ag-Grid's row grouping feature.\");\n        }\n      } else {\n        // this can happen if user has set blank into the rowNode after the row previously\n        // having data. this happens in virtual page row model, when data is delete and\n        // the page is refreshed.\n        this.id = undefined;\n      }\n    } else {\n      this.id = id;\n    }\n  };\n\n  RowNode.prototype.isPixelInRange = function (pixel) {\n    return pixel >= this.rowTop && pixel < this.rowTop + this.rowHeight;\n  };\n\n  RowNode.prototype.clearRowTop = function () {\n    this.oldRowTop = this.rowTop;\n    this.setRowTop(null);\n  };\n\n  RowNode.prototype.setFirstChild = function (firstChild) {\n    if (this.firstChild === firstChild) {\n      return;\n    }\n\n    this.firstChild = firstChild;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_FIRST_CHILD_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setLastChild = function (lastChild) {\n    if (this.lastChild === lastChild) {\n      return;\n    }\n\n    this.lastChild = lastChild;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_LAST_CHILD_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setChildIndex = function (childIndex) {\n    if (this.childIndex === childIndex) {\n      return;\n    }\n\n    this.childIndex = childIndex;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_CHILD_INDEX_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setRowTop = function (rowTop) {\n    if (this.rowTop === rowTop) {\n      return;\n    }\n\n    this.rowTop = rowTop;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_TOP_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setDragging = function (dragging) {\n    if (this.dragging === dragging) {\n      return;\n    }\n\n    this.dragging = dragging;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_DRAGGING_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setHighlighted = function (highlighted) {\n    if (highlighted === this.highlighted) {\n      return;\n    }\n\n    this.highlighted = highlighted;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HIGHLIGHT_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setAllChildrenCount = function (allChildrenCount) {\n    if (this.allChildrenCount === allChildrenCount) {\n      return;\n    }\n\n    this.allChildrenCount = allChildrenCount;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setMaster = function (master) {\n    if (this.master === master) {\n      return;\n    } // if changing AWAY from master, then unexpand, otherwise\n    // next time it's shown it is expanded again\n\n\n    if (this.master && !master) {\n      this.expanded = false;\n    }\n\n    this.master = master;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_MASTER_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setRowHeight = function (rowHeight, estimated) {\n    if (estimated === void 0) {\n      estimated = false;\n    }\n\n    this.rowHeight = rowHeight;\n    this.rowHeightEstimated = estimated;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HEIGHT_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setRowIndex = function (rowIndex) {\n    this.rowIndex = rowIndex;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_INDEX_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setUiLevel = function (uiLevel) {\n    if (this.uiLevel === uiLevel) {\n      return;\n    }\n\n    this.uiLevel = uiLevel;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_UI_LEVEL_CHANGED));\n    }\n  };\n\n  RowNode.prototype.setExpanded = function (expanded) {\n    if (this.expanded === expanded) {\n      return;\n    }\n\n    this.expanded = expanded;\n\n    if (this.eventService) {\n      this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_EXPANDED_CHANGED));\n    }\n\n    var event = _.assign({}, this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED), {\n      expanded: expanded\n    });\n\n    this.mainEventService.dispatchEvent(event);\n\n    if (this.gridOptionsWrapper.isGroupIncludeFooter()) {\n      this.gridApi.redrawRows({\n        rowNodes: [this]\n      });\n    }\n  };\n\n  RowNode.prototype.createGlobalRowEvent = function (type) {\n    return {\n      type: type,\n      node: this,\n      data: this.data,\n      rowIndex: this.rowIndex,\n      rowPinned: this.rowPinned,\n      context: this.gridOptionsWrapper.getContext(),\n      api: this.gridOptionsWrapper.getApi(),\n      columnApi: this.gridOptionsWrapper.getColumnApi()\n    };\n  };\n\n  RowNode.prototype.dispatchLocalEvent = function (event) {\n    if (this.eventService) {\n      this.eventService.dispatchEvent(event);\n    }\n  }; // we also allow editing the value via the editors. when it is done via\n  // the editors, no 'cell changed' event gets fired, as it's assumed that\n  // the cell knows about the change given it's in charge of the editing.\n  // this method is for the client to call, so the cell listens for the change\n  // event, and also flashes the cell when the change occurs.\n\n\n  RowNode.prototype.setDataValue = function (colKey, newValue) {\n    var column = this.columnController.getPrimaryColumn(colKey);\n    var oldValue = this.valueService.getValue(column, this);\n    this.valueService.setValue(this, column, newValue);\n    this.dispatchCellChangedEvent(column, newValue, oldValue);\n  };\n\n  RowNode.prototype.setGroupValue = function (colKey, newValue) {\n    var column = this.columnController.getGridColumn(colKey);\n\n    if (_.missing(this.groupData)) {\n      this.groupData = {};\n    }\n\n    var columnId = column.getColId();\n    var oldValue = this.groupData[columnId];\n\n    if (oldValue === newValue) {\n      return;\n    }\n\n    this.groupData[columnId] = newValue;\n    this.dispatchCellChangedEvent(column, newValue, oldValue);\n  }; // sets the data for an aggregation\n\n\n  RowNode.prototype.setAggData = function (newAggData) {\n    var _this = this; // find out all keys that could potentially change\n\n\n    var colIds = _.getAllKeysInObjects([this.aggData, newAggData]);\n\n    var oldAggData = this.aggData;\n    this.aggData = newAggData; // if no event service, nobody has registered for events, so no need fire event\n\n    if (this.eventService) {\n      colIds.forEach(function (colId) {\n        var column = _this.columnController.getGridColumn(colId);\n\n        var value = _this.aggData ? _this.aggData[colId] : undefined;\n        var oldValue = oldAggData ? oldAggData[colId] : undefined;\n\n        _this.dispatchCellChangedEvent(column, value, oldValue);\n      });\n    }\n  };\n\n  RowNode.prototype.hasChildren = function () {\n    // we need to return true when this.group=true, as this is used by server side row model\n    // (as children are lazy loaded and stored in a cache anyway). otherwise we return true\n    // if children exist.\n    return this.group || this.childrenAfterGroup && this.childrenAfterGroup.length > 0;\n  };\n\n  RowNode.prototype.isEmptyRowGroupNode = function () {\n    return this.group && _.missingOrEmpty(this.childrenAfterGroup);\n  };\n\n  RowNode.prototype.dispatchCellChangedEvent = function (column, newValue, oldValue) {\n    var cellChangedEvent = {\n      type: RowNode.EVENT_CELL_CHANGED,\n      node: this,\n      column: column,\n      newValue: newValue,\n      oldValue: oldValue\n    };\n    this.dispatchLocalEvent(cellChangedEvent);\n  };\n\n  RowNode.prototype.resetQuickFilterAggregateText = function () {\n    this.quickFilterAggregateText = null;\n  };\n\n  RowNode.prototype.isExpandable = function () {\n    return this.hasChildren() || this.master;\n  };\n\n  RowNode.prototype.isSelected = function () {\n    // for footers, we just return what our sibling selected state is, as cannot select a footer\n    if (this.footer) {\n      return this.sibling.isSelected();\n    }\n\n    return this.selected;\n  };\n\n  RowNode.prototype.depthFirstSearch = function (callback) {\n    if (this.childrenAfterGroup) {\n      this.childrenAfterGroup.forEach(function (child) {\n        return child.depthFirstSearch(callback);\n      });\n    }\n\n    callback(this);\n  }; // + rowController.updateGroupsInSelection()\n  // + selectionController.calculatedSelectedForAllGroupNodes()\n\n\n  RowNode.prototype.calculateSelectedFromChildren = function () {\n    var atLeastOneSelected = false;\n    var atLeastOneDeSelected = false;\n    var atLeastOneMixed = false;\n    var newSelectedValue;\n\n    if (this.childrenAfterGroup) {\n      for (var i = 0; i < this.childrenAfterGroup.length; i++) {\n        var child = this.childrenAfterGroup[i]; // skip non-selectable nodes to prevent inconsistent selection values\n\n        if (!child.selectable) {\n          continue;\n        }\n\n        var childState = child.isSelected();\n\n        switch (childState) {\n          case true:\n            atLeastOneSelected = true;\n            break;\n\n          case false:\n            atLeastOneDeSelected = true;\n            break;\n\n          default:\n            atLeastOneMixed = true;\n            break;\n        }\n      }\n    }\n\n    if (atLeastOneMixed) {\n      newSelectedValue = undefined;\n    } else if (atLeastOneSelected && !atLeastOneDeSelected) {\n      newSelectedValue = true;\n    } else if (!atLeastOneSelected && atLeastOneDeSelected) {\n      newSelectedValue = false;\n    } else {\n      newSelectedValue = undefined;\n    }\n\n    this.selectThisNode(newSelectedValue);\n  };\n\n  RowNode.prototype.setSelectedInitialValue = function (selected) {\n    this.selected = selected;\n  };\n\n  RowNode.prototype.setSelected = function (newValue, clearSelection, suppressFinishActions) {\n    if (clearSelection === void 0) {\n      clearSelection = false;\n    }\n\n    if (suppressFinishActions === void 0) {\n      suppressFinishActions = false;\n    }\n\n    this.setSelectedParams({\n      newValue: newValue,\n      clearSelection: clearSelection,\n      suppressFinishActions: suppressFinishActions,\n      rangeSelect: false\n    });\n  };\n\n  RowNode.prototype.isRowPinned = function () {\n    return this.rowPinned === Constants.PINNED_TOP || this.rowPinned === Constants.PINNED_BOTTOM;\n  }; // to make calling code more readable, this is the same method as setSelected except it takes names parameters\n\n\n  RowNode.prototype.setSelectedParams = function (params) {\n    var groupSelectsChildren = this.gridOptionsWrapper.isGroupSelectsChildren();\n    var newValue = params.newValue === true;\n    var clearSelection = params.clearSelection === true;\n    var suppressFinishActions = params.suppressFinishActions === true;\n    var rangeSelect = params.rangeSelect === true; // groupSelectsFiltered only makes sense when group selects children\n\n    var groupSelectsFiltered = groupSelectsChildren && params.groupSelectsFiltered === true;\n\n    if (this.id === undefined) {\n      console.warn('ag-Grid: cannot select node until id for node is known');\n      return 0;\n    }\n\n    if (this.rowPinned) {\n      console.warn('ag-Grid: cannot select pinned rows');\n      return 0;\n    } // if we are a footer, we don't do selection, just pass the info\n    // to the sibling (the parent of the group)\n\n\n    if (this.footer) {\n      var count = this.sibling.setSelectedParams(params);\n      return count;\n    }\n\n    if (rangeSelect) {\n      var newRowClicked = this.selectionController.getLastSelectedNode() !== this;\n      var allowMultiSelect = this.gridOptionsWrapper.isRowSelectionMulti();\n\n      if (newRowClicked && allowMultiSelect) {\n        return this.doRowRangeSelection();\n      }\n    }\n\n    var updatedCount = 0; // when groupSelectsFiltered, then this node may end up intermediate despite\n    // trying to set it to true / false. this group will be calculated further on\n    // down when we call calculatedSelectedForAllGroupNodes(). we need to skip it\n    // here, otherwise the updatedCount would include it.\n\n    var skipThisNode = groupSelectsFiltered && this.group;\n\n    if (!skipThisNode) {\n      var thisNodeWasSelected = this.selectThisNode(newValue);\n\n      if (thisNodeWasSelected) {\n        updatedCount++;\n      }\n    }\n\n    if (groupSelectsChildren && this.group) {\n      updatedCount += this.selectChildNodes(newValue, groupSelectsFiltered);\n    } // clear other nodes if not doing multi select\n\n\n    if (!suppressFinishActions) {\n      var clearOtherNodes = newValue && (clearSelection || !this.gridOptionsWrapper.isRowSelectionMulti());\n\n      if (clearOtherNodes) {\n        updatedCount += this.selectionController.clearOtherNodes(this);\n      } // only if we selected something, then update groups and fire events\n\n\n      if (updatedCount > 0) {\n        this.selectionController.updateGroupsFromChildrenSelections(); // this is the very end of the 'action node', so we are finished all the updates,\n        // include any parent / child changes that this method caused\n\n        var event_1 = {\n          type: Events.EVENT_SELECTION_CHANGED,\n          api: this.gridApi,\n          columnApi: this.columnApi\n        };\n        this.mainEventService.dispatchEvent(event_1);\n      } // so if user next does shift-select, we know where to start the selection from\n\n\n      if (newValue) {\n        this.selectionController.setLastSelectedNode(this);\n      }\n    }\n\n    return updatedCount;\n  }; // selects all rows between this node and the last selected node (or the top if this is the first selection).\n  // not to be mixed up with 'cell range selection' where you drag the mouse, this is row range selection, by\n  // holding down 'shift'.\n\n\n  RowNode.prototype.doRowRangeSelection = function () {\n    var groupsSelectChildren = this.gridOptionsWrapper.isGroupSelectsChildren();\n    var lastSelectedNode = this.selectionController.getLastSelectedNode();\n    var nodesToSelect = this.rowModel.getNodesInRangeForSelection(this, lastSelectedNode);\n    var updatedCount = 0;\n    nodesToSelect.forEach(function (rowNode) {\n      if (rowNode.group && groupsSelectChildren) {\n        return;\n      }\n\n      var nodeWasSelected = rowNode.selectThisNode(true);\n\n      if (nodeWasSelected) {\n        updatedCount++;\n      }\n    });\n    this.selectionController.updateGroupsFromChildrenSelections();\n    var event = {\n      type: Events.EVENT_SELECTION_CHANGED,\n      api: this.gridApi,\n      columnApi: this.columnApi\n    };\n    this.mainEventService.dispatchEvent(event);\n    return updatedCount;\n  };\n\n  RowNode.prototype.isParentOfNode = function (potentialParent) {\n    var parentNode = this.parent;\n\n    while (parentNode) {\n      if (parentNode === potentialParent) {\n        return true;\n      }\n\n      parentNode = parentNode.parent;\n    }\n\n    return false;\n  };\n\n  RowNode.prototype.selectThisNode = function (newValue) {\n    // we only check selectable when newValue=true (ie selecting) to allow unselecting values,\n    // as selectable is dynamic, need a way to unselect rows when selectable becomes false.\n    var selectionNotAllowed = !this.selectable && newValue;\n    var selectionNotChanged = this.selected === newValue;\n\n    if (selectionNotAllowed || selectionNotChanged) {\n      return false;\n    }\n\n    this.selected = newValue;\n\n    if (this.eventService) {\n      this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_SELECTED));\n    }\n\n    var event = this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED);\n    this.mainEventService.dispatchEvent(event);\n    return true;\n  };\n\n  RowNode.prototype.selectChildNodes = function (newValue, groupSelectsFiltered) {\n    var children = groupSelectsFiltered ? this.childrenAfterFilter : this.childrenAfterGroup;\n\n    if (_.missing(children)) {\n      return;\n    }\n\n    var updatedCount = 0;\n\n    for (var i = 0; i < children.length; i++) {\n      updatedCount += children[i].setSelectedParams({\n        newValue: newValue,\n        clearSelection: false,\n        suppressFinishActions: true,\n        groupSelectsFiltered: groupSelectsFiltered\n      });\n    }\n\n    return updatedCount;\n  };\n\n  RowNode.prototype.addEventListener = function (eventType, listener) {\n    if (!this.eventService) {\n      this.eventService = new EventService();\n    }\n\n    this.eventService.addEventListener(eventType, listener);\n  };\n\n  RowNode.prototype.removeEventListener = function (eventType, listener) {\n    this.eventService.removeEventListener(eventType, listener);\n  };\n\n  RowNode.prototype.onMouseEnter = function () {\n    this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_ENTER));\n  };\n\n  RowNode.prototype.onMouseLeave = function () {\n    this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_LEAVE));\n  };\n\n  RowNode.prototype.getFirstChildOfFirstChild = function (rowGroupColumn) {\n    var currentRowNode = this;\n    var isCandidate = true;\n    var foundFirstChildPath = false;\n    var nodeToSwapIn; // if we are hiding groups, then if we are the first child, of the first child,\n    // all the way up to the column we are interested in, then we show the group cell.\n\n    while (isCandidate && !foundFirstChildPath) {\n      var parentRowNode = currentRowNode.parent;\n      var firstChild = _.exists(parentRowNode) && currentRowNode.firstChild;\n\n      if (firstChild) {\n        if (parentRowNode.rowGroupColumn === rowGroupColumn) {\n          foundFirstChildPath = true;\n          nodeToSwapIn = parentRowNode;\n        }\n      } else {\n        isCandidate = false;\n      }\n\n      currentRowNode = parentRowNode;\n    }\n\n    return foundFirstChildPath ? nodeToSwapIn : null;\n  };\n\n  RowNode.prototype.isFullWidthCell = function () {\n    var isFullWidthCellFunc = this.gridOptionsWrapper.getIsFullWidthCellFunc();\n    return isFullWidthCellFunc ? isFullWidthCellFunc(this) : false;\n  };\n\n  RowNode.ID_PREFIX_ROW_GROUP = 'row-group-';\n  RowNode.ID_PREFIX_TOP_PINNED = 't-';\n  RowNode.ID_PREFIX_BOTTOM_PINNED = 'b-';\n  RowNode.OBJECT_ID_SEQUENCE = 0;\n  RowNode.EVENT_ROW_SELECTED = 'rowSelected';\n  RowNode.EVENT_DATA_CHANGED = 'dataChanged';\n  RowNode.EVENT_CELL_CHANGED = 'cellChanged';\n  RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED = 'allChildrenCountChanged';\n  RowNode.EVENT_MASTER_CHANGED = 'masterChanged';\n  RowNode.EVENT_MOUSE_ENTER = 'mouseEnter';\n  RowNode.EVENT_MOUSE_LEAVE = 'mouseLeave';\n  RowNode.EVENT_HEIGHT_CHANGED = 'heightChanged';\n  RowNode.EVENT_TOP_CHANGED = 'topChanged';\n  RowNode.EVENT_FIRST_CHILD_CHANGED = 'firstChildChanged';\n  RowNode.EVENT_LAST_CHILD_CHANGED = 'lastChildChanged';\n  RowNode.EVENT_CHILD_INDEX_CHANGED = 'childIndexChanged';\n  RowNode.EVENT_ROW_INDEX_CHANGED = 'rowIndexChanged';\n  RowNode.EVENT_EXPANDED_CHANGED = 'expandedChanged';\n  RowNode.EVENT_SELECTABLE_CHANGED = 'selectableChanged';\n  RowNode.EVENT_UI_LEVEL_CHANGED = 'uiLevelChanged';\n  RowNode.EVENT_HIGHLIGHT_CHANGED = 'rowHighlightChanged';\n  RowNode.EVENT_DRAGGING_CHANGED = 'draggingChanged';\n\n  __decorate([Autowired('eventService')], RowNode.prototype, \"mainEventService\", void 0);\n\n  __decorate([Autowired('gridOptionsWrapper')], RowNode.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([Autowired('selectionController')], RowNode.prototype, \"selectionController\", void 0);\n\n  __decorate([Autowired('columnController')], RowNode.prototype, \"columnController\", void 0);\n\n  __decorate([Autowired('valueService')], RowNode.prototype, \"valueService\", void 0);\n\n  __decorate([Autowired('rowModel')], RowNode.prototype, \"rowModel\", void 0);\n\n  __decorate([Autowired('context')], RowNode.prototype, \"context\", void 0);\n\n  __decorate([Autowired('valueCache')], RowNode.prototype, \"valueCache\", void 0);\n\n  __decorate([Autowired('columnApi')], RowNode.prototype, \"columnApi\", void 0);\n\n  __decorate([Autowired('gridApi')], RowNode.prototype, \"gridApi\", void 0);\n\n  return RowNode;\n}();\n\nexport { RowNode };","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/@ag-grid-community/core/dist/es6/entities/rowNode.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","EventService","Events","Autowired","Constants","_","RowNode","childrenMapped","selectable","__objectId","OBJECT_ID_SEQUENCE","alreadyRendered","highlighted","selected","prototype","setData","data","oldData","valueCache","onDataChanged","updateDataOnDetailNode","checkRowSelectable","event","createDataChangedEvent","dispatchLocalEvent","detailNode","newData","update","type","EVENT_DATA_CHANGED","node","createLocalRowEvent","updateData","getRowIndexString","rowPinned","PINNED_TOP","rowIndex","PINNED_BOTTOM","toString","createDaemonNode","oldNode","context","createBean","id","daemon","level","setDataAndId","exists","setId","selectionController","syncInRowNode","isRowSelectableFunc","gridOptionsWrapper","getIsRowSelectableFunc","shouldInvokeIsRowSelectable","setRowSelectable","newVal","eventService","dispatchEvent","EVENT_SELECTABLE_CHANGED","getRowNodeId","getRowNodeIdFunc","startsWith","ID_PREFIX_ROW_GROUP","console","error","undefined","isPixelInRange","pixel","rowTop","rowHeight","clearRowTop","oldRowTop","setRowTop","setFirstChild","firstChild","EVENT_FIRST_CHILD_CHANGED","setLastChild","lastChild","EVENT_LAST_CHILD_CHANGED","setChildIndex","childIndex","EVENT_CHILD_INDEX_CHANGED","EVENT_TOP_CHANGED","setDragging","dragging","EVENT_DRAGGING_CHANGED","setHighlighted","EVENT_HIGHLIGHT_CHANGED","setAllChildrenCount","allChildrenCount","EVENT_ALL_CHILDREN_COUNT_CHANGED","setMaster","master","expanded","EVENT_MASTER_CHANGED","setRowHeight","estimated","rowHeightEstimated","EVENT_HEIGHT_CHANGED","setRowIndex","EVENT_ROW_INDEX_CHANGED","setUiLevel","uiLevel","EVENT_UI_LEVEL_CHANGED","setExpanded","EVENT_EXPANDED_CHANGED","assign","createGlobalRowEvent","EVENT_ROW_GROUP_OPENED","mainEventService","isGroupIncludeFooter","gridApi","redrawRows","rowNodes","getContext","api","getApi","columnApi","getColumnApi","setDataValue","colKey","newValue","column","columnController","getPrimaryColumn","oldValue","valueService","getValue","setValue","dispatchCellChangedEvent","setGroupValue","getGridColumn","missing","groupData","columnId","getColId","setAggData","newAggData","_this","colIds","getAllKeysInObjects","aggData","oldAggData","forEach","colId","value","hasChildren","group","childrenAfterGroup","isEmptyRowGroupNode","missingOrEmpty","cellChangedEvent","EVENT_CELL_CHANGED","resetQuickFilterAggregateText","quickFilterAggregateText","isExpandable","isSelected","footer","sibling","depthFirstSearch","callback","child","calculateSelectedFromChildren","atLeastOneSelected","atLeastOneDeSelected","atLeastOneMixed","newSelectedValue","childState","selectThisNode","setSelectedInitialValue","setSelected","clearSelection","suppressFinishActions","setSelectedParams","rangeSelect","isRowPinned","params","groupSelectsChildren","isGroupSelectsChildren","groupSelectsFiltered","warn","count","newRowClicked","getLastSelectedNode","allowMultiSelect","isRowSelectionMulti","doRowRangeSelection","updatedCount","skipThisNode","thisNodeWasSelected","selectChildNodes","clearOtherNodes","updateGroupsFromChildrenSelections","event_1","EVENT_SELECTION_CHANGED","setLastSelectedNode","groupsSelectChildren","lastSelectedNode","nodesToSelect","rowModel","getNodesInRangeForSelection","rowNode","nodeWasSelected","isParentOfNode","potentialParent","parentNode","parent","selectionNotAllowed","selectionNotChanged","EVENT_ROW_SELECTED","children","childrenAfterFilter","addEventListener","eventType","listener","removeEventListener","onMouseEnter","EVENT_MOUSE_ENTER","onMouseLeave","EVENT_MOUSE_LEAVE","getFirstChildOfFirstChild","rowGroupColumn","currentRowNode","isCandidate","foundFirstChildPath","nodeToSwapIn","parentRowNode","isFullWidthCell","isFullWidthCellFunc","getIsFullWidthCellFunc","ID_PREFIX_TOP_PINNED","ID_PREFIX_BOTTOM_PINNED"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { EventService } from \"../eventService\";\nimport { Events } from \"../events\";\nimport { Autowired } from \"../context/context\";\nimport { Constants } from \"../constants\";\nimport { _ } from \"../utils\";\nvar RowNode = /** @class */ (function () {\n    function RowNode() {\n        /** Children mapped by the pivot columns */\n        this.childrenMapped = {};\n        /** True by default - can be overridden via gridOptions.isRowSelectable(rowNode) */\n        this.selectable = true;\n        /** Used by sorting service - to give deterministic sort to groups. Previously we\n         * just id for this, however id is a string and had slower sorting compared to numbers. */\n        this.__objectId = RowNode.OBJECT_ID_SEQUENCE++;\n        /** True when nodes with the same id are being removed and added as part of the same batch transaction */\n        this.alreadyRendered = false;\n        this.highlighted = null;\n        this.selected = false;\n    }\n    RowNode.prototype.setData = function (data) {\n        var oldData = this.data;\n        this.data = data;\n        this.valueCache.onDataChanged();\n        this.updateDataOnDetailNode();\n        this.checkRowSelectable();\n        var event = this.createDataChangedEvent(data, oldData, false);\n        this.dispatchLocalEvent(event);\n    };\n    // when we are doing master / detail, the detail node is lazy created, but then kept around.\n    // so if we show / hide the detail, the same detail rowNode is used. so we need to keep the data\n    // in sync, otherwise expand/collapse of the detail would still show the old values.\n    RowNode.prototype.updateDataOnDetailNode = function () {\n        if (this.detailNode) {\n            this.detailNode.data = this.data;\n        }\n    };\n    RowNode.prototype.createDataChangedEvent = function (newData, oldData, update) {\n        return {\n            type: RowNode.EVENT_DATA_CHANGED,\n            node: this,\n            oldData: oldData,\n            newData: newData,\n            update: update\n        };\n    };\n    RowNode.prototype.createLocalRowEvent = function (type) {\n        return {\n            type: type,\n            node: this\n        };\n    };\n    // similar to setRowData, however it is expected that the data is the same data item. this\n    // is intended to be used with Redux type stores, where the whole data can be changed. we are\n    // guaranteed that the data is the same entity (so grid doesn't need to worry about the id of the\n    // underlying data changing, hence doesn't need to worry about selection). the grid, upon receiving\n    // dataChanged event, will refresh the cells rather than rip them all out (so user can show transitions).\n    RowNode.prototype.updateData = function (data) {\n        var oldData = this.data;\n        this.data = data;\n        this.updateDataOnDetailNode();\n        this.checkRowSelectable();\n        this.updateDataOnDetailNode();\n        var event = this.createDataChangedEvent(data, oldData, true);\n        this.dispatchLocalEvent(event);\n    };\n    RowNode.prototype.getRowIndexString = function () {\n        if (this.rowPinned === Constants.PINNED_TOP) {\n            return 't-' + this.rowIndex;\n        }\n        else if (this.rowPinned === Constants.PINNED_BOTTOM) {\n            return 'b-' + this.rowIndex;\n        }\n        return this.rowIndex.toString();\n    };\n    RowNode.prototype.createDaemonNode = function () {\n        var oldNode = new RowNode();\n        this.context.createBean(oldNode);\n        // just copy the id and data, this is enough for the node to be used\n        // in the selection controller (the selection controller is the only\n        // place where daemon nodes can live).\n        oldNode.id = this.id;\n        oldNode.data = this.data;\n        oldNode.daemon = true;\n        oldNode.selected = this.selected;\n        oldNode.level = this.level;\n        return oldNode;\n    };\n    RowNode.prototype.setDataAndId = function (data, id) {\n        var oldNode = _.exists(this.id) ? this.createDaemonNode() : null;\n        var oldData = this.data;\n        this.data = data;\n        this.updateDataOnDetailNode();\n        this.setId(id);\n        this.selectionController.syncInRowNode(this, oldNode);\n        this.checkRowSelectable();\n        var event = this.createDataChangedEvent(data, oldData, false);\n        this.dispatchLocalEvent(event);\n    };\n    RowNode.prototype.checkRowSelectable = function () {\n        var isRowSelectableFunc = this.gridOptionsWrapper.getIsRowSelectableFunc();\n        var shouldInvokeIsRowSelectable = isRowSelectableFunc && _.exists(this);\n        this.setRowSelectable(shouldInvokeIsRowSelectable ? isRowSelectableFunc(this) : true);\n    };\n    RowNode.prototype.setRowSelectable = function (newVal) {\n        if (this.selectable !== newVal) {\n            this.selectable = newVal;\n            if (this.eventService) {\n                this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_SELECTABLE_CHANGED));\n            }\n        }\n    };\n    RowNode.prototype.setId = function (id) {\n        // see if user is providing the id's\n        var getRowNodeId = this.gridOptionsWrapper.getRowNodeIdFunc();\n        if (getRowNodeId) {\n            // if user is providing the id's, then we set the id only after the data has been set.\n            // this is important for virtual pagination and viewport, where empty rows exist.\n            if (this.data) {\n                this.id = getRowNodeId(this.data);\n                // make sure id provided doesn't start with 'row-group-' as this is reserved. also check that\n                // it has 'startsWith' in case the user provided a number.\n                if (this.id && this.id.startsWith && this.id.startsWith(RowNode.ID_PREFIX_ROW_GROUP)) {\n                    console.error(\"ag-Grid: Row ID's cannot start with \" + RowNode.ID_PREFIX_ROW_GROUP + \", this is a reserved prefix for ag-Grid's row grouping feature.\");\n                }\n            }\n            else {\n                // this can happen if user has set blank into the rowNode after the row previously\n                // having data. this happens in virtual page row model, when data is delete and\n                // the page is refreshed.\n                this.id = undefined;\n            }\n        }\n        else {\n            this.id = id;\n        }\n    };\n    RowNode.prototype.isPixelInRange = function (pixel) {\n        return pixel >= this.rowTop && pixel < (this.rowTop + this.rowHeight);\n    };\n    RowNode.prototype.clearRowTop = function () {\n        this.oldRowTop = this.rowTop;\n        this.setRowTop(null);\n    };\n    RowNode.prototype.setFirstChild = function (firstChild) {\n        if (this.firstChild === firstChild) {\n            return;\n        }\n        this.firstChild = firstChild;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_FIRST_CHILD_CHANGED));\n        }\n    };\n    RowNode.prototype.setLastChild = function (lastChild) {\n        if (this.lastChild === lastChild) {\n            return;\n        }\n        this.lastChild = lastChild;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_LAST_CHILD_CHANGED));\n        }\n    };\n    RowNode.prototype.setChildIndex = function (childIndex) {\n        if (this.childIndex === childIndex) {\n            return;\n        }\n        this.childIndex = childIndex;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_CHILD_INDEX_CHANGED));\n        }\n    };\n    RowNode.prototype.setRowTop = function (rowTop) {\n        if (this.rowTop === rowTop) {\n            return;\n        }\n        this.rowTop = rowTop;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_TOP_CHANGED));\n        }\n    };\n    RowNode.prototype.setDragging = function (dragging) {\n        if (this.dragging === dragging) {\n            return;\n        }\n        this.dragging = dragging;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_DRAGGING_CHANGED));\n        }\n    };\n    RowNode.prototype.setHighlighted = function (highlighted) {\n        if (highlighted === this.highlighted) {\n            return;\n        }\n        this.highlighted = highlighted;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HIGHLIGHT_CHANGED));\n        }\n    };\n    RowNode.prototype.setAllChildrenCount = function (allChildrenCount) {\n        if (this.allChildrenCount === allChildrenCount) {\n            return;\n        }\n        this.allChildrenCount = allChildrenCount;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED));\n        }\n    };\n    RowNode.prototype.setMaster = function (master) {\n        if (this.master === master) {\n            return;\n        }\n        // if changing AWAY from master, then unexpand, otherwise\n        // next time it's shown it is expanded again\n        if (this.master && !master) {\n            this.expanded = false;\n        }\n        this.master = master;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_MASTER_CHANGED));\n        }\n    };\n    RowNode.prototype.setRowHeight = function (rowHeight, estimated) {\n        if (estimated === void 0) { estimated = false; }\n        this.rowHeight = rowHeight;\n        this.rowHeightEstimated = estimated;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_HEIGHT_CHANGED));\n        }\n    };\n    RowNode.prototype.setRowIndex = function (rowIndex) {\n        this.rowIndex = rowIndex;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_INDEX_CHANGED));\n        }\n    };\n    RowNode.prototype.setUiLevel = function (uiLevel) {\n        if (this.uiLevel === uiLevel) {\n            return;\n        }\n        this.uiLevel = uiLevel;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_UI_LEVEL_CHANGED));\n        }\n    };\n    RowNode.prototype.setExpanded = function (expanded) {\n        if (this.expanded === expanded) {\n            return;\n        }\n        this.expanded = expanded;\n        if (this.eventService) {\n            this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode.EVENT_EXPANDED_CHANGED));\n        }\n        var event = _.assign({}, this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED), {\n            expanded: expanded\n        });\n        this.mainEventService.dispatchEvent(event);\n        if (this.gridOptionsWrapper.isGroupIncludeFooter()) {\n            this.gridApi.redrawRows({ rowNodes: [this] });\n        }\n    };\n    RowNode.prototype.createGlobalRowEvent = function (type) {\n        return {\n            type: type,\n            node: this,\n            data: this.data,\n            rowIndex: this.rowIndex,\n            rowPinned: this.rowPinned,\n            context: this.gridOptionsWrapper.getContext(),\n            api: this.gridOptionsWrapper.getApi(),\n            columnApi: this.gridOptionsWrapper.getColumnApi()\n        };\n    };\n    RowNode.prototype.dispatchLocalEvent = function (event) {\n        if (this.eventService) {\n            this.eventService.dispatchEvent(event);\n        }\n    };\n    // we also allow editing the value via the editors. when it is done via\n    // the editors, no 'cell changed' event gets fired, as it's assumed that\n    // the cell knows about the change given it's in charge of the editing.\n    // this method is for the client to call, so the cell listens for the change\n    // event, and also flashes the cell when the change occurs.\n    RowNode.prototype.setDataValue = function (colKey, newValue) {\n        var column = this.columnController.getPrimaryColumn(colKey);\n        var oldValue = this.valueService.getValue(column, this);\n        this.valueService.setValue(this, column, newValue);\n        this.dispatchCellChangedEvent(column, newValue, oldValue);\n    };\n    RowNode.prototype.setGroupValue = function (colKey, newValue) {\n        var column = this.columnController.getGridColumn(colKey);\n        if (_.missing(this.groupData)) {\n            this.groupData = {};\n        }\n        var columnId = column.getColId();\n        var oldValue = this.groupData[columnId];\n        if (oldValue === newValue) {\n            return;\n        }\n        this.groupData[columnId] = newValue;\n        this.dispatchCellChangedEvent(column, newValue, oldValue);\n    };\n    // sets the data for an aggregation\n    RowNode.prototype.setAggData = function (newAggData) {\n        var _this = this;\n        // find out all keys that could potentially change\n        var colIds = _.getAllKeysInObjects([this.aggData, newAggData]);\n        var oldAggData = this.aggData;\n        this.aggData = newAggData;\n        // if no event service, nobody has registered for events, so no need fire event\n        if (this.eventService) {\n            colIds.forEach(function (colId) {\n                var column = _this.columnController.getGridColumn(colId);\n                var value = _this.aggData ? _this.aggData[colId] : undefined;\n                var oldValue = oldAggData ? oldAggData[colId] : undefined;\n                _this.dispatchCellChangedEvent(column, value, oldValue);\n            });\n        }\n    };\n    RowNode.prototype.hasChildren = function () {\n        // we need to return true when this.group=true, as this is used by server side row model\n        // (as children are lazy loaded and stored in a cache anyway). otherwise we return true\n        // if children exist.\n        return this.group || (this.childrenAfterGroup && this.childrenAfterGroup.length > 0);\n    };\n    RowNode.prototype.isEmptyRowGroupNode = function () {\n        return this.group && _.missingOrEmpty(this.childrenAfterGroup);\n    };\n    RowNode.prototype.dispatchCellChangedEvent = function (column, newValue, oldValue) {\n        var cellChangedEvent = {\n            type: RowNode.EVENT_CELL_CHANGED,\n            node: this,\n            column: column,\n            newValue: newValue,\n            oldValue: oldValue\n        };\n        this.dispatchLocalEvent(cellChangedEvent);\n    };\n    RowNode.prototype.resetQuickFilterAggregateText = function () {\n        this.quickFilterAggregateText = null;\n    };\n    RowNode.prototype.isExpandable = function () {\n        return this.hasChildren() || this.master;\n    };\n    RowNode.prototype.isSelected = function () {\n        // for footers, we just return what our sibling selected state is, as cannot select a footer\n        if (this.footer) {\n            return this.sibling.isSelected();\n        }\n        return this.selected;\n    };\n    RowNode.prototype.depthFirstSearch = function (callback) {\n        if (this.childrenAfterGroup) {\n            this.childrenAfterGroup.forEach(function (child) { return child.depthFirstSearch(callback); });\n        }\n        callback(this);\n    };\n    // + rowController.updateGroupsInSelection()\n    // + selectionController.calculatedSelectedForAllGroupNodes()\n    RowNode.prototype.calculateSelectedFromChildren = function () {\n        var atLeastOneSelected = false;\n        var atLeastOneDeSelected = false;\n        var atLeastOneMixed = false;\n        var newSelectedValue;\n        if (this.childrenAfterGroup) {\n            for (var i = 0; i < this.childrenAfterGroup.length; i++) {\n                var child = this.childrenAfterGroup[i];\n                // skip non-selectable nodes to prevent inconsistent selection values\n                if (!child.selectable) {\n                    continue;\n                }\n                var childState = child.isSelected();\n                switch (childState) {\n                    case true:\n                        atLeastOneSelected = true;\n                        break;\n                    case false:\n                        atLeastOneDeSelected = true;\n                        break;\n                    default:\n                        atLeastOneMixed = true;\n                        break;\n                }\n            }\n        }\n        if (atLeastOneMixed) {\n            newSelectedValue = undefined;\n        }\n        else if (atLeastOneSelected && !atLeastOneDeSelected) {\n            newSelectedValue = true;\n        }\n        else if (!atLeastOneSelected && atLeastOneDeSelected) {\n            newSelectedValue = false;\n        }\n        else {\n            newSelectedValue = undefined;\n        }\n        this.selectThisNode(newSelectedValue);\n    };\n    RowNode.prototype.setSelectedInitialValue = function (selected) {\n        this.selected = selected;\n    };\n    RowNode.prototype.setSelected = function (newValue, clearSelection, suppressFinishActions) {\n        if (clearSelection === void 0) { clearSelection = false; }\n        if (suppressFinishActions === void 0) { suppressFinishActions = false; }\n        this.setSelectedParams({\n            newValue: newValue,\n            clearSelection: clearSelection,\n            suppressFinishActions: suppressFinishActions,\n            rangeSelect: false\n        });\n    };\n    RowNode.prototype.isRowPinned = function () {\n        return this.rowPinned === Constants.PINNED_TOP || this.rowPinned === Constants.PINNED_BOTTOM;\n    };\n    // to make calling code more readable, this is the same method as setSelected except it takes names parameters\n    RowNode.prototype.setSelectedParams = function (params) {\n        var groupSelectsChildren = this.gridOptionsWrapper.isGroupSelectsChildren();\n        var newValue = params.newValue === true;\n        var clearSelection = params.clearSelection === true;\n        var suppressFinishActions = params.suppressFinishActions === true;\n        var rangeSelect = params.rangeSelect === true;\n        // groupSelectsFiltered only makes sense when group selects children\n        var groupSelectsFiltered = groupSelectsChildren && (params.groupSelectsFiltered === true);\n        if (this.id === undefined) {\n            console.warn('ag-Grid: cannot select node until id for node is known');\n            return 0;\n        }\n        if (this.rowPinned) {\n            console.warn('ag-Grid: cannot select pinned rows');\n            return 0;\n        }\n        // if we are a footer, we don't do selection, just pass the info\n        // to the sibling (the parent of the group)\n        if (this.footer) {\n            var count = this.sibling.setSelectedParams(params);\n            return count;\n        }\n        if (rangeSelect) {\n            var newRowClicked = this.selectionController.getLastSelectedNode() !== this;\n            var allowMultiSelect = this.gridOptionsWrapper.isRowSelectionMulti();\n            if (newRowClicked && allowMultiSelect) {\n                return this.doRowRangeSelection();\n            }\n        }\n        var updatedCount = 0;\n        // when groupSelectsFiltered, then this node may end up intermediate despite\n        // trying to set it to true / false. this group will be calculated further on\n        // down when we call calculatedSelectedForAllGroupNodes(). we need to skip it\n        // here, otherwise the updatedCount would include it.\n        var skipThisNode = groupSelectsFiltered && this.group;\n        if (!skipThisNode) {\n            var thisNodeWasSelected = this.selectThisNode(newValue);\n            if (thisNodeWasSelected) {\n                updatedCount++;\n            }\n        }\n        if (groupSelectsChildren && this.group) {\n            updatedCount += this.selectChildNodes(newValue, groupSelectsFiltered);\n        }\n        // clear other nodes if not doing multi select\n        if (!suppressFinishActions) {\n            var clearOtherNodes = newValue && (clearSelection || !this.gridOptionsWrapper.isRowSelectionMulti());\n            if (clearOtherNodes) {\n                updatedCount += this.selectionController.clearOtherNodes(this);\n            }\n            // only if we selected something, then update groups and fire events\n            if (updatedCount > 0) {\n                this.selectionController.updateGroupsFromChildrenSelections();\n                // this is the very end of the 'action node', so we are finished all the updates,\n                // include any parent / child changes that this method caused\n                var event_1 = {\n                    type: Events.EVENT_SELECTION_CHANGED,\n                    api: this.gridApi,\n                    columnApi: this.columnApi\n                };\n                this.mainEventService.dispatchEvent(event_1);\n            }\n            // so if user next does shift-select, we know where to start the selection from\n            if (newValue) {\n                this.selectionController.setLastSelectedNode(this);\n            }\n        }\n        return updatedCount;\n    };\n    // selects all rows between this node and the last selected node (or the top if this is the first selection).\n    // not to be mixed up with 'cell range selection' where you drag the mouse, this is row range selection, by\n    // holding down 'shift'.\n    RowNode.prototype.doRowRangeSelection = function () {\n        var groupsSelectChildren = this.gridOptionsWrapper.isGroupSelectsChildren();\n        var lastSelectedNode = this.selectionController.getLastSelectedNode();\n        var nodesToSelect = this.rowModel.getNodesInRangeForSelection(this, lastSelectedNode);\n        var updatedCount = 0;\n        nodesToSelect.forEach(function (rowNode) {\n            if (rowNode.group && groupsSelectChildren) {\n                return;\n            }\n            var nodeWasSelected = rowNode.selectThisNode(true);\n            if (nodeWasSelected) {\n                updatedCount++;\n            }\n        });\n        this.selectionController.updateGroupsFromChildrenSelections();\n        var event = {\n            type: Events.EVENT_SELECTION_CHANGED,\n            api: this.gridApi,\n            columnApi: this.columnApi\n        };\n        this.mainEventService.dispatchEvent(event);\n        return updatedCount;\n    };\n    RowNode.prototype.isParentOfNode = function (potentialParent) {\n        var parentNode = this.parent;\n        while (parentNode) {\n            if (parentNode === potentialParent) {\n                return true;\n            }\n            parentNode = parentNode.parent;\n        }\n        return false;\n    };\n    RowNode.prototype.selectThisNode = function (newValue) {\n        // we only check selectable when newValue=true (ie selecting) to allow unselecting values,\n        // as selectable is dynamic, need a way to unselect rows when selectable becomes false.\n        var selectionNotAllowed = !this.selectable && newValue;\n        var selectionNotChanged = this.selected === newValue;\n        if (selectionNotAllowed || selectionNotChanged) {\n            return false;\n        }\n        this.selected = newValue;\n        if (this.eventService) {\n            this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_ROW_SELECTED));\n        }\n        var event = this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED);\n        this.mainEventService.dispatchEvent(event);\n        return true;\n    };\n    RowNode.prototype.selectChildNodes = function (newValue, groupSelectsFiltered) {\n        var children = groupSelectsFiltered ? this.childrenAfterFilter : this.childrenAfterGroup;\n        if (_.missing(children)) {\n            return;\n        }\n        var updatedCount = 0;\n        for (var i = 0; i < children.length; i++) {\n            updatedCount += children[i].setSelectedParams({\n                newValue: newValue,\n                clearSelection: false,\n                suppressFinishActions: true,\n                groupSelectsFiltered: groupSelectsFiltered\n            });\n        }\n        return updatedCount;\n    };\n    RowNode.prototype.addEventListener = function (eventType, listener) {\n        if (!this.eventService) {\n            this.eventService = new EventService();\n        }\n        this.eventService.addEventListener(eventType, listener);\n    };\n    RowNode.prototype.removeEventListener = function (eventType, listener) {\n        this.eventService.removeEventListener(eventType, listener);\n    };\n    RowNode.prototype.onMouseEnter = function () {\n        this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_ENTER));\n    };\n    RowNode.prototype.onMouseLeave = function () {\n        this.dispatchLocalEvent(this.createLocalRowEvent(RowNode.EVENT_MOUSE_LEAVE));\n    };\n    RowNode.prototype.getFirstChildOfFirstChild = function (rowGroupColumn) {\n        var currentRowNode = this;\n        var isCandidate = true;\n        var foundFirstChildPath = false;\n        var nodeToSwapIn;\n        // if we are hiding groups, then if we are the first child, of the first child,\n        // all the way up to the column we are interested in, then we show the group cell.\n        while (isCandidate && !foundFirstChildPath) {\n            var parentRowNode = currentRowNode.parent;\n            var firstChild = _.exists(parentRowNode) && currentRowNode.firstChild;\n            if (firstChild) {\n                if (parentRowNode.rowGroupColumn === rowGroupColumn) {\n                    foundFirstChildPath = true;\n                    nodeToSwapIn = parentRowNode;\n                }\n            }\n            else {\n                isCandidate = false;\n            }\n            currentRowNode = parentRowNode;\n        }\n        return foundFirstChildPath ? nodeToSwapIn : null;\n    };\n    RowNode.prototype.isFullWidthCell = function () {\n        var isFullWidthCellFunc = this.gridOptionsWrapper.getIsFullWidthCellFunc();\n        return isFullWidthCellFunc ? isFullWidthCellFunc(this) : false;\n    };\n    RowNode.ID_PREFIX_ROW_GROUP = 'row-group-';\n    RowNode.ID_PREFIX_TOP_PINNED = 't-';\n    RowNode.ID_PREFIX_BOTTOM_PINNED = 'b-';\n    RowNode.OBJECT_ID_SEQUENCE = 0;\n    RowNode.EVENT_ROW_SELECTED = 'rowSelected';\n    RowNode.EVENT_DATA_CHANGED = 'dataChanged';\n    RowNode.EVENT_CELL_CHANGED = 'cellChanged';\n    RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED = 'allChildrenCountChanged';\n    RowNode.EVENT_MASTER_CHANGED = 'masterChanged';\n    RowNode.EVENT_MOUSE_ENTER = 'mouseEnter';\n    RowNode.EVENT_MOUSE_LEAVE = 'mouseLeave';\n    RowNode.EVENT_HEIGHT_CHANGED = 'heightChanged';\n    RowNode.EVENT_TOP_CHANGED = 'topChanged';\n    RowNode.EVENT_FIRST_CHILD_CHANGED = 'firstChildChanged';\n    RowNode.EVENT_LAST_CHILD_CHANGED = 'lastChildChanged';\n    RowNode.EVENT_CHILD_INDEX_CHANGED = 'childIndexChanged';\n    RowNode.EVENT_ROW_INDEX_CHANGED = 'rowIndexChanged';\n    RowNode.EVENT_EXPANDED_CHANGED = 'expandedChanged';\n    RowNode.EVENT_SELECTABLE_CHANGED = 'selectableChanged';\n    RowNode.EVENT_UI_LEVEL_CHANGED = 'uiLevelChanged';\n    RowNode.EVENT_HIGHLIGHT_CHANGED = 'rowHighlightChanged';\n    RowNode.EVENT_DRAGGING_CHANGED = 'draggingChanged';\n    __decorate([\n        Autowired('eventService')\n    ], RowNode.prototype, \"mainEventService\", void 0);\n    __decorate([\n        Autowired('gridOptionsWrapper')\n    ], RowNode.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate([\n        Autowired('selectionController')\n    ], RowNode.prototype, \"selectionController\", void 0);\n    __decorate([\n        Autowired('columnController')\n    ], RowNode.prototype, \"columnController\", void 0);\n    __decorate([\n        Autowired('valueService')\n    ], RowNode.prototype, \"valueService\", void 0);\n    __decorate([\n        Autowired('rowModel')\n    ], RowNode.prototype, \"rowModel\", void 0);\n    __decorate([\n        Autowired('context')\n    ], RowNode.prototype, \"context\", void 0);\n    __decorate([\n        Autowired('valueCache')\n    ], RowNode.prototype, \"valueCache\", void 0);\n    __decorate([\n        Autowired('columnApi')\n    ], RowNode.prototype, \"columnApi\", void 0);\n    __decorate([\n        Autowired('gridApi')\n    ], RowNode.prototype, \"gridApi\", void 0);\n    return RowNode;\n}());\nexport { RowNode };\n"]},"metadata":{},"sourceType":"module"}