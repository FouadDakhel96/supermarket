{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Component, DragSourceType, Events, HorizontalDirection, VerticalDirection, _ } from \"@ag-grid-community/core\";\nimport { DropZoneColumnComp } from \"./dropZoneColumnComp\";\n\nvar BaseDropZonePanel =\n/** @class */\nfunction (_super) {\n  __extends(BaseDropZonePanel, _super);\n\n  function BaseDropZonePanel(horizontal, valueColumn) {\n    var _this = _super.call(this, \"<div class=\\\"ag-unselectable\\\"></div>\") || this;\n\n    _this.horizontal = horizontal;\n    _this.valueColumn = valueColumn;\n    _this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n    _this.guiDestroyFunctions = [];\n    _this.childColumnComponents = [];\n\n    _this.addElementClasses(_this.getGui());\n\n    _this.eColumnDropList = document.createElement('div');\n\n    _this.addElementClasses(_this.eColumnDropList, 'list');\n\n    return _this;\n  }\n\n  BaseDropZonePanel.prototype.isHorizontal = function () {\n    return this.horizontal;\n  };\n\n  BaseDropZonePanel.prototype.setBeans = function (beans) {\n    this.beans = beans;\n  };\n\n  BaseDropZonePanel.prototype.destroy = function () {\n    this.destroyGui();\n\n    _super.prototype.destroy.call(this);\n  };\n\n  BaseDropZonePanel.prototype.destroyGui = function () {\n    this.guiDestroyFunctions.forEach(function (func) {\n      return func();\n    });\n    this.guiDestroyFunctions.length = 0;\n    this.childColumnComponents.length = 0;\n\n    _.clearElement(this.getGui());\n\n    _.clearElement(this.eColumnDropList);\n  };\n\n  BaseDropZonePanel.prototype.init = function (params) {\n    this.params = params;\n    this.addManagedListener(this.beans.eventService, Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.refreshGui.bind(this));\n    this.addManagedListener(this.beans.gridOptionsWrapper, 'functionsReadOnly', this.refreshGui.bind(this));\n    this.setupDropTarget(); // we don't know if this bean will be initialised before columnController.\n    // if columnController first, then below will work\n    // if columnController second, then below will put blank in, and then above event gets first when columnController is set up\n\n    this.refreshGui();\n  };\n\n  BaseDropZonePanel.prototype.addElementClasses = function (el, suffix) {\n    suffix = suffix ? \"-\" + suffix : '';\n\n    _.addCssClass(el, \"ag-column-drop\" + suffix);\n\n    var direction = this.horizontal ? 'horizontal' : 'vertical';\n\n    _.addCssClass(el, \"ag-column-drop-\" + direction + suffix);\n  };\n\n  BaseDropZonePanel.prototype.setupDropTarget = function () {\n    this.dropTarget = {\n      getContainer: this.getGui.bind(this),\n      getIconName: this.getIconName.bind(this),\n      onDragging: this.onDragging.bind(this),\n      onDragEnter: this.onDragEnter.bind(this),\n      onDragLeave: this.onDragLeave.bind(this),\n      onDragStop: this.onDragStop.bind(this),\n      isInterestedIn: this.isInterestedIn.bind(this)\n    };\n    this.beans.dragAndDropService.addDropTarget(this.dropTarget);\n  };\n\n  BaseDropZonePanel.prototype.isInterestedIn = function (type) {\n    // not interested in row drags\n    return type === DragSourceType.HeaderCell || type === DragSourceType.ToolPanel;\n  };\n\n  BaseDropZonePanel.prototype.checkInsertIndex = function (draggingEvent) {\n    var newIndex = this.horizontal ? this.getNewHorizontalInsertIndex(draggingEvent) : this.getNewVerticalInsertIndex(draggingEvent); // <0 happens when drag is no a direction we are interested in, eg drag is up/down but in horizontal panel\n\n    if (newIndex < 0) {\n      return false;\n    }\n\n    var changed = newIndex !== this.insertIndex;\n\n    if (changed) {\n      this.insertIndex = newIndex;\n    }\n\n    return changed;\n  };\n\n  BaseDropZonePanel.prototype.getNewHorizontalInsertIndex = function (draggingEvent) {\n    if (_.missing(draggingEvent.hDirection)) {\n      return -1;\n    }\n\n    var newIndex = 0;\n    var mouseEvent = draggingEvent.event;\n    var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n    var goingLeft = draggingEvent.hDirection === HorizontalDirection.Left;\n    var mouseX = mouseEvent.clientX;\n    this.childColumnComponents.forEach(function (childColumn) {\n      var rect = childColumn.getGui().getBoundingClientRect();\n      var rectX = goingLeft ? rect.right : rect.left;\n      var horizontalFit = enableRtl ? mouseX <= rectX : mouseX >= rectX;\n\n      if (horizontalFit) {\n        newIndex++;\n      }\n    });\n    return newIndex;\n  };\n\n  BaseDropZonePanel.prototype.getNewVerticalInsertIndex = function (draggingEvent) {\n    if (_.missing(draggingEvent.vDirection)) {\n      return -1;\n    }\n\n    var newIndex = 0;\n    var mouseEvent = draggingEvent.event;\n    this.childColumnComponents.forEach(function (childColumn) {\n      var rect = childColumn.getGui().getBoundingClientRect();\n      var verticalFit = mouseEvent.clientY >= (draggingEvent.vDirection === VerticalDirection.Down ? rect.top : rect.bottom);\n\n      if (verticalFit) {\n        newIndex++;\n      }\n    });\n    return newIndex;\n  };\n\n  BaseDropZonePanel.prototype.checkDragStartedBySelf = function (draggingEvent) {\n    if (this.state !== BaseDropZonePanel.STATE_NOT_DRAGGING) {\n      return;\n    }\n\n    this.state = BaseDropZonePanel.STATE_REARRANGE_COLUMNS;\n    this.potentialDndColumns = draggingEvent.dragSource.getDragItem().columns || [];\n    this.refreshGui();\n    this.checkInsertIndex(draggingEvent);\n    this.refreshGui();\n  };\n\n  BaseDropZonePanel.prototype.onDragging = function (draggingEvent) {\n    this.checkDragStartedBySelf(draggingEvent);\n\n    if (this.checkInsertIndex(draggingEvent)) {\n      this.refreshGui();\n    }\n  };\n\n  BaseDropZonePanel.prototype.onDragEnter = function (draggingEvent) {\n    // this will contain all columns that are potential drops\n    var dragColumns = draggingEvent.dragSource.getDragItem().columns || [];\n    this.state = BaseDropZonePanel.STATE_NEW_COLUMNS_IN; // take out columns that are not droppable\n\n    var goodDragColumns = dragColumns.filter(this.isColumnDroppable.bind(this));\n\n    if (goodDragColumns.length > 0) {\n      this.potentialDndColumns = goodDragColumns;\n      this.checkInsertIndex(draggingEvent);\n      this.refreshGui();\n    }\n  };\n\n  BaseDropZonePanel.prototype.isPotentialDndColumns = function () {\n    return _.existsAndNotEmpty(this.potentialDndColumns);\n  };\n\n  BaseDropZonePanel.prototype.onDragLeave = function (draggingEvent) {\n    // if the dragging started from us, we remove the group, however if it started\n    // someplace else, then we don't, as it was only 'asking'\n    if (this.state === BaseDropZonePanel.STATE_REARRANGE_COLUMNS) {\n      var columns = draggingEvent.dragSource.getDragItem().columns || [];\n      this.removeColumns(columns);\n    }\n\n    if (this.isPotentialDndColumns()) {\n      this.potentialDndColumns = [];\n      this.refreshGui();\n    }\n\n    this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n  };\n\n  BaseDropZonePanel.prototype.onDragStop = function () {\n    if (this.isPotentialDndColumns()) {\n      var success = false;\n\n      if (this.state === BaseDropZonePanel.STATE_NEW_COLUMNS_IN) {\n        this.addColumns(this.potentialDndColumns);\n        success = true;\n      } else {\n        success = this.rearrangeColumns(this.potentialDndColumns);\n      }\n\n      this.potentialDndColumns = []; // If the function is passive, then we don't refresh, as we assume the client application\n      // is going to call setRowGroups / setPivots / setValues at a later point which will then\n      // cause a refresh. This gives a nice GUI where the ghost stays until the app has caught\n      // up with the changes. However, if there was no change in the order, then we do need to\n      // refresh to reset the columns\n\n      if (!this.beans.gridOptionsWrapper.isFunctionsPassive() || !success) {\n        this.refreshGui();\n      }\n    }\n\n    this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n  };\n\n  BaseDropZonePanel.prototype.removeColumns = function (columnsToRemove) {\n    var newColumnList = this.getExistingColumns().filter(function (col) {\n      return !_.includes(columnsToRemove, col);\n    });\n    this.updateColumns(newColumnList);\n  };\n\n  BaseDropZonePanel.prototype.addColumns = function (columnsToAdd) {\n    var newColumnList = this.getExistingColumns().slice();\n\n    _.insertArrayIntoArray(newColumnList, columnsToAdd, this.insertIndex);\n\n    this.updateColumns(newColumnList);\n  };\n\n  BaseDropZonePanel.prototype.rearrangeColumns = function (columnsToAdd) {\n    var newColumnList = this.getNonGhostColumns().slice();\n\n    _.insertArrayIntoArray(newColumnList, columnsToAdd, this.insertIndex);\n\n    if (_.areEqual(newColumnList, this.getExistingColumns())) {\n      return false;\n    } else {\n      this.updateColumns(newColumnList);\n      return true;\n    }\n  };\n\n  BaseDropZonePanel.prototype.refreshGui = function () {\n    // we reset the scroll position after the refresh.\n    // if we don't do this, then the list will always scroll to the top\n    // each time we refresh it. this is because part of the refresh empties\n    // out the list which sets scroll to zero. so the user could be just\n    // reordering the list - we want to prevent the resetting of the scroll.\n    // this is relevant for vertical display only (as horizontal has no scroll)\n    var scrollTop = this.eColumnDropList.scrollTop;\n    this.destroyGui();\n    this.addIconAndTitleToGui();\n    this.addEmptyMessageToGui();\n    this.addColumnsToGui();\n\n    if (!this.isHorizontal()) {\n      this.eColumnDropList.scrollTop = scrollTop;\n    }\n  };\n\n  BaseDropZonePanel.prototype.getNonGhostColumns = function () {\n    var _this = this;\n\n    var existingColumns = this.getExistingColumns();\n\n    if (this.isPotentialDndColumns()) {\n      return existingColumns.filter(function (column) {\n        return !_.includes(_this.potentialDndColumns, column);\n      });\n    } else {\n      return existingColumns;\n    }\n  };\n\n  BaseDropZonePanel.prototype.addColumnsToGui = function () {\n    var _this = this;\n\n    var nonGhostColumns = this.getNonGhostColumns();\n    var addingGhosts = this.isPotentialDndColumns();\n    var itemsToAddToGui = [];\n    nonGhostColumns.forEach(function (column, index) {\n      if (addingGhosts && index >= _this.insertIndex) {\n        return;\n      }\n\n      var columnComponent = _this.createColumnComponent(column, false);\n\n      itemsToAddToGui.push(columnComponent);\n    });\n\n    if (this.isPotentialDndColumns()) {\n      this.potentialDndColumns.forEach(function (column) {\n        var columnComponent = _this.createColumnComponent(column, true);\n\n        itemsToAddToGui.push(columnComponent);\n      });\n      nonGhostColumns.forEach(function (column, index) {\n        if (index < _this.insertIndex) {\n          return;\n        }\n\n        var columnComponent = _this.createColumnComponent(column, false);\n\n        itemsToAddToGui.push(columnComponent);\n      });\n    }\n\n    this.getGui().appendChild(this.eColumnDropList);\n    itemsToAddToGui.forEach(function (columnComponent, index) {\n      if (index > 0) {\n        _this.addArrow(_this.eColumnDropList);\n      }\n\n      _this.eColumnDropList.appendChild(columnComponent.getGui());\n    });\n  };\n\n  BaseDropZonePanel.prototype.createColumnComponent = function (column, ghost) {\n    var _this = this;\n\n    var columnComponent = new DropZoneColumnComp(column, this.dropTarget, ghost, this.valueColumn, this.horizontal);\n    columnComponent.addEventListener(DropZoneColumnComp.EVENT_COLUMN_REMOVE, this.removeColumns.bind(this, [column]));\n    this.beans.context.createBean(columnComponent);\n    this.guiDestroyFunctions.push(function () {\n      return _this.destroyBean(columnComponent);\n    });\n\n    if (!ghost) {\n      this.childColumnComponents.push(columnComponent);\n    }\n\n    return columnComponent;\n  };\n\n  BaseDropZonePanel.prototype.addIconAndTitleToGui = function () {\n    var eGroupIcon = this.params.icon;\n    var eTitleBar = document.createElement('div');\n    this.addElementClasses(eTitleBar, 'title-bar');\n    this.addElementClasses(eGroupIcon, 'icon');\n\n    _.addOrRemoveCssClass(this.getGui(), 'ag-column-drop-empty', this.isExistingColumnsEmpty());\n\n    eTitleBar.appendChild(eGroupIcon);\n\n    if (!this.horizontal) {\n      var eTitle = document.createElement('span');\n      this.addElementClasses(eTitle, 'title');\n      eTitle.innerHTML = this.params.title;\n      eTitleBar.appendChild(eTitle);\n    }\n\n    this.getGui().appendChild(eTitleBar);\n  };\n\n  BaseDropZonePanel.prototype.isExistingColumnsEmpty = function () {\n    return this.getExistingColumns().length === 0;\n  };\n\n  BaseDropZonePanel.prototype.addEmptyMessageToGui = function () {\n    if (!this.isExistingColumnsEmpty() || this.isPotentialDndColumns()) {\n      return;\n    }\n\n    var eMessage = document.createElement('span');\n    eMessage.innerHTML = this.params.emptyMessage;\n    this.addElementClasses(eMessage, 'empty-message');\n    this.eColumnDropList.appendChild(eMessage);\n  };\n\n  BaseDropZonePanel.prototype.addArrow = function (eParent) {\n    // only add the arrows if the layout is horizontal\n    if (this.horizontal) {\n      // for RTL it's a left arrow, otherwise it's a right arrow\n      var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n\n      var icon = _.createIconNoSpan(enableRtl ? 'smallLeft' : 'smallRight', this.beans.gridOptionsWrapper);\n\n      this.addElementClasses(icon, 'cell-separator');\n      eParent.appendChild(icon);\n    }\n  };\n\n  BaseDropZonePanel.STATE_NOT_DRAGGING = 'notDragging';\n  BaseDropZonePanel.STATE_NEW_COLUMNS_IN = 'newColumnsIn';\n  BaseDropZonePanel.STATE_REARRANGE_COLUMNS = 'rearrangeColumns';\n  return BaseDropZonePanel;\n}(Component);\n\nexport { BaseDropZonePanel };","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/@ag-grid-enterprise/row-grouping/dist/es6/rowGrouping/columnDropZones/baseDropZonePanel.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Component","DragSourceType","Events","HorizontalDirection","VerticalDirection","_","DropZoneColumnComp","BaseDropZonePanel","_super","horizontal","valueColumn","_this","call","state","STATE_NOT_DRAGGING","guiDestroyFunctions","childColumnComponents","addElementClasses","getGui","eColumnDropList","document","createElement","isHorizontal","setBeans","beans","destroy","destroyGui","forEach","func","length","clearElement","init","params","addManagedListener","eventService","EVENT_COLUMN_EVERYTHING_CHANGED","refreshGui","bind","gridOptionsWrapper","setupDropTarget","el","suffix","addCssClass","direction","dropTarget","getContainer","getIconName","onDragging","onDragEnter","onDragLeave","onDragStop","isInterestedIn","dragAndDropService","addDropTarget","type","HeaderCell","ToolPanel","checkInsertIndex","draggingEvent","newIndex","getNewHorizontalInsertIndex","getNewVerticalInsertIndex","changed","insertIndex","missing","hDirection","mouseEvent","event","enableRtl","isEnableRtl","goingLeft","Left","mouseX","clientX","childColumn","rect","getBoundingClientRect","rectX","right","left","horizontalFit","vDirection","verticalFit","clientY","Down","top","bottom","checkDragStartedBySelf","STATE_REARRANGE_COLUMNS","potentialDndColumns","dragSource","getDragItem","columns","dragColumns","STATE_NEW_COLUMNS_IN","goodDragColumns","filter","isColumnDroppable","isPotentialDndColumns","existsAndNotEmpty","removeColumns","success","addColumns","rearrangeColumns","isFunctionsPassive","columnsToRemove","newColumnList","getExistingColumns","col","includes","updateColumns","columnsToAdd","slice","insertArrayIntoArray","getNonGhostColumns","areEqual","scrollTop","addIconAndTitleToGui","addEmptyMessageToGui","addColumnsToGui","existingColumns","column","nonGhostColumns","addingGhosts","itemsToAddToGui","index","columnComponent","createColumnComponent","push","appendChild","addArrow","ghost","addEventListener","EVENT_COLUMN_REMOVE","context","createBean","destroyBean","eGroupIcon","icon","eTitleBar","addOrRemoveCssClass","isExistingColumnsEmpty","eTitle","innerHTML","title","eMessage","emptyMessage","eParent","createIconNoSpan"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Component, DragSourceType, Events, HorizontalDirection, VerticalDirection, _ } from \"@ag-grid-community/core\";\nimport { DropZoneColumnComp } from \"./dropZoneColumnComp\";\nvar BaseDropZonePanel = /** @class */ (function (_super) {\n    __extends(BaseDropZonePanel, _super);\n    function BaseDropZonePanel(horizontal, valueColumn) {\n        var _this = _super.call(this, \"<div class=\\\"ag-unselectable\\\"></div>\") || this;\n        _this.horizontal = horizontal;\n        _this.valueColumn = valueColumn;\n        _this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n        _this.guiDestroyFunctions = [];\n        _this.childColumnComponents = [];\n        _this.addElementClasses(_this.getGui());\n        _this.eColumnDropList = document.createElement('div');\n        _this.addElementClasses(_this.eColumnDropList, 'list');\n        return _this;\n    }\n    BaseDropZonePanel.prototype.isHorizontal = function () {\n        return this.horizontal;\n    };\n    BaseDropZonePanel.prototype.setBeans = function (beans) {\n        this.beans = beans;\n    };\n    BaseDropZonePanel.prototype.destroy = function () {\n        this.destroyGui();\n        _super.prototype.destroy.call(this);\n    };\n    BaseDropZonePanel.prototype.destroyGui = function () {\n        this.guiDestroyFunctions.forEach(function (func) { return func(); });\n        this.guiDestroyFunctions.length = 0;\n        this.childColumnComponents.length = 0;\n        _.clearElement(this.getGui());\n        _.clearElement(this.eColumnDropList);\n    };\n    BaseDropZonePanel.prototype.init = function (params) {\n        this.params = params;\n        this.addManagedListener(this.beans.eventService, Events.EVENT_COLUMN_EVERYTHING_CHANGED, this.refreshGui.bind(this));\n        this.addManagedListener(this.beans.gridOptionsWrapper, 'functionsReadOnly', this.refreshGui.bind(this));\n        this.setupDropTarget();\n        // we don't know if this bean will be initialised before columnController.\n        // if columnController first, then below will work\n        // if columnController second, then below will put blank in, and then above event gets first when columnController is set up\n        this.refreshGui();\n    };\n    BaseDropZonePanel.prototype.addElementClasses = function (el, suffix) {\n        suffix = suffix ? \"-\" + suffix : '';\n        _.addCssClass(el, \"ag-column-drop\" + suffix);\n        var direction = this.horizontal ? 'horizontal' : 'vertical';\n        _.addCssClass(el, \"ag-column-drop-\" + direction + suffix);\n    };\n    BaseDropZonePanel.prototype.setupDropTarget = function () {\n        this.dropTarget = {\n            getContainer: this.getGui.bind(this),\n            getIconName: this.getIconName.bind(this),\n            onDragging: this.onDragging.bind(this),\n            onDragEnter: this.onDragEnter.bind(this),\n            onDragLeave: this.onDragLeave.bind(this),\n            onDragStop: this.onDragStop.bind(this),\n            isInterestedIn: this.isInterestedIn.bind(this)\n        };\n        this.beans.dragAndDropService.addDropTarget(this.dropTarget);\n    };\n    BaseDropZonePanel.prototype.isInterestedIn = function (type) {\n        // not interested in row drags\n        return type === DragSourceType.HeaderCell || type === DragSourceType.ToolPanel;\n    };\n    BaseDropZonePanel.prototype.checkInsertIndex = function (draggingEvent) {\n        var newIndex = this.horizontal ? this.getNewHorizontalInsertIndex(draggingEvent) : this.getNewVerticalInsertIndex(draggingEvent);\n        // <0 happens when drag is no a direction we are interested in, eg drag is up/down but in horizontal panel\n        if (newIndex < 0) {\n            return false;\n        }\n        var changed = newIndex !== this.insertIndex;\n        if (changed) {\n            this.insertIndex = newIndex;\n        }\n        return changed;\n    };\n    BaseDropZonePanel.prototype.getNewHorizontalInsertIndex = function (draggingEvent) {\n        if (_.missing(draggingEvent.hDirection)) {\n            return -1;\n        }\n        var newIndex = 0;\n        var mouseEvent = draggingEvent.event;\n        var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n        var goingLeft = draggingEvent.hDirection === HorizontalDirection.Left;\n        var mouseX = mouseEvent.clientX;\n        this.childColumnComponents.forEach(function (childColumn) {\n            var rect = childColumn.getGui().getBoundingClientRect();\n            var rectX = goingLeft ? rect.right : rect.left;\n            var horizontalFit = enableRtl ? mouseX <= rectX : mouseX >= rectX;\n            if (horizontalFit) {\n                newIndex++;\n            }\n        });\n        return newIndex;\n    };\n    BaseDropZonePanel.prototype.getNewVerticalInsertIndex = function (draggingEvent) {\n        if (_.missing(draggingEvent.vDirection)) {\n            return -1;\n        }\n        var newIndex = 0;\n        var mouseEvent = draggingEvent.event;\n        this.childColumnComponents.forEach(function (childColumn) {\n            var rect = childColumn.getGui().getBoundingClientRect();\n            var verticalFit = mouseEvent.clientY >= (draggingEvent.vDirection === VerticalDirection.Down ? rect.top : rect.bottom);\n            if (verticalFit) {\n                newIndex++;\n            }\n        });\n        return newIndex;\n    };\n    BaseDropZonePanel.prototype.checkDragStartedBySelf = function (draggingEvent) {\n        if (this.state !== BaseDropZonePanel.STATE_NOT_DRAGGING) {\n            return;\n        }\n        this.state = BaseDropZonePanel.STATE_REARRANGE_COLUMNS;\n        this.potentialDndColumns = draggingEvent.dragSource.getDragItem().columns || [];\n        this.refreshGui();\n        this.checkInsertIndex(draggingEvent);\n        this.refreshGui();\n    };\n    BaseDropZonePanel.prototype.onDragging = function (draggingEvent) {\n        this.checkDragStartedBySelf(draggingEvent);\n        if (this.checkInsertIndex(draggingEvent)) {\n            this.refreshGui();\n        }\n    };\n    BaseDropZonePanel.prototype.onDragEnter = function (draggingEvent) {\n        // this will contain all columns that are potential drops\n        var dragColumns = draggingEvent.dragSource.getDragItem().columns || [];\n        this.state = BaseDropZonePanel.STATE_NEW_COLUMNS_IN;\n        // take out columns that are not droppable\n        var goodDragColumns = dragColumns.filter(this.isColumnDroppable.bind(this));\n        if (goodDragColumns.length > 0) {\n            this.potentialDndColumns = goodDragColumns;\n            this.checkInsertIndex(draggingEvent);\n            this.refreshGui();\n        }\n    };\n    BaseDropZonePanel.prototype.isPotentialDndColumns = function () {\n        return _.existsAndNotEmpty(this.potentialDndColumns);\n    };\n    BaseDropZonePanel.prototype.onDragLeave = function (draggingEvent) {\n        // if the dragging started from us, we remove the group, however if it started\n        // someplace else, then we don't, as it was only 'asking'\n        if (this.state === BaseDropZonePanel.STATE_REARRANGE_COLUMNS) {\n            var columns = draggingEvent.dragSource.getDragItem().columns || [];\n            this.removeColumns(columns);\n        }\n        if (this.isPotentialDndColumns()) {\n            this.potentialDndColumns = [];\n            this.refreshGui();\n        }\n        this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n    };\n    BaseDropZonePanel.prototype.onDragStop = function () {\n        if (this.isPotentialDndColumns()) {\n            var success = false;\n            if (this.state === BaseDropZonePanel.STATE_NEW_COLUMNS_IN) {\n                this.addColumns(this.potentialDndColumns);\n                success = true;\n            }\n            else {\n                success = this.rearrangeColumns(this.potentialDndColumns);\n            }\n            this.potentialDndColumns = [];\n            // If the function is passive, then we don't refresh, as we assume the client application\n            // is going to call setRowGroups / setPivots / setValues at a later point which will then\n            // cause a refresh. This gives a nice GUI where the ghost stays until the app has caught\n            // up with the changes. However, if there was no change in the order, then we do need to\n            // refresh to reset the columns\n            if (!this.beans.gridOptionsWrapper.isFunctionsPassive() || !success) {\n                this.refreshGui();\n            }\n        }\n        this.state = BaseDropZonePanel.STATE_NOT_DRAGGING;\n    };\n    BaseDropZonePanel.prototype.removeColumns = function (columnsToRemove) {\n        var newColumnList = this.getExistingColumns().filter(function (col) { return !_.includes(columnsToRemove, col); });\n        this.updateColumns(newColumnList);\n    };\n    BaseDropZonePanel.prototype.addColumns = function (columnsToAdd) {\n        var newColumnList = this.getExistingColumns().slice();\n        _.insertArrayIntoArray(newColumnList, columnsToAdd, this.insertIndex);\n        this.updateColumns(newColumnList);\n    };\n    BaseDropZonePanel.prototype.rearrangeColumns = function (columnsToAdd) {\n        var newColumnList = this.getNonGhostColumns().slice();\n        _.insertArrayIntoArray(newColumnList, columnsToAdd, this.insertIndex);\n        if (_.areEqual(newColumnList, this.getExistingColumns())) {\n            return false;\n        }\n        else {\n            this.updateColumns(newColumnList);\n            return true;\n        }\n    };\n    BaseDropZonePanel.prototype.refreshGui = function () {\n        // we reset the scroll position after the refresh.\n        // if we don't do this, then the list will always scroll to the top\n        // each time we refresh it. this is because part of the refresh empties\n        // out the list which sets scroll to zero. so the user could be just\n        // reordering the list - we want to prevent the resetting of the scroll.\n        // this is relevant for vertical display only (as horizontal has no scroll)\n        var scrollTop = this.eColumnDropList.scrollTop;\n        this.destroyGui();\n        this.addIconAndTitleToGui();\n        this.addEmptyMessageToGui();\n        this.addColumnsToGui();\n        if (!this.isHorizontal()) {\n            this.eColumnDropList.scrollTop = scrollTop;\n        }\n    };\n    BaseDropZonePanel.prototype.getNonGhostColumns = function () {\n        var _this = this;\n        var existingColumns = this.getExistingColumns();\n        if (this.isPotentialDndColumns()) {\n            return existingColumns.filter(function (column) { return !_.includes(_this.potentialDndColumns, column); });\n        }\n        else {\n            return existingColumns;\n        }\n    };\n    BaseDropZonePanel.prototype.addColumnsToGui = function () {\n        var _this = this;\n        var nonGhostColumns = this.getNonGhostColumns();\n        var addingGhosts = this.isPotentialDndColumns();\n        var itemsToAddToGui = [];\n        nonGhostColumns.forEach(function (column, index) {\n            if (addingGhosts && index >= _this.insertIndex) {\n                return;\n            }\n            var columnComponent = _this.createColumnComponent(column, false);\n            itemsToAddToGui.push(columnComponent);\n        });\n        if (this.isPotentialDndColumns()) {\n            this.potentialDndColumns.forEach(function (column) {\n                var columnComponent = _this.createColumnComponent(column, true);\n                itemsToAddToGui.push(columnComponent);\n            });\n            nonGhostColumns.forEach(function (column, index) {\n                if (index < _this.insertIndex) {\n                    return;\n                }\n                var columnComponent = _this.createColumnComponent(column, false);\n                itemsToAddToGui.push(columnComponent);\n            });\n        }\n        this.getGui().appendChild(this.eColumnDropList);\n        itemsToAddToGui.forEach(function (columnComponent, index) {\n            if (index > 0) {\n                _this.addArrow(_this.eColumnDropList);\n            }\n            _this.eColumnDropList.appendChild(columnComponent.getGui());\n        });\n    };\n    BaseDropZonePanel.prototype.createColumnComponent = function (column, ghost) {\n        var _this = this;\n        var columnComponent = new DropZoneColumnComp(column, this.dropTarget, ghost, this.valueColumn, this.horizontal);\n        columnComponent.addEventListener(DropZoneColumnComp.EVENT_COLUMN_REMOVE, this.removeColumns.bind(this, [column]));\n        this.beans.context.createBean(columnComponent);\n        this.guiDestroyFunctions.push(function () { return _this.destroyBean(columnComponent); });\n        if (!ghost) {\n            this.childColumnComponents.push(columnComponent);\n        }\n        return columnComponent;\n    };\n    BaseDropZonePanel.prototype.addIconAndTitleToGui = function () {\n        var eGroupIcon = this.params.icon;\n        var eTitleBar = document.createElement('div');\n        this.addElementClasses(eTitleBar, 'title-bar');\n        this.addElementClasses(eGroupIcon, 'icon');\n        _.addOrRemoveCssClass(this.getGui(), 'ag-column-drop-empty', this.isExistingColumnsEmpty());\n        eTitleBar.appendChild(eGroupIcon);\n        if (!this.horizontal) {\n            var eTitle = document.createElement('span');\n            this.addElementClasses(eTitle, 'title');\n            eTitle.innerHTML = this.params.title;\n            eTitleBar.appendChild(eTitle);\n        }\n        this.getGui().appendChild(eTitleBar);\n    };\n    BaseDropZonePanel.prototype.isExistingColumnsEmpty = function () {\n        return this.getExistingColumns().length === 0;\n    };\n    BaseDropZonePanel.prototype.addEmptyMessageToGui = function () {\n        if (!this.isExistingColumnsEmpty() || this.isPotentialDndColumns()) {\n            return;\n        }\n        var eMessage = document.createElement('span');\n        eMessage.innerHTML = this.params.emptyMessage;\n        this.addElementClasses(eMessage, 'empty-message');\n        this.eColumnDropList.appendChild(eMessage);\n    };\n    BaseDropZonePanel.prototype.addArrow = function (eParent) {\n        // only add the arrows if the layout is horizontal\n        if (this.horizontal) {\n            // for RTL it's a left arrow, otherwise it's a right arrow\n            var enableRtl = this.beans.gridOptionsWrapper.isEnableRtl();\n            var icon = _.createIconNoSpan(enableRtl ? 'smallLeft' : 'smallRight', this.beans.gridOptionsWrapper);\n            this.addElementClasses(icon, 'cell-separator');\n            eParent.appendChild(icon);\n        }\n    };\n    BaseDropZonePanel.STATE_NOT_DRAGGING = 'notDragging';\n    BaseDropZonePanel.STATE_NEW_COLUMNS_IN = 'newColumnsIn';\n    BaseDropZonePanel.STATE_REARRANGE_COLUMNS = 'rearrangeColumns';\n    return BaseDropZonePanel;\n}(Component));\nexport { BaseDropZonePanel };\n"]},"metadata":{},"sourceType":"module"}