{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Autowired, Bean, BeanStub, Component, ModuleNames, ModuleRegistry, PostConstruct, Optional, _ } from \"@ag-grid-community/core\";\nimport { MenuItemComponent } from \"./menuItemComponent\";\nimport { MenuList } from \"./menuList\";\n\nvar ContextMenuFactory =\n/** @class */\nfunction (_super) {\n  __extends(ContextMenuFactory, _super);\n\n  function ContextMenuFactory() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ContextMenuFactory.prototype.hideActiveMenu = function () {\n    this.destroyBean(this.activeMenu);\n  };\n\n  ContextMenuFactory.prototype.getMenuItems = function (node, column, value) {\n    var defaultMenuOptions = [];\n\n    if (_.exists(node) && ModuleRegistry.isRegistered(ModuleNames.ClipboardModule)) {\n      if (column) {\n        // only makes sense if column exists, could have originated from a row\n        defaultMenuOptions.push('copy', 'copyWithHeaders', 'paste', 'separator');\n      }\n    }\n\n    if (this.gridOptionsWrapper.isEnableCharts() && ModuleRegistry.isRegistered(ModuleNames.RangeSelectionModule) && ModuleRegistry.isRegistered(ModuleNames.GridChartsModule)) {\n      if (this.columnController.isPivotMode()) {\n        defaultMenuOptions.push('pivotChart');\n      }\n\n      if (this.rangeController && !this.rangeController.isEmpty()) {\n        defaultMenuOptions.push('chartRange');\n      }\n    }\n\n    if (_.exists(node)) {\n      // if user clicks a cell\n      var csvModuleMissing = !ModuleRegistry.isRegistered(ModuleNames.CsvExportModule);\n      var excelModuleMissing = !ModuleRegistry.isRegistered(ModuleNames.ExcelExportModule);\n      var suppressExcel = this.gridOptionsWrapper.isSuppressExcelExport() || excelModuleMissing;\n      var suppressCsv = this.gridOptionsWrapper.isSuppressCsvExport() || csvModuleMissing;\n\n      var onIPad = _.isIOSUserAgent();\n\n      var anyExport = !onIPad && (!suppressExcel || !suppressCsv);\n\n      if (anyExport) {\n        defaultMenuOptions.push('export');\n      }\n    }\n\n    if (this.gridOptionsWrapper.getContextMenuItemsFunc()) {\n      var userFunc = this.gridOptionsWrapper.getContextMenuItemsFunc();\n      var params = {\n        node: node,\n        column: column,\n        value: value,\n        defaultItems: defaultMenuOptions.length ? defaultMenuOptions : undefined,\n        api: this.gridOptionsWrapper.getApi(),\n        columnApi: this.gridOptionsWrapper.getColumnApi(),\n        context: this.gridOptionsWrapper.getContext()\n      };\n      return userFunc ? userFunc(params) : undefined;\n    }\n\n    return defaultMenuOptions;\n  };\n\n  ContextMenuFactory.prototype.showMenu = function (node, column, value, mouseEvent) {\n    var _this = this;\n\n    var menuItems = this.getMenuItems(node, column, value);\n\n    if (menuItems === undefined || _.missingOrEmpty(menuItems)) {\n      return false;\n    }\n\n    var menu = new ContextMenu(menuItems);\n    this.createBean(menu);\n    var eMenuGui = menu.getGui(); // need to show filter before positioning, as only after filter\n    // is visible can we find out what the width of it is\n\n    var hidePopup = this.popupService.addAsModalPopup(eMenuGui, true, function () {\n      return _this.destroyBean(menu);\n    }, mouseEvent);\n    this.popupService.positionPopupUnderMouseEvent({\n      column: column,\n      rowNode: node,\n      type: 'contextMenu',\n      mouseEvent: mouseEvent,\n      ePopup: eMenuGui,\n      // move one pixel away so that accidentally double clicking\n      // won't show the browser's contextmenu\n      nudgeX: 1,\n      nudgeY: 1\n    });\n    menu.afterGuiAttached({\n      hidePopup: hidePopup\n    });\n    this.activeMenu = menu;\n    menu.addEventListener(BeanStub.EVENT_DESTROYED, function () {\n      if (_this.activeMenu === menu) {\n        _this.activeMenu = null;\n      }\n    });\n    return true;\n  };\n\n  __decorate([Autowired('popupService')], ContextMenuFactory.prototype, \"popupService\", void 0);\n\n  __decorate([Autowired('gridOptionsWrapper')], ContextMenuFactory.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([Optional('rangeController')], ContextMenuFactory.prototype, \"rangeController\", void 0);\n\n  __decorate([Autowired('columnController')], ContextMenuFactory.prototype, \"columnController\", void 0);\n\n  ContextMenuFactory = __decorate([Bean('contextMenuFactory')], ContextMenuFactory);\n  return ContextMenuFactory;\n}(BeanStub);\n\nexport { ContextMenuFactory };\n\nvar ContextMenu =\n/** @class */\nfunction (_super) {\n  __extends(ContextMenu, _super);\n\n  function ContextMenu(menuItems) {\n    var _this = _super.call(this, '<div class=\"ag-menu\"></div>') || this;\n\n    _this.menuList = null;\n    _this.focusedCell = null;\n    _this.menuItems = menuItems;\n    return _this;\n  }\n\n  ContextMenu.prototype.addMenuItems = function () {\n    var menuList = new MenuList();\n    this.getContext().createBean(menuList);\n    var menuItemsMapped = this.menuItemMapper.mapWithStockItems(this.menuItems, null);\n    menuList.addMenuItems(menuItemsMapped);\n    this.appendChild(menuList);\n    this.menuList = menuList;\n    menuList.addEventListener(MenuItemComponent.EVENT_ITEM_SELECTED, this.destroy.bind(this));\n  };\n\n  ContextMenu.prototype.afterGuiAttached = function (params) {\n    if (params.hidePopup) {\n      this.addDestroyFunc(params.hidePopup);\n    }\n\n    this.focusedCell = this.focusController.getFocusedCell();\n\n    if (this.menuList) {\n      this.focusController.focusFirstFocusableElement(this.menuList.getGui());\n    } // if the body scrolls, we want to hide the menu, as the menu will not appear in the right location anymore\n\n\n    this.addManagedListener(this.eventService, 'bodyScroll', this.destroy.bind(this));\n  };\n\n  ContextMenu.prototype.destroy = function () {\n    var currentFocusedCell = this.focusController.getFocusedCell();\n\n    if (currentFocusedCell && this.focusedCell && this.cellPositionUtils.equals(currentFocusedCell, this.focusedCell)) {\n      var _a = this.focusedCell,\n          rowIndex = _a.rowIndex,\n          rowPinned = _a.rowPinned,\n          column = _a.column;\n      this.focusController.setFocusedCell(rowIndex, column, rowPinned, true);\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  __decorate([Autowired('menuItemMapper')], ContextMenu.prototype, \"menuItemMapper\", void 0);\n\n  __decorate([Autowired('focusController')], ContextMenu.prototype, \"focusController\", void 0);\n\n  __decorate([Autowired('cellPositionUtils')], ContextMenu.prototype, \"cellPositionUtils\", void 0);\n\n  __decorate([PostConstruct], ContextMenu.prototype, \"addMenuItems\", null);\n\n  return ContextMenu;\n}(Component);","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/@ag-grid-enterprise/menu/dist/es6/menu/contextMenu.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Autowired","Bean","BeanStub","Component","ModuleNames","ModuleRegistry","PostConstruct","Optional","_","MenuItemComponent","MenuList","ContextMenuFactory","_super","apply","hideActiveMenu","destroyBean","activeMenu","getMenuItems","node","column","value","defaultMenuOptions","exists","isRegistered","ClipboardModule","push","gridOptionsWrapper","isEnableCharts","RangeSelectionModule","GridChartsModule","columnController","isPivotMode","rangeController","isEmpty","csvModuleMissing","CsvExportModule","excelModuleMissing","ExcelExportModule","suppressExcel","isSuppressExcelExport","suppressCsv","isSuppressCsvExport","onIPad","isIOSUserAgent","anyExport","getContextMenuItemsFunc","userFunc","params","defaultItems","undefined","api","getApi","columnApi","getColumnApi","context","getContext","showMenu","mouseEvent","_this","menuItems","missingOrEmpty","menu","ContextMenu","createBean","eMenuGui","getGui","hidePopup","popupService","addAsModalPopup","positionPopupUnderMouseEvent","rowNode","type","ePopup","nudgeX","nudgeY","afterGuiAttached","addEventListener","EVENT_DESTROYED","call","menuList","focusedCell","addMenuItems","menuItemsMapped","menuItemMapper","mapWithStockItems","appendChild","EVENT_ITEM_SELECTED","destroy","bind","addDestroyFunc","focusController","getFocusedCell","focusFirstFocusableElement","addManagedListener","eventService","currentFocusedCell","cellPositionUtils","equals","_a","rowIndex","rowPinned","setFocusedCell"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Autowired, Bean, BeanStub, Component, ModuleNames, ModuleRegistry, PostConstruct, Optional, _ } from \"@ag-grid-community/core\";\nimport { MenuItemComponent } from \"./menuItemComponent\";\nimport { MenuList } from \"./menuList\";\nvar ContextMenuFactory = /** @class */ (function (_super) {\n    __extends(ContextMenuFactory, _super);\n    function ContextMenuFactory() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ContextMenuFactory.prototype.hideActiveMenu = function () {\n        this.destroyBean(this.activeMenu);\n    };\n    ContextMenuFactory.prototype.getMenuItems = function (node, column, value) {\n        var defaultMenuOptions = [];\n        if (_.exists(node) && ModuleRegistry.isRegistered(ModuleNames.ClipboardModule)) {\n            if (column) {\n                // only makes sense if column exists, could have originated from a row\n                defaultMenuOptions.push('copy', 'copyWithHeaders', 'paste', 'separator');\n            }\n        }\n        if (this.gridOptionsWrapper.isEnableCharts() &&\n            ModuleRegistry.isRegistered(ModuleNames.RangeSelectionModule) &&\n            ModuleRegistry.isRegistered(ModuleNames.GridChartsModule)) {\n            if (this.columnController.isPivotMode()) {\n                defaultMenuOptions.push('pivotChart');\n            }\n            if (this.rangeController && !this.rangeController.isEmpty()) {\n                defaultMenuOptions.push('chartRange');\n            }\n        }\n        if (_.exists(node)) {\n            // if user clicks a cell\n            var csvModuleMissing = !ModuleRegistry.isRegistered(ModuleNames.CsvExportModule);\n            var excelModuleMissing = !ModuleRegistry.isRegistered(ModuleNames.ExcelExportModule);\n            var suppressExcel = this.gridOptionsWrapper.isSuppressExcelExport() || excelModuleMissing;\n            var suppressCsv = this.gridOptionsWrapper.isSuppressCsvExport() || csvModuleMissing;\n            var onIPad = _.isIOSUserAgent();\n            var anyExport = !onIPad && (!suppressExcel || !suppressCsv);\n            if (anyExport) {\n                defaultMenuOptions.push('export');\n            }\n        }\n        if (this.gridOptionsWrapper.getContextMenuItemsFunc()) {\n            var userFunc = this.gridOptionsWrapper.getContextMenuItemsFunc();\n            var params = {\n                node: node,\n                column: column,\n                value: value,\n                defaultItems: defaultMenuOptions.length ? defaultMenuOptions : undefined,\n                api: this.gridOptionsWrapper.getApi(),\n                columnApi: this.gridOptionsWrapper.getColumnApi(),\n                context: this.gridOptionsWrapper.getContext()\n            };\n            return userFunc ? userFunc(params) : undefined;\n        }\n        return defaultMenuOptions;\n    };\n    ContextMenuFactory.prototype.showMenu = function (node, column, value, mouseEvent) {\n        var _this = this;\n        var menuItems = this.getMenuItems(node, column, value);\n        if (menuItems === undefined || _.missingOrEmpty(menuItems)) {\n            return false;\n        }\n        var menu = new ContextMenu(menuItems);\n        this.createBean(menu);\n        var eMenuGui = menu.getGui();\n        // need to show filter before positioning, as only after filter\n        // is visible can we find out what the width of it is\n        var hidePopup = this.popupService.addAsModalPopup(eMenuGui, true, function () { return _this.destroyBean(menu); }, mouseEvent);\n        this.popupService.positionPopupUnderMouseEvent({\n            column: column,\n            rowNode: node,\n            type: 'contextMenu',\n            mouseEvent: mouseEvent,\n            ePopup: eMenuGui,\n            // move one pixel away so that accidentally double clicking\n            // won't show the browser's contextmenu\n            nudgeX: 1,\n            nudgeY: 1\n        });\n        menu.afterGuiAttached({\n            hidePopup: hidePopup\n        });\n        this.activeMenu = menu;\n        menu.addEventListener(BeanStub.EVENT_DESTROYED, function () {\n            if (_this.activeMenu === menu) {\n                _this.activeMenu = null;\n            }\n        });\n        return true;\n    };\n    __decorate([\n        Autowired('popupService')\n    ], ContextMenuFactory.prototype, \"popupService\", void 0);\n    __decorate([\n        Autowired('gridOptionsWrapper')\n    ], ContextMenuFactory.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate([\n        Optional('rangeController')\n    ], ContextMenuFactory.prototype, \"rangeController\", void 0);\n    __decorate([\n        Autowired('columnController')\n    ], ContextMenuFactory.prototype, \"columnController\", void 0);\n    ContextMenuFactory = __decorate([\n        Bean('contextMenuFactory')\n    ], ContextMenuFactory);\n    return ContextMenuFactory;\n}(BeanStub));\nexport { ContextMenuFactory };\nvar ContextMenu = /** @class */ (function (_super) {\n    __extends(ContextMenu, _super);\n    function ContextMenu(menuItems) {\n        var _this = _super.call(this, '<div class=\"ag-menu\"></div>') || this;\n        _this.menuList = null;\n        _this.focusedCell = null;\n        _this.menuItems = menuItems;\n        return _this;\n    }\n    ContextMenu.prototype.addMenuItems = function () {\n        var menuList = new MenuList();\n        this.getContext().createBean(menuList);\n        var menuItemsMapped = this.menuItemMapper.mapWithStockItems(this.menuItems, null);\n        menuList.addMenuItems(menuItemsMapped);\n        this.appendChild(menuList);\n        this.menuList = menuList;\n        menuList.addEventListener(MenuItemComponent.EVENT_ITEM_SELECTED, this.destroy.bind(this));\n    };\n    ContextMenu.prototype.afterGuiAttached = function (params) {\n        if (params.hidePopup) {\n            this.addDestroyFunc(params.hidePopup);\n        }\n        this.focusedCell = this.focusController.getFocusedCell();\n        if (this.menuList) {\n            this.focusController.focusFirstFocusableElement(this.menuList.getGui());\n        }\n        // if the body scrolls, we want to hide the menu, as the menu will not appear in the right location anymore\n        this.addManagedListener(this.eventService, 'bodyScroll', this.destroy.bind(this));\n    };\n    ContextMenu.prototype.destroy = function () {\n        var currentFocusedCell = this.focusController.getFocusedCell();\n        if (currentFocusedCell && this.focusedCell && this.cellPositionUtils.equals(currentFocusedCell, this.focusedCell)) {\n            var _a = this.focusedCell, rowIndex = _a.rowIndex, rowPinned = _a.rowPinned, column = _a.column;\n            this.focusController.setFocusedCell(rowIndex, column, rowPinned, true);\n        }\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Autowired('menuItemMapper')\n    ], ContextMenu.prototype, \"menuItemMapper\", void 0);\n    __decorate([\n        Autowired('focusController')\n    ], ContextMenu.prototype, \"focusController\", void 0);\n    __decorate([\n        Autowired('cellPositionUtils')\n    ], ContextMenu.prototype, \"cellPositionUtils\", void 0);\n    __decorate([\n        PostConstruct\n    ], ContextMenu.prototype, \"addMenuItems\", null);\n    return ContextMenu;\n}(Component));\n"]},"metadata":{},"sourceType":"module"}