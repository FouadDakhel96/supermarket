{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nimport { Bean } from \"./context/context\";\nimport { Qualifier } from \"./context/context\";\n\nvar EventService =\n/** @class */\nfunction () {\n  function EventService() {\n    this.allSyncListeners = new Map();\n    this.allAsyncListeners = new Map();\n    this.globalSyncListeners = new Set();\n    this.globalAsyncListeners = new Set();\n    this.asyncFunctionsQueue = [];\n    this.scheduled = false; // using an object performs better than a Set for the number of different events we have\n\n    this.firedEvents = {};\n  } // because this class is used both inside the context and outside the context, we do not\n  // use autowired attributes, as that would be confusing, as sometimes the attributes\n  // would be wired, and sometimes not.\n  //\n  // the global event servers used by ag-Grid is autowired by the context once, and this\n  // setBeans method gets called once.\n  //\n  // the times when this class is used outside of the context (eg RowNode has an instance of this\n  // class) then it is not a bean, and this setBeans method is not called.\n\n\n  EventService.prototype.setBeans = function (loggerFactory, gridOptionsWrapper, globalEventListener) {\n    if (globalEventListener === void 0) {\n      globalEventListener = null;\n    }\n\n    this.logger = loggerFactory.create('EventService');\n\n    if (globalEventListener) {\n      var async = gridOptionsWrapper.useAsyncEvents();\n      this.addGlobalListener(globalEventListener, async);\n    }\n  };\n\n  EventService.prototype.getListeners = function (eventType, async) {\n    var listenerMap = async ? this.allAsyncListeners : this.allSyncListeners;\n    var listeners = listenerMap.get(eventType);\n\n    if (!listeners) {\n      listeners = new Set();\n      listenerMap.set(eventType, listeners);\n    }\n\n    return listeners;\n  };\n\n  EventService.prototype.addEventListener = function (eventType, listener, async) {\n    if (async === void 0) {\n      async = false;\n    }\n\n    this.getListeners(eventType, async).add(listener);\n  };\n\n  EventService.prototype.removeEventListener = function (eventType, listener, async) {\n    if (async === void 0) {\n      async = false;\n    }\n\n    this.getListeners(eventType, async).delete(listener);\n  };\n\n  EventService.prototype.addGlobalListener = function (listener, async) {\n    if (async === void 0) {\n      async = false;\n    }\n\n    (async ? this.globalAsyncListeners : this.globalSyncListeners).add(listener);\n  };\n\n  EventService.prototype.removeGlobalListener = function (listener, async) {\n    if (async === void 0) {\n      async = false;\n    }\n\n    (async ? this.globalAsyncListeners : this.globalSyncListeners).delete(listener);\n  };\n\n  EventService.prototype.dispatchEvent = function (event) {\n    this.dispatchToListeners(event, true);\n    this.dispatchToListeners(event, false);\n    this.firedEvents[event.type] = true;\n  };\n\n  EventService.prototype.dispatchEventOnce = function (event) {\n    if (!this.firedEvents[event.type]) {\n      this.dispatchEvent(event);\n    }\n  };\n\n  EventService.prototype.dispatchToListeners = function (event, async) {\n    var _this = this;\n\n    var eventType = event.type;\n\n    var processEventListeners = function processEventListeners(listeners) {\n      return listeners.forEach(function (listener) {\n        if (async) {\n          _this.dispatchAsync(function () {\n            return listener(event);\n          });\n        } else {\n          listener(event);\n        }\n      });\n    };\n\n    processEventListeners(this.getListeners(eventType, async));\n    var globalListeners = async ? this.globalAsyncListeners : this.globalSyncListeners;\n    globalListeners.forEach(function (listener) {\n      if (async) {\n        _this.dispatchAsync(function () {\n          return listener(eventType, event);\n        });\n      } else {\n        listener(eventType, event);\n      }\n    });\n  }; // this gets called inside the grid's thread, for each event that it\n  // wants to set async. the grid then batches the events into one setTimeout()\n  // because setTimeout() is an expensive operation. ideally we would have\n  // each event in it's own setTimeout(), but we batch for performance.\n\n\n  EventService.prototype.dispatchAsync = function (func) {\n    // add to the queue for executing later in the next VM turn\n    this.asyncFunctionsQueue.push(func); // check if timeout is already scheduled. the first time the grid calls\n    // this within it's thread turn, this should be false, so it will schedule\n    // the 'flush queue' method the first time it comes here. then the flag is\n    // set to 'true' so it will know it's already scheduled for subsequent calls.\n\n    if (!this.scheduled) {\n      // if not scheduled, schedule one\n      window.setTimeout(this.flushAsyncQueue.bind(this), 0); // mark that it is scheduled\n\n      this.scheduled = true;\n    }\n  }; // this happens in the next VM turn only, and empties the queue of events\n\n\n  EventService.prototype.flushAsyncQueue = function () {\n    this.scheduled = false; // we take a copy, because the event listener could be using\n    // the grid, which would cause more events, which would be potentially\n    // added to the queue, so safe to take a copy, the new events will\n    // get executed in a later VM turn rather than risk updating the\n    // queue as we are flushing it.\n\n    var queueCopy = this.asyncFunctionsQueue.slice();\n    this.asyncFunctionsQueue = []; // execute the queue\n\n    queueCopy.forEach(function (func) {\n      return func();\n    });\n  };\n\n  __decorate([__param(0, Qualifier('loggerFactory')), __param(1, Qualifier('gridOptionsWrapper')), __param(2, Qualifier('globalEventListener'))], EventService.prototype, \"setBeans\", null);\n\n  EventService = __decorate([Bean('eventService')], EventService);\n  return EventService;\n}();\n\nexport { EventService };","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/@ag-grid-community/core/dist/es6/eventService.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","Bean","Qualifier","EventService","allSyncListeners","Map","allAsyncListeners","globalSyncListeners","Set","globalAsyncListeners","asyncFunctionsQueue","scheduled","firedEvents","prototype","setBeans","loggerFactory","gridOptionsWrapper","globalEventListener","logger","create","async","useAsyncEvents","addGlobalListener","getListeners","eventType","listenerMap","listeners","get","set","addEventListener","listener","add","removeEventListener","delete","removeGlobalListener","dispatchEvent","event","dispatchToListeners","type","dispatchEventOnce","_this","processEventListeners","forEach","dispatchAsync","globalListeners","func","push","window","setTimeout","flushAsyncQueue","bind","queueCopy","slice"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Bean } from \"./context/context\";\nimport { Qualifier } from \"./context/context\";\nvar EventService = /** @class */ (function () {\n    function EventService() {\n        this.allSyncListeners = new Map();\n        this.allAsyncListeners = new Map();\n        this.globalSyncListeners = new Set();\n        this.globalAsyncListeners = new Set();\n        this.asyncFunctionsQueue = [];\n        this.scheduled = false;\n        // using an object performs better than a Set for the number of different events we have\n        this.firedEvents = {};\n    }\n    // because this class is used both inside the context and outside the context, we do not\n    // use autowired attributes, as that would be confusing, as sometimes the attributes\n    // would be wired, and sometimes not.\n    //\n    // the global event servers used by ag-Grid is autowired by the context once, and this\n    // setBeans method gets called once.\n    //\n    // the times when this class is used outside of the context (eg RowNode has an instance of this\n    // class) then it is not a bean, and this setBeans method is not called.\n    EventService.prototype.setBeans = function (loggerFactory, gridOptionsWrapper, globalEventListener) {\n        if (globalEventListener === void 0) { globalEventListener = null; }\n        this.logger = loggerFactory.create('EventService');\n        if (globalEventListener) {\n            var async = gridOptionsWrapper.useAsyncEvents();\n            this.addGlobalListener(globalEventListener, async);\n        }\n    };\n    EventService.prototype.getListeners = function (eventType, async) {\n        var listenerMap = async ? this.allAsyncListeners : this.allSyncListeners;\n        var listeners = listenerMap.get(eventType);\n        if (!listeners) {\n            listeners = new Set();\n            listenerMap.set(eventType, listeners);\n        }\n        return listeners;\n    };\n    EventService.prototype.addEventListener = function (eventType, listener, async) {\n        if (async === void 0) { async = false; }\n        this.getListeners(eventType, async).add(listener);\n    };\n    EventService.prototype.removeEventListener = function (eventType, listener, async) {\n        if (async === void 0) { async = false; }\n        this.getListeners(eventType, async).delete(listener);\n    };\n    EventService.prototype.addGlobalListener = function (listener, async) {\n        if (async === void 0) { async = false; }\n        (async ? this.globalAsyncListeners : this.globalSyncListeners).add(listener);\n    };\n    EventService.prototype.removeGlobalListener = function (listener, async) {\n        if (async === void 0) { async = false; }\n        (async ? this.globalAsyncListeners : this.globalSyncListeners).delete(listener);\n    };\n    EventService.prototype.dispatchEvent = function (event) {\n        this.dispatchToListeners(event, true);\n        this.dispatchToListeners(event, false);\n        this.firedEvents[event.type] = true;\n    };\n    EventService.prototype.dispatchEventOnce = function (event) {\n        if (!this.firedEvents[event.type]) {\n            this.dispatchEvent(event);\n        }\n    };\n    EventService.prototype.dispatchToListeners = function (event, async) {\n        var _this = this;\n        var eventType = event.type;\n        var processEventListeners = function (listeners) { return listeners.forEach(function (listener) {\n            if (async) {\n                _this.dispatchAsync(function () { return listener(event); });\n            }\n            else {\n                listener(event);\n            }\n        }); };\n        processEventListeners(this.getListeners(eventType, async));\n        var globalListeners = async ? this.globalAsyncListeners : this.globalSyncListeners;\n        globalListeners.forEach(function (listener) {\n            if (async) {\n                _this.dispatchAsync(function () { return listener(eventType, event); });\n            }\n            else {\n                listener(eventType, event);\n            }\n        });\n    };\n    // this gets called inside the grid's thread, for each event that it\n    // wants to set async. the grid then batches the events into one setTimeout()\n    // because setTimeout() is an expensive operation. ideally we would have\n    // each event in it's own setTimeout(), but we batch for performance.\n    EventService.prototype.dispatchAsync = function (func) {\n        // add to the queue for executing later in the next VM turn\n        this.asyncFunctionsQueue.push(func);\n        // check if timeout is already scheduled. the first time the grid calls\n        // this within it's thread turn, this should be false, so it will schedule\n        // the 'flush queue' method the first time it comes here. then the flag is\n        // set to 'true' so it will know it's already scheduled for subsequent calls.\n        if (!this.scheduled) {\n            // if not scheduled, schedule one\n            window.setTimeout(this.flushAsyncQueue.bind(this), 0);\n            // mark that it is scheduled\n            this.scheduled = true;\n        }\n    };\n    // this happens in the next VM turn only, and empties the queue of events\n    EventService.prototype.flushAsyncQueue = function () {\n        this.scheduled = false;\n        // we take a copy, because the event listener could be using\n        // the grid, which would cause more events, which would be potentially\n        // added to the queue, so safe to take a copy, the new events will\n        // get executed in a later VM turn rather than risk updating the\n        // queue as we are flushing it.\n        var queueCopy = this.asyncFunctionsQueue.slice();\n        this.asyncFunctionsQueue = [];\n        // execute the queue\n        queueCopy.forEach(function (func) { return func(); });\n    };\n    __decorate([\n        __param(0, Qualifier('loggerFactory')),\n        __param(1, Qualifier('gridOptionsWrapper')),\n        __param(2, Qualifier('globalEventListener'))\n    ], EventService.prototype, \"setBeans\", null);\n    EventService = __decorate([\n        Bean('eventService')\n    ], EventService);\n    return EventService;\n}());\nexport { EventService };\n"]},"metadata":{},"sourceType":"module"}