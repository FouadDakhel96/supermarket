{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Scene } from \"../scene/scene\";\nimport { Group } from \"../scene/group\";\nimport { Padding } from \"../util/padding\";\nimport { Shape } from \"../scene/shape/shape\";\nimport { Rect } from \"../scene/shape/rect\";\nimport { Legend } from \"./legend\";\nimport { find } from \"../util/array\";\nimport { SizeMonitor } from \"../util/sizeMonitor\";\nimport { Observable, reactive } from \"../util/observable\";\nimport { CartesianSeries } from \"./series/cartesian/cartesianSeries\";\nimport { createId } from \"../util/id\";\nvar defaultTooltipCss = \"\\n.ag-chart-tooltip {\\n    display: none;\\n    position: absolute;\\n    user-select: none;\\n    pointer-events: none;\\n    white-space: nowrap;\\n    z-index: 99999;\\n    font: 12px Verdana, sans-serif;\\n    color: black;\\n    background: rgb(244, 244, 244);\\n    border-radius: 5px;\\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\\n}\\n\\n.ag-chart-tooltip-visible {\\n    display: table;\\n}\\n\\n.ag-chart-tooltip-title {\\n    font-weight: bold;\\n    padding: 7px;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n    color: white;\\n    background-color: #888888;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-content {\\n    padding: 7px;\\n    line-height: 1.7em;\\n    border-bottom-left-radius: 5px;\\n    border-bottom-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-arrow::before {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 6px solid #989898;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: #989898;\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-tooltip-arrow::after {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 5px solid black;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: rgb(244, 244, 244);\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\";\n\nvar Chart =\n/** @class */\nfunction (_super) {\n  __extends(Chart, _super);\n\n  function Chart(document) {\n    if (document === void 0) {\n      document = window.document;\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.id = createId(_this);\n    _this.background = new Rect();\n    _this.legend = new Legend();\n    _this.legendAutoPadding = new Padding();\n    _this.captionAutoPadding = 0; // top padding only\n\n    _this._container = undefined;\n    _this._data = [];\n    _this._autoSize = false;\n    _this.padding = new Padding(20);\n    _this._axes = [];\n    _this._series = [];\n    _this._axesChanged = false;\n    _this._seriesChanged = false;\n    _this.layoutCallbackId = 0;\n\n    _this._performLayout = function () {\n      _this.layoutCallbackId = 0;\n      _this.background.width = _this.width;\n      _this.background.height = _this.height;\n\n      _this.performLayout();\n\n      if (!_this.layoutPending) {\n        _this.fireEvent({\n          type: 'layoutDone'\n        });\n      }\n    };\n\n    _this.dataCallbackId = 0;\n    _this._onMouseDown = _this.onMouseDown.bind(_this);\n    _this._onMouseUp = _this.onMouseUp.bind(_this);\n    _this._onMouseMove = _this.onMouseMove.bind(_this);\n    _this._onMouseOut = _this.onMouseOut.bind(_this);\n    _this._onClick = _this.onClick.bind(_this);\n    _this._tooltipClass = Chart.defaultTooltipClass;\n    /**\n     * If `true`, the tooltip will be shown for the marker closest to the mouse cursor.\n     * Only has effect on series with markers.\n     */\n\n    _this.tooltipTracking = true;\n    var root = new Group();\n    var background = _this.background;\n    background.fill = 'white';\n    root.appendChild(background);\n    var element = _this._element = document.createElement('div');\n    element.style.boxSizing = 'border-box';\n    element.style.overflow = 'hidden';\n    element.style.height = '100%';\n    var scene = new Scene(document);\n    _this.scene = scene;\n    scene.root = root;\n    scene.container = element;\n    _this.autoSize = true;\n    var legend = _this.legend;\n    legend.addEventListener('layoutChange', _this.onLayoutChange, _this);\n    legend.addPropertyListener('position', _this.onLegendPositionChange, _this);\n    _this.tooltipElement = document.createElement('div');\n    _this.tooltipClass = '';\n    document.body.appendChild(_this.tooltipElement);\n\n    if (Chart.tooltipDocuments.indexOf(document) < 0) {\n      var styleElement = document.createElement('style');\n      styleElement.innerHTML = defaultTooltipCss; // Make sure the default tooltip style goes before other styles so it can be overridden.\n\n      document.head.insertBefore(styleElement, document.head.querySelector('style'));\n      Chart.tooltipDocuments.push(document);\n    }\n\n    _this.setupDomListeners(scene.canvas.element);\n\n    _this.addPropertyListener('title', _this.onCaptionChange);\n\n    _this.addPropertyListener('subtitle', _this.onCaptionChange);\n\n    _this.addEventListener('layoutChange', function () {\n      return _this.layoutPending = true;\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(Chart.prototype, \"container\", {\n    get: function () {\n      return this._container;\n    },\n    set: function (value) {\n      if (this._container !== value) {\n        var parentNode = this.element.parentNode;\n\n        if (parentNode != null) {\n          parentNode.removeChild(this.element);\n        }\n\n        if (value) {\n          value.appendChild(this.element);\n        }\n\n        this._container = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"data\", {\n    get: function () {\n      return this._data;\n    },\n    set: function (data) {\n      this._data = data;\n      this.series.forEach(function (series) {\n        return series.data = data;\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"width\", {\n    get: function () {\n      return this.scene.width;\n    },\n    set: function (value) {\n      this.autoSize = false;\n\n      if (this.width !== value) {\n        this.scene.resize(value, this.height);\n        this.fireEvent({\n          type: 'layoutChange'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"height\", {\n    get: function () {\n      return this.scene.height;\n    },\n    set: function (value) {\n      this.autoSize = false;\n\n      if (this.height !== value) {\n        this.scene.resize(this.width, value);\n        this.fireEvent({\n          type: 'layoutChange'\n        });\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"autoSize\", {\n    get: function () {\n      return this._autoSize;\n    },\n    set: function (value) {\n      if (this._autoSize !== value) {\n        this._autoSize = value;\n\n        if (value) {\n          var chart_1 = this; // capture `this` for IE11\n\n          SizeMonitor.observe(this.element, function (size) {\n            if (size.width !== chart_1.width || size.height !== chart_1.height) {\n              chart_1.scene.resize(size.width, size.height);\n              chart_1.fireEvent({\n                type: 'layoutChange'\n              });\n            }\n          });\n          this.element.style.display = 'block';\n        } else {\n          SizeMonitor.unobserve(this.element);\n          this.element.style.display = 'inline-block';\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.download = function (fileName) {\n    this.scene.download(fileName);\n  };\n\n  Chart.prototype.destroy = function () {\n    var tooltipParent = this.tooltipElement.parentNode;\n\n    if (tooltipParent) {\n      tooltipParent.removeChild(this.tooltipElement);\n    }\n\n    SizeMonitor.unobserve(this.element);\n    this.container = undefined;\n    this.cleanupDomListeners(this.scene.canvas.element);\n    this.scene.container = undefined;\n  };\n\n  Chart.prototype.onLayoutChange = function () {\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.onLegendPositionChange = function () {\n    this.legendAutoPadding.clear();\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.onCaptionChange = function (event) {\n    var value = event.value,\n        oldValue = event.oldValue;\n\n    if (oldValue) {\n      oldValue.removeEventListener('change', this.onLayoutChange, this);\n      this.scene.root.removeChild(oldValue.node);\n    }\n\n    if (value) {\n      value.addEventListener('change', this.onLayoutChange, this);\n      this.scene.root.appendChild(value.node);\n    }\n  };\n\n  Object.defineProperty(Chart.prototype, \"element\", {\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"axes\", {\n    get: function () {\n      return this._axes;\n    },\n    set: function (values) {\n      var _this = this;\n\n      this._axes.forEach(function (axis) {\n        return _this.detachAxis(axis);\n      }); // make linked axes go after the regular ones (simulates stable sort by `linkedTo` property)\n\n\n      this._axes = values.filter(function (a) {\n        return !a.linkedTo;\n      }).concat(values.filter(function (a) {\n        return a.linkedTo;\n      }));\n\n      this._axes.forEach(function (axis) {\n        return _this.attachAxis(axis);\n      });\n\n      this.axesChanged = true;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.attachAxis = function (axis) {\n    this.scene.root.insertBefore(axis.group, this.seriesRoot);\n  };\n\n  Chart.prototype.detachAxis = function (axis) {\n    this.scene.root.removeChild(axis.group);\n  };\n\n  Object.defineProperty(Chart.prototype, \"series\", {\n    get: function () {\n      return this._series;\n    },\n    set: function (values) {\n      var _this = this;\n\n      this.removeAllSeries();\n      values.forEach(function (series) {\n        return _this.addSeries(series);\n      });\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.scheduleLayout = function () {\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.scheduleData = function () {\n    // To prevent the chart from thinking the cursor is over the same node\n    // after a change to data (the nodes are reused on data changes).\n    this.dehighlightDatum();\n    this.dataPending = true;\n  };\n\n  Chart.prototype.addSeries = function (series, before) {\n    var _a = this,\n        allSeries = _a.series,\n        seriesRoot = _a.seriesRoot;\n\n    var canAdd = allSeries.indexOf(series) < 0;\n\n    if (canAdd) {\n      var beforeIndex = before ? allSeries.indexOf(before) : -1;\n\n      if (beforeIndex >= 0) {\n        allSeries.splice(beforeIndex, 0, series);\n        seriesRoot.insertBefore(series.group, before.group);\n      } else {\n        allSeries.push(series);\n        seriesRoot.append(series.group);\n      }\n\n      this.initSeries(series);\n      this.seriesChanged = true;\n      this.axesChanged = true;\n      return true;\n    }\n\n    return false;\n  };\n\n  Chart.prototype.initSeries = function (series) {\n    series.chart = this;\n\n    if (!series.data) {\n      series.data = this.data;\n    }\n\n    series.addEventListener('layoutChange', this.scheduleLayout, this);\n    series.addEventListener('dataChange', this.scheduleData, this);\n    series.addEventListener('legendChange', this.updateLegend, this);\n    series.addEventListener('nodeClick', this.onSeriesNodeClick, this);\n  };\n\n  Chart.prototype.freeSeries = function (series) {\n    series.chart = undefined;\n    series.removeEventListener('layoutChange', this.scheduleLayout, this);\n    series.removeEventListener('dataChange', this.scheduleData, this);\n    series.removeEventListener('legendChange', this.updateLegend, this);\n    series.removeEventListener('nodeClick', this.onSeriesNodeClick, this);\n  };\n\n  Chart.prototype.addSeriesAfter = function (series, after) {\n    var _a = this,\n        allSeries = _a.series,\n        seriesRoot = _a.seriesRoot;\n\n    var canAdd = allSeries.indexOf(series) < 0;\n\n    if (canAdd) {\n      var afterIndex = after ? this.series.indexOf(after) : -1;\n\n      if (afterIndex >= 0) {\n        if (afterIndex + 1 < allSeries.length) {\n          seriesRoot.insertBefore(series.group, allSeries[afterIndex + 1].group);\n        } else {\n          seriesRoot.append(series.group);\n        }\n\n        this.initSeries(series);\n        allSeries.splice(afterIndex + 1, 0, series);\n      } else {\n        if (allSeries.length > 0) {\n          seriesRoot.insertBefore(series.group, allSeries[0].group);\n        } else {\n          seriesRoot.append(series.group);\n        }\n\n        this.initSeries(series);\n        allSeries.unshift(series);\n      }\n\n      this.seriesChanged = true;\n      this.axesChanged = true;\n    }\n\n    return false;\n  };\n\n  Chart.prototype.removeSeries = function (series) {\n    var index = this.series.indexOf(series);\n\n    if (index >= 0) {\n      this.series.splice(index, 1);\n      this.freeSeries(series);\n      this.seriesRoot.removeChild(series.group);\n      this.seriesChanged = true;\n      return true;\n    }\n\n    return false;\n  };\n\n  Chart.prototype.removeAllSeries = function () {\n    var _this = this;\n\n    this.series.forEach(function (series) {\n      _this.freeSeries(series);\n\n      _this.seriesRoot.removeChild(series.group);\n    });\n    this._series = []; // using `_series` instead of `series` to prevent infinite recursion\n\n    this.seriesChanged = true;\n  };\n\n  Chart.prototype.assignSeriesToAxes = function () {\n    var _this = this;\n\n    this.axes.forEach(function (axis) {\n      var axisName = axis.direction + 'Axis';\n      var boundSeries = [];\n\n      _this.series.forEach(function (series) {\n        if (series[axisName] === axis) {\n          boundSeries.push(series);\n        }\n      });\n\n      axis.boundSeries = boundSeries;\n    });\n    this.seriesChanged = false;\n  };\n\n  Chart.prototype.assignAxesToSeries = function (force) {\n    var _this = this;\n\n    if (force === void 0) {\n      force = false;\n    } // This method has to run before `assignSeriesToAxes`.\n\n\n    var directionToAxesMap = {};\n    this.axes.forEach(function (axis) {\n      var direction = axis.direction;\n      var directionAxes = directionToAxesMap[direction] || (directionToAxesMap[direction] = []);\n      directionAxes.push(axis);\n    });\n    this.series.forEach(function (series) {\n      series.directions.forEach(function (direction) {\n        var axisName = direction + 'Axis';\n\n        if (!series[axisName] || force) {\n          var directionAxes = directionToAxesMap[direction];\n\n          if (directionAxes) {\n            var axis = _this.findMatchingAxis(directionAxes, series.getKeys(direction));\n\n            if (axis) {\n              series[axisName] = axis;\n            }\n          }\n        }\n      });\n\n      if (series instanceof CartesianSeries) {\n        if (!series.xAxis) {\n          console.warn(\"Could not find a matching xAxis for the \" + series.id + \" series.\");\n          return;\n        }\n\n        if (!series.yAxis) {\n          console.warn(\"Could not find a matching yAxis for the \" + series.id + \" series.\");\n          return;\n        }\n      }\n    });\n    this.axesChanged = false;\n  };\n\n  Chart.prototype.findMatchingAxis = function (directionAxes, directionKeys) {\n    for (var i = 0; i < directionAxes.length; i++) {\n      var axis = directionAxes[i];\n      var axisKeys = axis.keys;\n\n      if (!axisKeys.length) {\n        return axis;\n      } else if (directionKeys) {\n        for (var j = 0; j < directionKeys.length; j++) {\n          if (axisKeys.indexOf(directionKeys[j]) >= 0) {\n            return axis;\n          }\n        }\n      }\n    }\n  };\n\n  Object.defineProperty(Chart.prototype, \"axesChanged\", {\n    get: function () {\n      return this._axesChanged;\n    },\n    set: function (value) {\n      this._axesChanged = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"seriesChanged\", {\n    get: function () {\n      return this._seriesChanged;\n    },\n    set: function (value) {\n      this._seriesChanged = value;\n\n      if (value) {\n        this.dataPending = true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"layoutPending\", {\n    /**\n     * Only `true` while we are waiting for the layout to start.\n     * This will be `false` if the layout has already started and is ongoing.\n     */\n    get: function () {\n      return !!this.layoutCallbackId;\n    },\n    set: function (value) {\n      if (value) {\n        if (!(this.layoutCallbackId || this.dataPending)) {\n          this.layoutCallbackId = requestAnimationFrame(this._performLayout);\n        }\n      } else if (this.layoutCallbackId) {\n        cancelAnimationFrame(this.layoutCallbackId);\n        this.layoutCallbackId = 0;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Chart.prototype, \"dataPending\", {\n    get: function () {\n      return !!this.dataCallbackId;\n    },\n    set: function (value) {\n      var _this = this;\n\n      if (this.dataCallbackId) {\n        clearTimeout(this.dataCallbackId);\n        this.dataCallbackId = 0;\n      }\n\n      if (value) {\n        this.dataCallbackId = window.setTimeout(function () {\n          _this.dataPending = false;\n\n          _this.processData();\n        }, 0);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.processData = function () {\n    this.layoutPending = false;\n\n    if (this.axesChanged) {\n      this.assignAxesToSeries(true);\n      this.assignSeriesToAxes();\n    }\n\n    if (this.seriesChanged) {\n      this.assignSeriesToAxes();\n    }\n\n    this.series.filter(function (s) {\n      return s.visible;\n    }).forEach(function (series) {\n      return series.processData();\n    });\n    this.updateLegend();\n    this.layoutPending = true;\n  };\n\n  Chart.prototype.updateLegend = function () {\n    var legendData = [];\n    this.series.filter(function (s) {\n      return s.showInLegend;\n    }).forEach(function (series) {\n      return series.listSeriesItems(legendData);\n    });\n    this.legend.data = legendData;\n  };\n\n  Chart.prototype.positionCaptions = function () {\n    var _a = this,\n        title = _a.title,\n        subtitle = _a.subtitle;\n\n    var titleVisible = false;\n    var subtitleVisible = false;\n    var spacing = 10;\n    var paddingTop = spacing;\n\n    if (title && title.enabled) {\n      title.node.x = this.width / 2;\n      title.node.y = paddingTop;\n      titleVisible = true;\n      var titleBBox = title.node.computeBBox(); // make sure to set node's x/y, then computeBBox\n\n      if (titleBBox) {\n        paddingTop = titleBBox.y + titleBBox.height;\n      }\n\n      if (subtitle && subtitle.enabled) {\n        subtitle.node.x = this.width / 2;\n        subtitle.node.y = paddingTop + spacing;\n        subtitleVisible = true;\n        var subtitleBBox = subtitle.node.computeBBox();\n\n        if (subtitleBBox) {\n          paddingTop = subtitleBBox.y + subtitleBBox.height;\n        }\n      }\n    }\n\n    if (title) {\n      title.node.visible = titleVisible;\n    }\n\n    if (subtitle) {\n      subtitle.node.visible = subtitleVisible;\n    }\n\n    this.captionAutoPadding = Math.floor(paddingTop);\n  };\n\n  Chart.prototype.positionLegend = function () {\n    if (!this.legend.enabled || !this.legend.data.length) {\n      return;\n    }\n\n    var _a = this,\n        legend = _a.legend,\n        captionAutoPadding = _a.captionAutoPadding,\n        legendAutoPadding = _a.legendAutoPadding;\n\n    var width = this.width;\n    var height = this.height - captionAutoPadding;\n    var legendGroup = legend.group;\n    var legendSpacing = legend.spacing;\n    var translationX = 0;\n    var translationY = 0;\n    var legendBBox;\n\n    switch (legend.position) {\n      case 'bottom':\n        legend.performLayout(width - legendSpacing * 2, 0);\n        legendBBox = legendGroup.computeBBox();\n        translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n        translationY = captionAutoPadding + height - legendBBox.height - legendBBox.y - legendSpacing;\n        legendAutoPadding.bottom = legendBBox.height;\n        break;\n\n      case 'top':\n        legend.performLayout(width - legendSpacing * 2, 0);\n        legendBBox = legendGroup.computeBBox();\n        translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n        translationY = captionAutoPadding + legendSpacing - legendBBox.y;\n        legendAutoPadding.top = legendBBox.height;\n        break;\n\n      case 'left':\n        legend.performLayout(0, height - legendSpacing * 2);\n        legendBBox = legendGroup.computeBBox();\n        translationX = legendSpacing - legendBBox.x;\n        translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n        legendAutoPadding.left = legendBBox.width;\n        break;\n\n      default:\n        // case 'right':\n        legend.performLayout(0, height - legendSpacing * 2);\n        legendBBox = legendGroup.computeBBox();\n        translationX = width - legendBBox.width - legendBBox.x - legendSpacing;\n        translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n        legendAutoPadding.right = legendBBox.width;\n        break;\n    } // Round off for pixel grid alignment to work properly.\n\n\n    legendGroup.translationX = Math.floor(translationX + legendGroup.translationX);\n    legendGroup.translationY = Math.floor(translationY + legendGroup.translationY);\n  };\n\n  Chart.prototype.setupDomListeners = function (chartElement) {\n    chartElement.addEventListener('mousedown', this._onMouseDown);\n    chartElement.addEventListener('mousemove', this._onMouseMove);\n    chartElement.addEventListener('mouseup', this._onMouseUp);\n    chartElement.addEventListener('mouseout', this._onMouseOut);\n    chartElement.addEventListener('click', this._onClick);\n  };\n\n  Chart.prototype.cleanupDomListeners = function (chartElement) {\n    chartElement.removeEventListener('mousedown', this._onMouseDown);\n    chartElement.removeEventListener('mousemove', this._onMouseMove);\n    chartElement.removeEventListener('mouseup', this._onMouseUp);\n    chartElement.removeEventListener('mouseout', this._onMouseOut);\n    chartElement.removeEventListener('click', this._onClick);\n  }; // x/y are local canvas coordinates in CSS pixels, not actual pixels\n\n\n  Chart.prototype.pickSeriesNode = function (x, y) {\n    if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n      return undefined;\n    }\n\n    var allSeries = this.series;\n    var node = undefined;\n\n    for (var i = allSeries.length - 1; i >= 0; i--) {\n      var series = allSeries[i];\n      node = series.group.pickNode(x, y);\n\n      if (node) {\n        return {\n          series: series,\n          node: node\n        };\n      }\n    }\n  }; // Provided x/y are in canvas coordinates.\n\n\n  Chart.prototype.pickClosestSeriesNodeDatum = function (x, y) {\n    if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n      return undefined;\n    }\n\n    var allSeries = this.series;\n\n    function getDistance(p1, p2) {\n      return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n    }\n\n    var minDistance = Infinity;\n    var closestDatum;\n\n    var _loop_1 = function (i) {\n      var series = allSeries[i];\n\n      if (!series.visible) {\n        return \"continue\";\n      }\n\n      var hitPoint = series.group.transformPoint(x, y);\n      series.getNodeData().forEach(function (datum) {\n        if (!datum.point) {\n          return;\n        }\n\n        var distance = getDistance(hitPoint, datum.point);\n\n        if (distance < minDistance) {\n          minDistance = distance;\n          closestDatum = datum;\n        }\n      });\n    };\n\n    for (var i = allSeries.length - 1; i >= 0; i--) {\n      _loop_1(i);\n    }\n\n    if (closestDatum) {\n      return closestDatum;\n    }\n  };\n\n  Chart.prototype.onMouseMove = function (event) {\n    var _a = this,\n        lastPick = _a.lastPick,\n        tooltipTracking = _a.tooltipTracking;\n\n    var pick = this.pickSeriesNode(event.offsetX, event.offsetY);\n    var nodeDatum;\n\n    if (pick && pick.node instanceof Shape) {\n      var node = pick.node;\n      nodeDatum = node.datum;\n\n      if (lastPick && lastPick.datum === nodeDatum) {\n        lastPick.node = node;\n      } // Marker nodes will have the `point` info in their datums.\n      // Highlight if not a marker node or, if not in the tracking mode, highlight markers too.\n\n\n      if (!node.datum.point || !tooltipTracking) {\n        if (!lastPick // cursor moved from empty space to a node\n        || lastPick.node !== node) {\n          // cursor moved from one node to another\n          this.onSeriesDatumPick(event, node.datum, node);\n        } else if (pick.series.tooltipEnabled) {\n          // cursor moved within the same node\n          this.showTooltip(event);\n        } // A non-marker node (takes precedence over marker nodes) was highlighted.\n        // Or we are not in the tracking mode.\n        // Either way, we are done at this point.\n\n\n        return;\n      }\n    }\n\n    var hideTooltip = false; // In tracking mode a tooltip is shown for the closest rendered datum.\n    // This makes it easier to show tooltips when markers are small and/or plentiful\n    // and also gives the ability to show tooltips even when the series were configured\n    // to not render markers.\n\n    if (tooltipTracking) {\n      var closestDatum = this.pickClosestSeriesNodeDatum(event.offsetX, event.offsetY);\n\n      if (closestDatum && closestDatum.point) {\n        var _b = closestDatum.point,\n            x = _b.x,\n            y = _b.y;\n        var canvas = this.scene.canvas;\n        var point = closestDatum.series.group.inverseTransformPoint(x, y);\n        var canvasRect = canvas.element.getBoundingClientRect();\n        this.onSeriesDatumPick({\n          pageX: Math.round(canvasRect.left + window.pageXOffset + point.x),\n          pageY: Math.round(canvasRect.top + window.pageYOffset + point.y)\n        }, closestDatum, nodeDatum === closestDatum ? pick.node : undefined);\n      } else {\n        hideTooltip = true;\n      }\n    }\n\n    if (lastPick && (hideTooltip || !tooltipTracking)) {\n      // cursor moved from a non-marker node to empty space\n      this.dehighlightDatum();\n      this.hideTooltip();\n      this.lastPick = undefined;\n    }\n  };\n\n  Chart.prototype.onMouseDown = function (event) {};\n\n  Chart.prototype.onMouseUp = function (event) {};\n\n  Chart.prototype.onMouseOut = function (event) {\n    this.toggleTooltip(false);\n  };\n\n  Chart.prototype.onClick = function (event) {\n    this.checkSeriesNodeClick();\n    this.checkLegendClick(event);\n  };\n\n  Chart.prototype.checkSeriesNodeClick = function () {\n    var lastPick = this.lastPick;\n\n    if (lastPick && lastPick.node) {\n      var datum = this.lastPick.datum;\n      datum.series.fireNodeClickEvent(datum);\n    }\n  };\n\n  Chart.prototype.onSeriesNodeClick = function (event) {\n    this.fireEvent(__assign(__assign({}, event), {\n      type: 'seriesNodeClick'\n    }));\n  };\n\n  Chart.prototype.checkLegendClick = function (event) {\n    var datum = this.legend.getDatumForPoint(event.offsetX, event.offsetY);\n\n    if (datum) {\n      var id_1 = datum.id,\n          itemId = datum.itemId,\n          enabled = datum.enabled;\n      var series = find(this.series, function (series) {\n        return series.id === id_1;\n      });\n\n      if (series) {\n        series.toggleSeriesItem(itemId, !enabled);\n\n        if (enabled) {\n          this.hideTooltip();\n        }\n      }\n    }\n  };\n\n  Chart.prototype.onSeriesDatumPick = function (meta, datum, node) {\n    if (this.lastPick) {\n      // this.lastPick.datum.series.dehighlightDatum();\n      this.dehighlightDatum();\n    }\n\n    this.lastPick = {\n      datum: datum,\n      node: node\n    };\n    this.highlightDatum(datum);\n    var html = datum.series.tooltipEnabled && datum.series.getTooltipHtml(datum);\n\n    if (html) {\n      this.showTooltip(meta, html);\n    }\n  };\n\n  Chart.prototype.highlightDatum = function (datum) {\n    this.highlightedDatum = datum;\n    this.series.forEach(function (s) {\n      return s.onHighlightChange();\n    });\n  };\n\n  Chart.prototype.dehighlightDatum = function () {\n    if (this.highlightedDatum) {\n      this.highlightedDatum = undefined;\n      this.series.forEach(function (s) {\n        return s.onHighlightChange();\n      });\n    }\n  };\n\n  Object.defineProperty(Chart.prototype, \"tooltipClass\", {\n    get: function () {\n      return this._tooltipClass;\n    },\n    set: function (value) {\n      if (this._tooltipClass !== value) {\n        this._tooltipClass = value;\n        this.toggleTooltip();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Chart.prototype.toggleTooltip = function (visible) {\n    if (!visible && this.lastPick) {\n      this.dehighlightDatum();\n      this.lastPick = undefined;\n    }\n\n    this.updateTooltipClass(visible);\n  };\n\n  Chart.prototype.updateTooltipClass = function (visible, constrained) {\n    var classList = [Chart.defaultTooltipClass, this.tooltipClass];\n\n    if (visible === true) {\n      classList.push(Chart.defaultTooltipClass + \"-visible\");\n    }\n\n    if (constrained !== true) {\n      classList.push(Chart.defaultTooltipClass + \"-arrow\");\n    }\n\n    this.tooltipElement.setAttribute('class', classList.join(' '));\n  };\n  /**\n   * Shows tooltip at the given event's coordinates.\n   * If the `html` parameter is missing, moves the existing tooltip to the new position.\n   */\n\n\n  Chart.prototype.showTooltip = function (meta, html) {\n    var el = this.tooltipElement;\n    var container = this.container;\n\n    if (html !== undefined) {\n      el.innerHTML = html;\n    } else if (!el.innerHTML) {\n      return;\n    }\n\n    if (html) {\n      this.toggleTooltip(true);\n    }\n\n    var left = meta.pageX - el.clientWidth / 2;\n    var top = meta.pageY - el.clientHeight - 8;\n\n    if (container) {\n      var tooltipRect = el.getBoundingClientRect();\n      var minLeft = 0;\n      var maxLeft = window.innerWidth - tooltipRect.width;\n\n      if (left < minLeft) {\n        left = minLeft;\n        this.updateTooltipClass(true, true);\n      } else if (left > maxLeft) {\n        left = maxLeft;\n        this.updateTooltipClass(true, true);\n      }\n    }\n\n    el.style.left = left + \"px\";\n    el.style.top = top + \"px\";\n  };\n\n  Chart.prototype.hideTooltip = function () {\n    this.toggleTooltip(false);\n  };\n\n  Chart.defaultTooltipClass = 'ag-chart-tooltip';\n  Chart.tooltipDocuments = [];\n\n  __decorate([reactive('layoutChange')], Chart.prototype, \"padding\", void 0);\n\n  __decorate([reactive('layoutChange')], Chart.prototype, \"title\", void 0);\n\n  __decorate([reactive('layoutChange')], Chart.prototype, \"subtitle\", void 0);\n\n  return Chart;\n}(Observable);\n\nexport { Chart };","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/ag-charts-community/dist/es6/chart/chart.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","Scene","Group","Padding","Shape","Rect","Legend","find","SizeMonitor","Observable","reactive","CartesianSeries","createId","defaultTooltipCss","Chart","_super","document","window","_this","id","background","legend","legendAutoPadding","captionAutoPadding","_container","undefined","_data","_autoSize","padding","_axes","_series","_axesChanged","_seriesChanged","layoutCallbackId","_performLayout","width","height","performLayout","layoutPending","fireEvent","type","dataCallbackId","_onMouseDown","onMouseDown","bind","_onMouseUp","onMouseUp","_onMouseMove","onMouseMove","_onMouseOut","onMouseOut","_onClick","onClick","_tooltipClass","defaultTooltipClass","tooltipTracking","root","fill","appendChild","element","_element","createElement","style","boxSizing","overflow","scene","container","autoSize","addEventListener","onLayoutChange","addPropertyListener","onLegendPositionChange","tooltipElement","tooltipClass","body","tooltipDocuments","indexOf","styleElement","innerHTML","head","insertBefore","querySelector","push","setupDomListeners","canvas","onCaptionChange","get","set","value","parentNode","removeChild","enumerable","configurable","data","series","forEach","resize","chart_1","observe","size","display","unobserve","download","fileName","destroy","tooltipParent","cleanupDomListeners","clear","event","oldValue","removeEventListener","node","values","axis","detachAxis","filter","a","linkedTo","concat","attachAxis","axesChanged","group","seriesRoot","removeAllSeries","addSeries","scheduleLayout","scheduleData","dehighlightDatum","dataPending","before","_a","allSeries","canAdd","beforeIndex","splice","append","initSeries","seriesChanged","chart","updateLegend","onSeriesNodeClick","freeSeries","addSeriesAfter","after","afterIndex","unshift","removeSeries","index","assignSeriesToAxes","axes","axisName","direction","boundSeries","assignAxesToSeries","force","directionToAxesMap","directionAxes","directions","findMatchingAxis","getKeys","xAxis","console","warn","yAxis","directionKeys","axisKeys","keys","j","requestAnimationFrame","cancelAnimationFrame","clearTimeout","setTimeout","processData","visible","legendData","showInLegend","listSeriesItems","positionCaptions","title","subtitle","titleVisible","subtitleVisible","spacing","paddingTop","enabled","x","y","titleBBox","computeBBox","subtitleBBox","Math","floor","positionLegend","legendGroup","legendSpacing","translationX","translationY","legendBBox","position","bottom","top","left","right","chartElement","pickSeriesNode","seriesRect","containsPoint","pickNode","pickClosestSeriesNodeDatum","getDistance","p1","p2","sqrt","pow","minDistance","Infinity","closestDatum","_loop_1","hitPoint","transformPoint","getNodeData","datum","point","distance","lastPick","pick","offsetX","offsetY","nodeDatum","onSeriesDatumPick","tooltipEnabled","showTooltip","hideTooltip","_b","inverseTransformPoint","canvasRect","getBoundingClientRect","pageX","round","pageXOffset","pageY","pageYOffset","toggleTooltip","checkSeriesNodeClick","checkLegendClick","fireNodeClickEvent","getDatumForPoint","id_1","itemId","toggleSeriesItem","meta","highlightDatum","html","getTooltipHtml","highlightedDatum","onHighlightChange","updateTooltipClass","constrained","classList","setAttribute","join","el","clientWidth","clientHeight","tooltipRect","minLeft","maxLeft","innerWidth"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Scene } from \"../scene/scene\";\nimport { Group } from \"../scene/group\";\nimport { Padding } from \"../util/padding\";\nimport { Shape } from \"../scene/shape/shape\";\nimport { Rect } from \"../scene/shape/rect\";\nimport { Legend } from \"./legend\";\nimport { find } from \"../util/array\";\nimport { SizeMonitor } from \"../util/sizeMonitor\";\nimport { Observable, reactive } from \"../util/observable\";\nimport { CartesianSeries } from \"./series/cartesian/cartesianSeries\";\nimport { createId } from \"../util/id\";\nvar defaultTooltipCss = \"\\n.ag-chart-tooltip {\\n    display: none;\\n    position: absolute;\\n    user-select: none;\\n    pointer-events: none;\\n    white-space: nowrap;\\n    z-index: 99999;\\n    font: 12px Verdana, sans-serif;\\n    color: black;\\n    background: rgb(244, 244, 244);\\n    border-radius: 5px;\\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\\n}\\n\\n.ag-chart-tooltip-visible {\\n    display: table;\\n}\\n\\n.ag-chart-tooltip-title {\\n    font-weight: bold;\\n    padding: 7px;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n    color: white;\\n    background-color: #888888;\\n    border-top-left-radius: 5px;\\n    border-top-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-content {\\n    padding: 7px;\\n    line-height: 1.7em;\\n    border-bottom-left-radius: 5px;\\n    border-bottom-right-radius: 5px;\\n}\\n\\n.ag-chart-tooltip-arrow::before {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 6px solid #989898;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: #989898;\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\\n.ag-chart-tooltip-arrow::after {\\n    content: \\\"\\\";\\n\\n    position: absolute;\\n    top: 100%;\\n    left: 50%;\\n    transform: translateX(-50%);\\n\\n    border: 5px solid black;\\n\\n    border-left-color: transparent;\\n    border-right-color: transparent;\\n    border-top-color: rgb(244, 244, 244);\\n    border-bottom-color: transparent;\\n\\n    width: 0;\\n    height: 0;\\n\\n    margin: 0 auto;\\n}\\n\";\nvar Chart = /** @class */ (function (_super) {\n    __extends(Chart, _super);\n    function Chart(document) {\n        if (document === void 0) { document = window.document; }\n        var _this = _super.call(this) || this;\n        _this.id = createId(_this);\n        _this.background = new Rect();\n        _this.legend = new Legend();\n        _this.legendAutoPadding = new Padding();\n        _this.captionAutoPadding = 0; // top padding only\n        _this._container = undefined;\n        _this._data = [];\n        _this._autoSize = false;\n        _this.padding = new Padding(20);\n        _this._axes = [];\n        _this._series = [];\n        _this._axesChanged = false;\n        _this._seriesChanged = false;\n        _this.layoutCallbackId = 0;\n        _this._performLayout = function () {\n            _this.layoutCallbackId = 0;\n            _this.background.width = _this.width;\n            _this.background.height = _this.height;\n            _this.performLayout();\n            if (!_this.layoutPending) {\n                _this.fireEvent({ type: 'layoutDone' });\n            }\n        };\n        _this.dataCallbackId = 0;\n        _this._onMouseDown = _this.onMouseDown.bind(_this);\n        _this._onMouseUp = _this.onMouseUp.bind(_this);\n        _this._onMouseMove = _this.onMouseMove.bind(_this);\n        _this._onMouseOut = _this.onMouseOut.bind(_this);\n        _this._onClick = _this.onClick.bind(_this);\n        _this._tooltipClass = Chart.defaultTooltipClass;\n        /**\n         * If `true`, the tooltip will be shown for the marker closest to the mouse cursor.\n         * Only has effect on series with markers.\n         */\n        _this.tooltipTracking = true;\n        var root = new Group();\n        var background = _this.background;\n        background.fill = 'white';\n        root.appendChild(background);\n        var element = _this._element = document.createElement('div');\n        element.style.boxSizing = 'border-box';\n        element.style.overflow = 'hidden';\n        element.style.height = '100%';\n        var scene = new Scene(document);\n        _this.scene = scene;\n        scene.root = root;\n        scene.container = element;\n        _this.autoSize = true;\n        var legend = _this.legend;\n        legend.addEventListener('layoutChange', _this.onLayoutChange, _this);\n        legend.addPropertyListener('position', _this.onLegendPositionChange, _this);\n        _this.tooltipElement = document.createElement('div');\n        _this.tooltipClass = '';\n        document.body.appendChild(_this.tooltipElement);\n        if (Chart.tooltipDocuments.indexOf(document) < 0) {\n            var styleElement = document.createElement('style');\n            styleElement.innerHTML = defaultTooltipCss;\n            // Make sure the default tooltip style goes before other styles so it can be overridden.\n            document.head.insertBefore(styleElement, document.head.querySelector('style'));\n            Chart.tooltipDocuments.push(document);\n        }\n        _this.setupDomListeners(scene.canvas.element);\n        _this.addPropertyListener('title', _this.onCaptionChange);\n        _this.addPropertyListener('subtitle', _this.onCaptionChange);\n        _this.addEventListener('layoutChange', function () { return _this.layoutPending = true; });\n        return _this;\n    }\n    Object.defineProperty(Chart.prototype, \"container\", {\n        get: function () {\n            return this._container;\n        },\n        set: function (value) {\n            if (this._container !== value) {\n                var parentNode = this.element.parentNode;\n                if (parentNode != null) {\n                    parentNode.removeChild(this.element);\n                }\n                if (value) {\n                    value.appendChild(this.element);\n                }\n                this._container = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"data\", {\n        get: function () {\n            return this._data;\n        },\n        set: function (data) {\n            this._data = data;\n            this.series.forEach(function (series) { return series.data = data; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"width\", {\n        get: function () {\n            return this.scene.width;\n        },\n        set: function (value) {\n            this.autoSize = false;\n            if (this.width !== value) {\n                this.scene.resize(value, this.height);\n                this.fireEvent({ type: 'layoutChange' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"height\", {\n        get: function () {\n            return this.scene.height;\n        },\n        set: function (value) {\n            this.autoSize = false;\n            if (this.height !== value) {\n                this.scene.resize(this.width, value);\n                this.fireEvent({ type: 'layoutChange' });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"autoSize\", {\n        get: function () {\n            return this._autoSize;\n        },\n        set: function (value) {\n            if (this._autoSize !== value) {\n                this._autoSize = value;\n                if (value) {\n                    var chart_1 = this; // capture `this` for IE11\n                    SizeMonitor.observe(this.element, function (size) {\n                        if (size.width !== chart_1.width || size.height !== chart_1.height) {\n                            chart_1.scene.resize(size.width, size.height);\n                            chart_1.fireEvent({ type: 'layoutChange' });\n                        }\n                    });\n                    this.element.style.display = 'block';\n                }\n                else {\n                    SizeMonitor.unobserve(this.element);\n                    this.element.style.display = 'inline-block';\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.download = function (fileName) {\n        this.scene.download(fileName);\n    };\n    Chart.prototype.destroy = function () {\n        var tooltipParent = this.tooltipElement.parentNode;\n        if (tooltipParent) {\n            tooltipParent.removeChild(this.tooltipElement);\n        }\n        SizeMonitor.unobserve(this.element);\n        this.container = undefined;\n        this.cleanupDomListeners(this.scene.canvas.element);\n        this.scene.container = undefined;\n    };\n    Chart.prototype.onLayoutChange = function () {\n        this.layoutPending = true;\n    };\n    Chart.prototype.onLegendPositionChange = function () {\n        this.legendAutoPadding.clear();\n        this.layoutPending = true;\n    };\n    Chart.prototype.onCaptionChange = function (event) {\n        var value = event.value, oldValue = event.oldValue;\n        if (oldValue) {\n            oldValue.removeEventListener('change', this.onLayoutChange, this);\n            this.scene.root.removeChild(oldValue.node);\n        }\n        if (value) {\n            value.addEventListener('change', this.onLayoutChange, this);\n            this.scene.root.appendChild(value.node);\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"element\", {\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"axes\", {\n        get: function () {\n            return this._axes;\n        },\n        set: function (values) {\n            var _this = this;\n            this._axes.forEach(function (axis) { return _this.detachAxis(axis); });\n            // make linked axes go after the regular ones (simulates stable sort by `linkedTo` property)\n            this._axes = values.filter(function (a) { return !a.linkedTo; }).concat(values.filter(function (a) { return a.linkedTo; }));\n            this._axes.forEach(function (axis) { return _this.attachAxis(axis); });\n            this.axesChanged = true;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.attachAxis = function (axis) {\n        this.scene.root.insertBefore(axis.group, this.seriesRoot);\n    };\n    Chart.prototype.detachAxis = function (axis) {\n        this.scene.root.removeChild(axis.group);\n    };\n    Object.defineProperty(Chart.prototype, \"series\", {\n        get: function () {\n            return this._series;\n        },\n        set: function (values) {\n            var _this = this;\n            this.removeAllSeries();\n            values.forEach(function (series) { return _this.addSeries(series); });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.scheduleLayout = function () {\n        this.layoutPending = true;\n    };\n    Chart.prototype.scheduleData = function () {\n        // To prevent the chart from thinking the cursor is over the same node\n        // after a change to data (the nodes are reused on data changes).\n        this.dehighlightDatum();\n        this.dataPending = true;\n    };\n    Chart.prototype.addSeries = function (series, before) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var beforeIndex = before ? allSeries.indexOf(before) : -1;\n            if (beforeIndex >= 0) {\n                allSeries.splice(beforeIndex, 0, series);\n                seriesRoot.insertBefore(series.group, before.group);\n            }\n            else {\n                allSeries.push(series);\n                seriesRoot.append(series.group);\n            }\n            this.initSeries(series);\n            this.seriesChanged = true;\n            this.axesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.initSeries = function (series) {\n        series.chart = this;\n        if (!series.data) {\n            series.data = this.data;\n        }\n        series.addEventListener('layoutChange', this.scheduleLayout, this);\n        series.addEventListener('dataChange', this.scheduleData, this);\n        series.addEventListener('legendChange', this.updateLegend, this);\n        series.addEventListener('nodeClick', this.onSeriesNodeClick, this);\n    };\n    Chart.prototype.freeSeries = function (series) {\n        series.chart = undefined;\n        series.removeEventListener('layoutChange', this.scheduleLayout, this);\n        series.removeEventListener('dataChange', this.scheduleData, this);\n        series.removeEventListener('legendChange', this.updateLegend, this);\n        series.removeEventListener('nodeClick', this.onSeriesNodeClick, this);\n    };\n    Chart.prototype.addSeriesAfter = function (series, after) {\n        var _a = this, allSeries = _a.series, seriesRoot = _a.seriesRoot;\n        var canAdd = allSeries.indexOf(series) < 0;\n        if (canAdd) {\n            var afterIndex = after ? this.series.indexOf(after) : -1;\n            if (afterIndex >= 0) {\n                if (afterIndex + 1 < allSeries.length) {\n                    seriesRoot.insertBefore(series.group, allSeries[afterIndex + 1].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.splice(afterIndex + 1, 0, series);\n            }\n            else {\n                if (allSeries.length > 0) {\n                    seriesRoot.insertBefore(series.group, allSeries[0].group);\n                }\n                else {\n                    seriesRoot.append(series.group);\n                }\n                this.initSeries(series);\n                allSeries.unshift(series);\n            }\n            this.seriesChanged = true;\n            this.axesChanged = true;\n        }\n        return false;\n    };\n    Chart.prototype.removeSeries = function (series) {\n        var index = this.series.indexOf(series);\n        if (index >= 0) {\n            this.series.splice(index, 1);\n            this.freeSeries(series);\n            this.seriesRoot.removeChild(series.group);\n            this.seriesChanged = true;\n            return true;\n        }\n        return false;\n    };\n    Chart.prototype.removeAllSeries = function () {\n        var _this = this;\n        this.series.forEach(function (series) {\n            _this.freeSeries(series);\n            _this.seriesRoot.removeChild(series.group);\n        });\n        this._series = []; // using `_series` instead of `series` to prevent infinite recursion\n        this.seriesChanged = true;\n    };\n    Chart.prototype.assignSeriesToAxes = function () {\n        var _this = this;\n        this.axes.forEach(function (axis) {\n            var axisName = axis.direction + 'Axis';\n            var boundSeries = [];\n            _this.series.forEach(function (series) {\n                if (series[axisName] === axis) {\n                    boundSeries.push(series);\n                }\n            });\n            axis.boundSeries = boundSeries;\n        });\n        this.seriesChanged = false;\n    };\n    Chart.prototype.assignAxesToSeries = function (force) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        // This method has to run before `assignSeriesToAxes`.\n        var directionToAxesMap = {};\n        this.axes.forEach(function (axis) {\n            var direction = axis.direction;\n            var directionAxes = directionToAxesMap[direction] || (directionToAxesMap[direction] = []);\n            directionAxes.push(axis);\n        });\n        this.series.forEach(function (series) {\n            series.directions.forEach(function (direction) {\n                var axisName = direction + 'Axis';\n                if (!series[axisName] || force) {\n                    var directionAxes = directionToAxesMap[direction];\n                    if (directionAxes) {\n                        var axis = _this.findMatchingAxis(directionAxes, series.getKeys(direction));\n                        if (axis) {\n                            series[axisName] = axis;\n                        }\n                    }\n                }\n            });\n            if (series instanceof CartesianSeries) {\n                if (!series.xAxis) {\n                    console.warn(\"Could not find a matching xAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n                if (!series.yAxis) {\n                    console.warn(\"Could not find a matching yAxis for the \" + series.id + \" series.\");\n                    return;\n                }\n            }\n        });\n        this.axesChanged = false;\n    };\n    Chart.prototype.findMatchingAxis = function (directionAxes, directionKeys) {\n        for (var i = 0; i < directionAxes.length; i++) {\n            var axis = directionAxes[i];\n            var axisKeys = axis.keys;\n            if (!axisKeys.length) {\n                return axis;\n            }\n            else if (directionKeys) {\n                for (var j = 0; j < directionKeys.length; j++) {\n                    if (axisKeys.indexOf(directionKeys[j]) >= 0) {\n                        return axis;\n                    }\n                }\n            }\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"axesChanged\", {\n        get: function () {\n            return this._axesChanged;\n        },\n        set: function (value) {\n            this._axesChanged = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"seriesChanged\", {\n        get: function () {\n            return this._seriesChanged;\n        },\n        set: function (value) {\n            this._seriesChanged = value;\n            if (value) {\n                this.dataPending = true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"layoutPending\", {\n        /**\n         * Only `true` while we are waiting for the layout to start.\n         * This will be `false` if the layout has already started and is ongoing.\n         */\n        get: function () {\n            return !!this.layoutCallbackId;\n        },\n        set: function (value) {\n            if (value) {\n                if (!(this.layoutCallbackId || this.dataPending)) {\n                    this.layoutCallbackId = requestAnimationFrame(this._performLayout);\n                }\n            }\n            else if (this.layoutCallbackId) {\n                cancelAnimationFrame(this.layoutCallbackId);\n                this.layoutCallbackId = 0;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Chart.prototype, \"dataPending\", {\n        get: function () {\n            return !!this.dataCallbackId;\n        },\n        set: function (value) {\n            var _this = this;\n            if (this.dataCallbackId) {\n                clearTimeout(this.dataCallbackId);\n                this.dataCallbackId = 0;\n            }\n            if (value) {\n                this.dataCallbackId = window.setTimeout(function () {\n                    _this.dataPending = false;\n                    _this.processData();\n                }, 0);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.processData = function () {\n        this.layoutPending = false;\n        if (this.axesChanged) {\n            this.assignAxesToSeries(true);\n            this.assignSeriesToAxes();\n        }\n        if (this.seriesChanged) {\n            this.assignSeriesToAxes();\n        }\n        this.series.filter(function (s) { return s.visible; }).forEach(function (series) { return series.processData(); });\n        this.updateLegend();\n        this.layoutPending = true;\n    };\n    Chart.prototype.updateLegend = function () {\n        var legendData = [];\n        this.series.filter(function (s) { return s.showInLegend; }).forEach(function (series) { return series.listSeriesItems(legendData); });\n        this.legend.data = legendData;\n    };\n    Chart.prototype.positionCaptions = function () {\n        var _a = this, title = _a.title, subtitle = _a.subtitle;\n        var titleVisible = false;\n        var subtitleVisible = false;\n        var spacing = 10;\n        var paddingTop = spacing;\n        if (title && title.enabled) {\n            title.node.x = this.width / 2;\n            title.node.y = paddingTop;\n            titleVisible = true;\n            var titleBBox = title.node.computeBBox(); // make sure to set node's x/y, then computeBBox\n            if (titleBBox) {\n                paddingTop = titleBBox.y + titleBBox.height;\n            }\n            if (subtitle && subtitle.enabled) {\n                subtitle.node.x = this.width / 2;\n                subtitle.node.y = paddingTop + spacing;\n                subtitleVisible = true;\n                var subtitleBBox = subtitle.node.computeBBox();\n                if (subtitleBBox) {\n                    paddingTop = subtitleBBox.y + subtitleBBox.height;\n                }\n            }\n        }\n        if (title) {\n            title.node.visible = titleVisible;\n        }\n        if (subtitle) {\n            subtitle.node.visible = subtitleVisible;\n        }\n        this.captionAutoPadding = Math.floor(paddingTop);\n    };\n    Chart.prototype.positionLegend = function () {\n        if (!this.legend.enabled || !this.legend.data.length) {\n            return;\n        }\n        var _a = this, legend = _a.legend, captionAutoPadding = _a.captionAutoPadding, legendAutoPadding = _a.legendAutoPadding;\n        var width = this.width;\n        var height = this.height - captionAutoPadding;\n        var legendGroup = legend.group;\n        var legendSpacing = legend.spacing;\n        var translationX = 0;\n        var translationY = 0;\n        var legendBBox;\n        switch (legend.position) {\n            case 'bottom':\n                legend.performLayout(width - legendSpacing * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                translationY = captionAutoPadding + height - legendBBox.height - legendBBox.y - legendSpacing;\n                legendAutoPadding.bottom = legendBBox.height;\n                break;\n            case 'top':\n                legend.performLayout(width - legendSpacing * 2, 0);\n                legendBBox = legendGroup.computeBBox();\n                translationX = (width - legendBBox.width) / 2 - legendBBox.x;\n                translationY = captionAutoPadding + legendSpacing - legendBBox.y;\n                legendAutoPadding.top = legendBBox.height;\n                break;\n            case 'left':\n                legend.performLayout(0, height - legendSpacing * 2);\n                legendBBox = legendGroup.computeBBox();\n                translationX = legendSpacing - legendBBox.x;\n                translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.left = legendBBox.width;\n                break;\n            default: // case 'right':\n                legend.performLayout(0, height - legendSpacing * 2);\n                legendBBox = legendGroup.computeBBox();\n                translationX = width - legendBBox.width - legendBBox.x - legendSpacing;\n                translationY = captionAutoPadding + (height - legendBBox.height) / 2 - legendBBox.y;\n                legendAutoPadding.right = legendBBox.width;\n                break;\n        }\n        // Round off for pixel grid alignment to work properly.\n        legendGroup.translationX = Math.floor(translationX + legendGroup.translationX);\n        legendGroup.translationY = Math.floor(translationY + legendGroup.translationY);\n    };\n    Chart.prototype.setupDomListeners = function (chartElement) {\n        chartElement.addEventListener('mousedown', this._onMouseDown);\n        chartElement.addEventListener('mousemove', this._onMouseMove);\n        chartElement.addEventListener('mouseup', this._onMouseUp);\n        chartElement.addEventListener('mouseout', this._onMouseOut);\n        chartElement.addEventListener('click', this._onClick);\n    };\n    Chart.prototype.cleanupDomListeners = function (chartElement) {\n        chartElement.removeEventListener('mousedown', this._onMouseDown);\n        chartElement.removeEventListener('mousemove', this._onMouseMove);\n        chartElement.removeEventListener('mouseup', this._onMouseUp);\n        chartElement.removeEventListener('mouseout', this._onMouseOut);\n        chartElement.removeEventListener('click', this._onClick);\n    };\n    // x/y are local canvas coordinates in CSS pixels, not actual pixels\n    Chart.prototype.pickSeriesNode = function (x, y) {\n        if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n            return undefined;\n        }\n        var allSeries = this.series;\n        var node = undefined;\n        for (var i = allSeries.length - 1; i >= 0; i--) {\n            var series = allSeries[i];\n            node = series.group.pickNode(x, y);\n            if (node) {\n                return {\n                    series: series,\n                    node: node\n                };\n            }\n        }\n    };\n    // Provided x/y are in canvas coordinates.\n    Chart.prototype.pickClosestSeriesNodeDatum = function (x, y) {\n        if (!this.seriesRect || !this.seriesRect.containsPoint(x, y)) {\n            return undefined;\n        }\n        var allSeries = this.series;\n        function getDistance(p1, p2) {\n            return Math.sqrt(Math.pow((p1.x - p2.x), 2) + Math.pow((p1.y - p2.y), 2));\n        }\n        var minDistance = Infinity;\n        var closestDatum;\n        var _loop_1 = function (i) {\n            var series = allSeries[i];\n            if (!series.visible) {\n                return \"continue\";\n            }\n            var hitPoint = series.group.transformPoint(x, y);\n            series.getNodeData().forEach(function (datum) {\n                if (!datum.point) {\n                    return;\n                }\n                var distance = getDistance(hitPoint, datum.point);\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    closestDatum = datum;\n                }\n            });\n        };\n        for (var i = allSeries.length - 1; i >= 0; i--) {\n            _loop_1(i);\n        }\n        if (closestDatum) {\n            return closestDatum;\n        }\n    };\n    Chart.prototype.onMouseMove = function (event) {\n        var _a = this, lastPick = _a.lastPick, tooltipTracking = _a.tooltipTracking;\n        var pick = this.pickSeriesNode(event.offsetX, event.offsetY);\n        var nodeDatum;\n        if (pick && pick.node instanceof Shape) {\n            var node = pick.node;\n            nodeDatum = node.datum;\n            if (lastPick && lastPick.datum === nodeDatum) {\n                lastPick.node = node;\n            }\n            // Marker nodes will have the `point` info in their datums.\n            // Highlight if not a marker node or, if not in the tracking mode, highlight markers too.\n            if ((!node.datum.point || !tooltipTracking)) {\n                if (!lastPick // cursor moved from empty space to a node\n                    || lastPick.node !== node) { // cursor moved from one node to another\n                    this.onSeriesDatumPick(event, node.datum, node);\n                }\n                else if (pick.series.tooltipEnabled) { // cursor moved within the same node\n                    this.showTooltip(event);\n                }\n                // A non-marker node (takes precedence over marker nodes) was highlighted.\n                // Or we are not in the tracking mode.\n                // Either way, we are done at this point.\n                return;\n            }\n        }\n        var hideTooltip = false;\n        // In tracking mode a tooltip is shown for the closest rendered datum.\n        // This makes it easier to show tooltips when markers are small and/or plentiful\n        // and also gives the ability to show tooltips even when the series were configured\n        // to not render markers.\n        if (tooltipTracking) {\n            var closestDatum = this.pickClosestSeriesNodeDatum(event.offsetX, event.offsetY);\n            if (closestDatum && closestDatum.point) {\n                var _b = closestDatum.point, x = _b.x, y = _b.y;\n                var canvas = this.scene.canvas;\n                var point = closestDatum.series.group.inverseTransformPoint(x, y);\n                var canvasRect = canvas.element.getBoundingClientRect();\n                this.onSeriesDatumPick({\n                    pageX: Math.round(canvasRect.left + window.pageXOffset + point.x),\n                    pageY: Math.round(canvasRect.top + window.pageYOffset + point.y)\n                }, closestDatum, nodeDatum === closestDatum ? pick.node : undefined);\n            }\n            else {\n                hideTooltip = true;\n            }\n        }\n        if (lastPick && (hideTooltip || !tooltipTracking)) {\n            // cursor moved from a non-marker node to empty space\n            this.dehighlightDatum();\n            this.hideTooltip();\n            this.lastPick = undefined;\n        }\n    };\n    Chart.prototype.onMouseDown = function (event) { };\n    Chart.prototype.onMouseUp = function (event) { };\n    Chart.prototype.onMouseOut = function (event) {\n        this.toggleTooltip(false);\n    };\n    Chart.prototype.onClick = function (event) {\n        this.checkSeriesNodeClick();\n        this.checkLegendClick(event);\n    };\n    Chart.prototype.checkSeriesNodeClick = function () {\n        var lastPick = this.lastPick;\n        if (lastPick && lastPick.node) {\n            var datum = this.lastPick.datum;\n            datum.series.fireNodeClickEvent(datum);\n        }\n    };\n    Chart.prototype.onSeriesNodeClick = function (event) {\n        this.fireEvent(__assign(__assign({}, event), { type: 'seriesNodeClick' }));\n    };\n    Chart.prototype.checkLegendClick = function (event) {\n        var datum = this.legend.getDatumForPoint(event.offsetX, event.offsetY);\n        if (datum) {\n            var id_1 = datum.id, itemId = datum.itemId, enabled = datum.enabled;\n            var series = find(this.series, function (series) { return series.id === id_1; });\n            if (series) {\n                series.toggleSeriesItem(itemId, !enabled);\n                if (enabled) {\n                    this.hideTooltip();\n                }\n            }\n        }\n    };\n    Chart.prototype.onSeriesDatumPick = function (meta, datum, node) {\n        if (this.lastPick) {\n            // this.lastPick.datum.series.dehighlightDatum();\n            this.dehighlightDatum();\n        }\n        this.lastPick = {\n            datum: datum,\n            node: node\n        };\n        this.highlightDatum(datum);\n        var html = datum.series.tooltipEnabled && datum.series.getTooltipHtml(datum);\n        if (html) {\n            this.showTooltip(meta, html);\n        }\n    };\n    Chart.prototype.highlightDatum = function (datum) {\n        this.highlightedDatum = datum;\n        this.series.forEach(function (s) { return s.onHighlightChange(); });\n    };\n    Chart.prototype.dehighlightDatum = function () {\n        if (this.highlightedDatum) {\n            this.highlightedDatum = undefined;\n            this.series.forEach(function (s) { return s.onHighlightChange(); });\n        }\n    };\n    Object.defineProperty(Chart.prototype, \"tooltipClass\", {\n        get: function () {\n            return this._tooltipClass;\n        },\n        set: function (value) {\n            if (this._tooltipClass !== value) {\n                this._tooltipClass = value;\n                this.toggleTooltip();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Chart.prototype.toggleTooltip = function (visible) {\n        if (!visible && this.lastPick) {\n            this.dehighlightDatum();\n            this.lastPick = undefined;\n        }\n        this.updateTooltipClass(visible);\n    };\n    Chart.prototype.updateTooltipClass = function (visible, constrained) {\n        var classList = [Chart.defaultTooltipClass, this.tooltipClass];\n        if (visible === true) {\n            classList.push(Chart.defaultTooltipClass + \"-visible\");\n        }\n        if (constrained !== true) {\n            classList.push(Chart.defaultTooltipClass + \"-arrow\");\n        }\n        this.tooltipElement.setAttribute('class', classList.join(' '));\n    };\n    /**\n     * Shows tooltip at the given event's coordinates.\n     * If the `html` parameter is missing, moves the existing tooltip to the new position.\n     */\n    Chart.prototype.showTooltip = function (meta, html) {\n        var el = this.tooltipElement;\n        var container = this.container;\n        if (html !== undefined) {\n            el.innerHTML = html;\n        }\n        else if (!el.innerHTML) {\n            return;\n        }\n        if (html) {\n            this.toggleTooltip(true);\n        }\n        var left = meta.pageX - el.clientWidth / 2;\n        var top = meta.pageY - el.clientHeight - 8;\n        if (container) {\n            var tooltipRect = el.getBoundingClientRect();\n            var minLeft = 0;\n            var maxLeft = window.innerWidth - tooltipRect.width;\n            if (left < minLeft) {\n                left = minLeft;\n                this.updateTooltipClass(true, true);\n            }\n            else if (left > maxLeft) {\n                left = maxLeft;\n                this.updateTooltipClass(true, true);\n            }\n        }\n        el.style.left = left + \"px\";\n        el.style.top = top + \"px\";\n    };\n    Chart.prototype.hideTooltip = function () {\n        this.toggleTooltip(false);\n    };\n    Chart.defaultTooltipClass = 'ag-chart-tooltip';\n    Chart.tooltipDocuments = [];\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"padding\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"title\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], Chart.prototype, \"subtitle\", void 0);\n    return Chart;\n}(Observable));\nexport { Chart };\n"]},"metadata":{},"sourceType":"module"}