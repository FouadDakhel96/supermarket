{"ast":null,"code":"/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { BeanStub } from \"../context/beanStub\";\nimport { PostConstruct, Bean, Autowired, PreDestroy } from \"../context/context\";\nimport { _ } from \"../utils\";\nexport var DragSourceType;\n\n(function (DragSourceType) {\n  DragSourceType[DragSourceType[\"ToolPanel\"] = 0] = \"ToolPanel\";\n  DragSourceType[DragSourceType[\"HeaderCell\"] = 1] = \"HeaderCell\";\n  DragSourceType[DragSourceType[\"RowDrag\"] = 2] = \"RowDrag\";\n  DragSourceType[DragSourceType[\"ChartPanel\"] = 3] = \"ChartPanel\";\n})(DragSourceType || (DragSourceType = {}));\n\nexport var VerticalDirection;\n\n(function (VerticalDirection) {\n  VerticalDirection[VerticalDirection[\"Up\"] = 0] = \"Up\";\n  VerticalDirection[VerticalDirection[\"Down\"] = 1] = \"Down\";\n})(VerticalDirection || (VerticalDirection = {}));\n\nexport var HorizontalDirection;\n\n(function (HorizontalDirection) {\n  HorizontalDirection[HorizontalDirection[\"Left\"] = 0] = \"Left\";\n  HorizontalDirection[HorizontalDirection[\"Right\"] = 1] = \"Right\";\n})(HorizontalDirection || (HorizontalDirection = {}));\n\nvar DragAndDropService =\n/** @class */\nfunction (_super) {\n  __extends(DragAndDropService, _super);\n\n  function DragAndDropService() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.dragSourceAndParamsList = [];\n    _this.dropTargets = [];\n    return _this;\n  }\n\n  DragAndDropService_1 = DragAndDropService;\n\n  DragAndDropService.prototype.init = function () {\n    this.ePinnedIcon = _.createIcon('columnMovePin', this.gridOptionsWrapper, null);\n    this.eHideIcon = _.createIcon('columnMoveHide', this.gridOptionsWrapper, null);\n    this.eMoveIcon = _.createIcon('columnMoveMove', this.gridOptionsWrapper, null);\n    this.eLeftIcon = _.createIcon('columnMoveLeft', this.gridOptionsWrapper, null);\n    this.eRightIcon = _.createIcon('columnMoveRight', this.gridOptionsWrapper, null);\n    this.eGroupIcon = _.createIcon('columnMoveGroup', this.gridOptionsWrapper, null);\n    this.eAggregateIcon = _.createIcon('columnMoveValue', this.gridOptionsWrapper, null);\n    this.ePivotIcon = _.createIcon('columnMovePivot', this.gridOptionsWrapper, null);\n    this.eDropNotAllowedIcon = _.createIcon('dropNotAllowed', this.gridOptionsWrapper, null);\n  };\n\n  DragAndDropService.prototype.addDragSource = function (dragSource, allowTouch) {\n    if (allowTouch === void 0) {\n      allowTouch = false;\n    }\n\n    var params = {\n      eElement: dragSource.eElement,\n      dragStartPixels: dragSource.dragStartPixels,\n      onDragStart: this.onDragStart.bind(this, dragSource),\n      onDragStop: this.onDragStop.bind(this),\n      onDragging: this.onDragging.bind(this)\n    };\n    this.dragSourceAndParamsList.push({\n      params: params,\n      dragSource: dragSource\n    });\n    this.dragService.addDragSource(params, allowTouch);\n  };\n\n  DragAndDropService.prototype.removeDragSource = function (dragSource) {\n    var sourceAndParams = _.find(this.dragSourceAndParamsList, function (item) {\n      return item.dragSource === dragSource;\n    });\n\n    if (sourceAndParams) {\n      this.dragService.removeDragSource(sourceAndParams.params);\n\n      _.removeFromArray(this.dragSourceAndParamsList, sourceAndParams);\n    }\n  };\n\n  DragAndDropService.prototype.clearDragSourceParamsList = function () {\n    var _this = this;\n\n    this.dragSourceAndParamsList.forEach(function (sourceAndParams) {\n      return _this.dragService.removeDragSource(sourceAndParams.params);\n    });\n    this.dragSourceAndParamsList.length = 0;\n  };\n\n  DragAndDropService.prototype.nudge = function () {\n    if (this.dragging) {\n      this.onDragging(this.eventLastTime, true);\n    }\n  };\n\n  DragAndDropService.prototype.onDragStart = function (dragSource, mouseEvent) {\n    this.dragging = true;\n    this.dragSource = dragSource;\n    this.eventLastTime = mouseEvent;\n    this.dragItem = this.dragSource.getDragItem();\n    this.lastDropTarget = this.dragSource.dragSourceDropTarget;\n\n    if (this.dragSource.onDragStarted) {\n      this.dragSource.onDragStarted();\n    }\n\n    this.createGhost();\n  };\n\n  DragAndDropService.prototype.onDragStop = function (mouseEvent) {\n    this.eventLastTime = null;\n    this.dragging = false;\n\n    if (this.dragSource.onDragStopped) {\n      this.dragSource.onDragStopped();\n    }\n\n    if (this.lastDropTarget && this.lastDropTarget.onDragStop) {\n      var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);\n      this.lastDropTarget.onDragStop(draggingEvent);\n    }\n\n    this.lastDropTarget = null;\n    this.dragItem = null;\n    this.removeGhost();\n  };\n\n  DragAndDropService.prototype.onDragging = function (mouseEvent, fromNudge) {\n    var hDirection = this.getHorizontalDirection(mouseEvent);\n    var vDirection = this.getVerticalDirection(mouseEvent);\n    this.eventLastTime = mouseEvent;\n    this.positionGhost(mouseEvent); // check if mouseEvent intersects with any of the drop targets\n\n    var dropTarget = _.find(this.dropTargets, this.isMouseOnDropTarget.bind(this, mouseEvent));\n\n    if (dropTarget !== this.lastDropTarget) {\n      this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);\n      this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      this.lastDropTarget = dropTarget;\n    } else if (dropTarget && dropTarget.onDragging) {\n      var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      dropTarget.onDragging(draggingEvent);\n    }\n  };\n\n  DragAndDropService.prototype.enterDragTargetIfExists = function (dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {\n    if (!dropTarget) {\n      return;\n    }\n\n    if (dropTarget.onDragEnter) {\n      var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      dropTarget.onDragEnter(dragEnterEvent);\n    }\n\n    this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);\n  };\n\n  DragAndDropService.prototype.leaveLastTargetIfExists = function (mouseEvent, hDirection, vDirection, fromNudge) {\n    if (!this.lastDropTarget) {\n      return;\n    }\n\n    if (this.lastDropTarget.onDragLeave) {\n      var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      this.lastDropTarget.onDragLeave(dragLeaveEvent);\n    }\n\n    this.setGhostIcon(null);\n  };\n\n  DragAndDropService.prototype.getAllContainersFromDropTarget = function (dropTarget) {\n    var containers = [dropTarget.getContainer()];\n    var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;\n\n    if (secondaryContainers) {\n      containers = containers.concat(secondaryContainers);\n    }\n\n    return containers;\n  }; // checks if the mouse is on the drop target. it checks eContainer and eSecondaryContainers\n\n\n  DragAndDropService.prototype.isMouseOnDropTarget = function (mouseEvent, dropTarget) {\n    var mouseOverTarget = false;\n    this.getAllContainersFromDropTarget(dropTarget).filter(function (eContainer) {\n      return eContainer;\n    }) // secondary can be missing\n    .forEach(function (eContainer) {\n      var rect = eContainer.getBoundingClientRect(); // if element is not visible, then width and height are zero\n\n      if (rect.width === 0 || rect.height === 0) {\n        return;\n      }\n\n      var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX <= rect.right;\n      var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY <= rect.bottom;\n\n      if (horizontalFit && verticalFit) {\n        mouseOverTarget = true;\n      }\n    });\n    return mouseOverTarget && dropTarget.isInterestedIn(this.dragSource.type);\n  };\n\n  DragAndDropService.prototype.addDropTarget = function (dropTarget) {\n    this.dropTargets.push(dropTarget);\n  };\n\n  DragAndDropService.prototype.removeDropTarget = function (dropTarget) {\n    this.dropTargets = this.dropTargets.filter(function (target) {\n      return target.getContainer() !== dropTarget.getContainer();\n    });\n  };\n\n  DragAndDropService.prototype.hasExternalDropZones = function () {\n    return this.dropTargets.some(function (zones) {\n      return zones.external;\n    });\n  };\n\n  DragAndDropService.prototype.findExternalZone = function (params) {\n    var externalTargets = this.dropTargets.filter(function (target) {\n      return target.external;\n    });\n    return _.find(externalTargets, function (zone) {\n      return zone.getContainer() === params.getContainer();\n    });\n  };\n\n  DragAndDropService.prototype.getHorizontalDirection = function (event) {\n    var clientX = this.eventLastTime.clientX;\n    var eClientX = event.clientX;\n\n    if (clientX === eClientX) {\n      return null;\n    }\n\n    return clientX > eClientX ? HorizontalDirection.Left : HorizontalDirection.Right;\n  };\n\n  DragAndDropService.prototype.getVerticalDirection = function (event) {\n    var clientY = this.eventLastTime.clientY;\n    var eClientY = event.clientY;\n\n    if (clientY === eClientY) {\n      return null;\n    }\n\n    return clientY > eClientY ? VerticalDirection.Up : VerticalDirection.Down;\n  };\n\n  DragAndDropService.prototype.createDropTargetEvent = function (dropTarget, event, hDirection, vDirection, fromNudge) {\n    // localise x and y to the target\n    var dropZoneTarget = dropTarget.getContainer();\n    var rect = dropZoneTarget.getBoundingClientRect();\n\n    var _a = this,\n        api = _a.gridApi,\n        columnApi = _a.columnApi,\n        dragItem = _a.dragItem,\n        dragSource = _a.dragSource;\n\n    var x = event.clientX - rect.left;\n    var y = event.clientY - rect.top;\n    return {\n      event: event,\n      x: x,\n      y: y,\n      vDirection: vDirection,\n      hDirection: hDirection,\n      dragSource: dragSource,\n      fromNudge: fromNudge,\n      dragItem: dragItem,\n      api: api,\n      columnApi: columnApi,\n      dropZoneTarget: dropZoneTarget\n    };\n  };\n\n  DragAndDropService.prototype.positionGhost = function (event) {\n    var ghost = this.eGhost;\n    var ghostRect = ghost.getBoundingClientRect();\n    var ghostHeight = ghostRect.height; // for some reason, without the '-2', it still overlapped by 1 or 2 pixels, which\n    // then brought in scrollbars to the browser. no idea why, but putting in -2 here\n    // works around it which is good enough for me.\n\n    var browserWidth = _.getBodyWidth() - 2;\n    var browserHeight = _.getBodyHeight() - 2;\n    var top = event.pageY - ghostHeight / 2;\n    var left = event.pageX - 10;\n    var usrDocument = this.gridOptionsWrapper.getDocument();\n    var windowScrollY = window.pageYOffset || usrDocument.documentElement.scrollTop;\n    var windowScrollX = window.pageXOffset || usrDocument.documentElement.scrollLeft; // check ghost is not positioned outside of the browser\n\n    if (browserWidth > 0 && left + ghost.clientWidth > browserWidth + windowScrollX) {\n      left = browserWidth + windowScrollX - ghost.clientWidth;\n    }\n\n    if (left < 0) {\n      left = 0;\n    }\n\n    if (browserHeight > 0 && top + ghost.clientHeight > browserHeight + windowScrollY) {\n      top = browserHeight + windowScrollY - ghost.clientHeight;\n    }\n\n    if (top < 0) {\n      top = 0;\n    }\n\n    ghost.style.left = left + \"px\";\n    ghost.style.top = top + \"px\";\n  };\n\n  DragAndDropService.prototype.removeGhost = function () {\n    if (this.eGhost && this.eGhostParent) {\n      this.eGhostParent.removeChild(this.eGhost);\n    }\n\n    this.eGhost = null;\n  };\n\n  DragAndDropService.prototype.createGhost = function () {\n    this.eGhost = _.loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);\n    var theme = this.environment.getTheme().theme;\n\n    if (theme) {\n      _.addCssClass(this.eGhost, theme);\n    }\n\n    this.eGhostIcon = this.eGhost.querySelector('.ag-dnd-ghost-icon');\n    this.setGhostIcon(null);\n    var eText = this.eGhost.querySelector('.ag-dnd-ghost-label');\n    var dragItemName = this.dragSource.dragItemName;\n\n    if (_.isFunction(dragItemName)) {\n      dragItemName = dragItemName();\n    }\n\n    eText.innerHTML = _.escape(dragItemName);\n    this.eGhost.style.height = '25px';\n    this.eGhost.style.top = '20px';\n    this.eGhost.style.left = '20px';\n    var usrDocument = this.gridOptionsWrapper.getDocument();\n    this.eGhostParent = usrDocument.querySelector('body');\n\n    if (!this.eGhostParent) {\n      console.warn('ag-Grid: could not find document body, it is needed for dragging columns');\n    } else {\n      this.eGhostParent.appendChild(this.eGhost);\n    }\n  };\n\n  DragAndDropService.prototype.setGhostIcon = function (iconName, shake) {\n    if (shake === void 0) {\n      shake = false;\n    }\n\n    _.clearElement(this.eGhostIcon);\n\n    var eIcon;\n\n    if (!iconName) {\n      iconName = this.dragSource.defaultIconName || DragAndDropService_1.ICON_NOT_ALLOWED;\n    }\n\n    switch (iconName) {\n      case DragAndDropService_1.ICON_PINNED:\n        eIcon = this.ePinnedIcon;\n        break;\n\n      case DragAndDropService_1.ICON_MOVE:\n        eIcon = this.eMoveIcon;\n        break;\n\n      case DragAndDropService_1.ICON_LEFT:\n        eIcon = this.eLeftIcon;\n        break;\n\n      case DragAndDropService_1.ICON_RIGHT:\n        eIcon = this.eRightIcon;\n        break;\n\n      case DragAndDropService_1.ICON_GROUP:\n        eIcon = this.eGroupIcon;\n        break;\n\n      case DragAndDropService_1.ICON_AGGREGATE:\n        eIcon = this.eAggregateIcon;\n        break;\n\n      case DragAndDropService_1.ICON_PIVOT:\n        eIcon = this.ePivotIcon;\n        break;\n\n      case DragAndDropService_1.ICON_NOT_ALLOWED:\n        eIcon = this.eDropNotAllowedIcon;\n        break;\n\n      case DragAndDropService_1.ICON_HIDE:\n        eIcon = this.eHideIcon;\n        break;\n    }\n\n    _.addOrRemoveCssClass(this.eGhostIcon, 'ag-shake-left-to-right', shake);\n\n    if (eIcon === this.eHideIcon && this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()) {\n      return;\n    }\n\n    if (eIcon) {\n      this.eGhostIcon.appendChild(eIcon);\n    }\n  };\n\n  var DragAndDropService_1;\n  DragAndDropService.ICON_PINNED = 'pinned';\n  DragAndDropService.ICON_MOVE = 'move';\n  DragAndDropService.ICON_LEFT = 'left';\n  DragAndDropService.ICON_RIGHT = 'right';\n  DragAndDropService.ICON_GROUP = 'group';\n  DragAndDropService.ICON_AGGREGATE = 'aggregate';\n  DragAndDropService.ICON_PIVOT = 'pivot';\n  DragAndDropService.ICON_NOT_ALLOWED = 'notAllowed';\n  DragAndDropService.ICON_HIDE = 'hide';\n  DragAndDropService.GHOST_TEMPLATE = \"<div class=\\\"ag-dnd-ghost ag-unselectable\\\">\\n            <span class=\\\"ag-dnd-ghost-icon ag-shake-left-to-right\\\"></span>\\n            <div class=\\\"ag-dnd-ghost-label\\\"></div>\\n        </div>\";\n\n  __decorate([Autowired('gridOptionsWrapper')], DragAndDropService.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([Autowired('dragService')], DragAndDropService.prototype, \"dragService\", void 0);\n\n  __decorate([Autowired('environment')], DragAndDropService.prototype, \"environment\", void 0);\n\n  __decorate([Autowired('columnApi')], DragAndDropService.prototype, \"columnApi\", void 0);\n\n  __decorate([Autowired('gridApi')], DragAndDropService.prototype, \"gridApi\", void 0);\n\n  __decorate([PostConstruct], DragAndDropService.prototype, \"init\", null);\n\n  __decorate([PreDestroy], DragAndDropService.prototype, \"clearDragSourceParamsList\", null);\n\n  DragAndDropService = DragAndDropService_1 = __decorate([Bean('dragAndDropService')], DragAndDropService);\n  return DragAndDropService;\n}(BeanStub);\n\nexport { DragAndDropService };","map":{"version":3,"sources":["/Users/fouaddakhel/Projects/Nana/ReactJS/supermarket_dashboard/supermarket_dashboard/node_modules/@ag-grid-community/core/dist/es6/dragAndDrop/dragAndDropService.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","BeanStub","PostConstruct","Bean","Autowired","PreDestroy","_","DragSourceType","VerticalDirection","HorizontalDirection","DragAndDropService","_super","_this","apply","dragSourceAndParamsList","dropTargets","DragAndDropService_1","init","ePinnedIcon","createIcon","gridOptionsWrapper","eHideIcon","eMoveIcon","eLeftIcon","eRightIcon","eGroupIcon","eAggregateIcon","ePivotIcon","eDropNotAllowedIcon","addDragSource","dragSource","allowTouch","params","eElement","dragStartPixels","onDragStart","bind","onDragStop","onDragging","push","dragService","removeDragSource","sourceAndParams","find","item","removeFromArray","clearDragSourceParamsList","forEach","nudge","dragging","eventLastTime","mouseEvent","dragItem","getDragItem","lastDropTarget","dragSourceDropTarget","onDragStarted","createGhost","onDragStopped","draggingEvent","createDropTargetEvent","removeGhost","fromNudge","hDirection","getHorizontalDirection","vDirection","getVerticalDirection","positionGhost","dropTarget","isMouseOnDropTarget","leaveLastTargetIfExists","enterDragTargetIfExists","onDragEnter","dragEnterEvent","setGhostIcon","getIconName","onDragLeave","dragLeaveEvent","getAllContainersFromDropTarget","containers","getContainer","secondaryContainers","getSecondaryContainers","concat","mouseOverTarget","filter","eContainer","rect","getBoundingClientRect","width","height","horizontalFit","clientX","left","right","verticalFit","clientY","top","bottom","isInterestedIn","type","addDropTarget","removeDropTarget","hasExternalDropZones","some","zones","external","findExternalZone","externalTargets","zone","event","eClientX","Left","Right","eClientY","Up","Down","dropZoneTarget","_a","api","gridApi","columnApi","x","y","ghost","eGhost","ghostRect","ghostHeight","browserWidth","getBodyWidth","browserHeight","getBodyHeight","pageY","pageX","usrDocument","getDocument","windowScrollY","window","pageYOffset","documentElement","scrollTop","windowScrollX","pageXOffset","scrollLeft","clientWidth","clientHeight","style","eGhostParent","removeChild","loadTemplate","GHOST_TEMPLATE","theme","environment","getTheme","addCssClass","eGhostIcon","querySelector","eText","dragItemName","isFunction","innerHTML","escape","console","warn","appendChild","iconName","shake","clearElement","eIcon","defaultIconName","ICON_NOT_ALLOWED","ICON_PINNED","ICON_MOVE","ICON_LEFT","ICON_RIGHT","ICON_GROUP","ICON_AGGREGATE","ICON_PIVOT","ICON_HIDE","addOrRemoveCssClass","isSuppressDragLeaveHidesColumns"],"mappings":"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","sourcesContent":["/**\n * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v23.2.1\n * @link http://www.ag-grid.com/\n * @license MIT\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { BeanStub } from \"../context/beanStub\";\nimport { PostConstruct, Bean, Autowired, PreDestroy } from \"../context/context\";\nimport { _ } from \"../utils\";\nexport var DragSourceType;\n(function (DragSourceType) {\n    DragSourceType[DragSourceType[\"ToolPanel\"] = 0] = \"ToolPanel\";\n    DragSourceType[DragSourceType[\"HeaderCell\"] = 1] = \"HeaderCell\";\n    DragSourceType[DragSourceType[\"RowDrag\"] = 2] = \"RowDrag\";\n    DragSourceType[DragSourceType[\"ChartPanel\"] = 3] = \"ChartPanel\";\n})(DragSourceType || (DragSourceType = {}));\nexport var VerticalDirection;\n(function (VerticalDirection) {\n    VerticalDirection[VerticalDirection[\"Up\"] = 0] = \"Up\";\n    VerticalDirection[VerticalDirection[\"Down\"] = 1] = \"Down\";\n})(VerticalDirection || (VerticalDirection = {}));\nexport var HorizontalDirection;\n(function (HorizontalDirection) {\n    HorizontalDirection[HorizontalDirection[\"Left\"] = 0] = \"Left\";\n    HorizontalDirection[HorizontalDirection[\"Right\"] = 1] = \"Right\";\n})(HorizontalDirection || (HorizontalDirection = {}));\nvar DragAndDropService = /** @class */ (function (_super) {\n    __extends(DragAndDropService, _super);\n    function DragAndDropService() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.dragSourceAndParamsList = [];\n        _this.dropTargets = [];\n        return _this;\n    }\n    DragAndDropService_1 = DragAndDropService;\n    DragAndDropService.prototype.init = function () {\n        this.ePinnedIcon = _.createIcon('columnMovePin', this.gridOptionsWrapper, null);\n        this.eHideIcon = _.createIcon('columnMoveHide', this.gridOptionsWrapper, null);\n        this.eMoveIcon = _.createIcon('columnMoveMove', this.gridOptionsWrapper, null);\n        this.eLeftIcon = _.createIcon('columnMoveLeft', this.gridOptionsWrapper, null);\n        this.eRightIcon = _.createIcon('columnMoveRight', this.gridOptionsWrapper, null);\n        this.eGroupIcon = _.createIcon('columnMoveGroup', this.gridOptionsWrapper, null);\n        this.eAggregateIcon = _.createIcon('columnMoveValue', this.gridOptionsWrapper, null);\n        this.ePivotIcon = _.createIcon('columnMovePivot', this.gridOptionsWrapper, null);\n        this.eDropNotAllowedIcon = _.createIcon('dropNotAllowed', this.gridOptionsWrapper, null);\n    };\n    DragAndDropService.prototype.addDragSource = function (dragSource, allowTouch) {\n        if (allowTouch === void 0) { allowTouch = false; }\n        var params = {\n            eElement: dragSource.eElement,\n            dragStartPixels: dragSource.dragStartPixels,\n            onDragStart: this.onDragStart.bind(this, dragSource),\n            onDragStop: this.onDragStop.bind(this),\n            onDragging: this.onDragging.bind(this)\n        };\n        this.dragSourceAndParamsList.push({ params: params, dragSource: dragSource });\n        this.dragService.addDragSource(params, allowTouch);\n    };\n    DragAndDropService.prototype.removeDragSource = function (dragSource) {\n        var sourceAndParams = _.find(this.dragSourceAndParamsList, function (item) { return item.dragSource === dragSource; });\n        if (sourceAndParams) {\n            this.dragService.removeDragSource(sourceAndParams.params);\n            _.removeFromArray(this.dragSourceAndParamsList, sourceAndParams);\n        }\n    };\n    DragAndDropService.prototype.clearDragSourceParamsList = function () {\n        var _this = this;\n        this.dragSourceAndParamsList.forEach(function (sourceAndParams) { return _this.dragService.removeDragSource(sourceAndParams.params); });\n        this.dragSourceAndParamsList.length = 0;\n    };\n    DragAndDropService.prototype.nudge = function () {\n        if (this.dragging) {\n            this.onDragging(this.eventLastTime, true);\n        }\n    };\n    DragAndDropService.prototype.onDragStart = function (dragSource, mouseEvent) {\n        this.dragging = true;\n        this.dragSource = dragSource;\n        this.eventLastTime = mouseEvent;\n        this.dragItem = this.dragSource.getDragItem();\n        this.lastDropTarget = this.dragSource.dragSourceDropTarget;\n        if (this.dragSource.onDragStarted) {\n            this.dragSource.onDragStarted();\n        }\n        this.createGhost();\n    };\n    DragAndDropService.prototype.onDragStop = function (mouseEvent) {\n        this.eventLastTime = null;\n        this.dragging = false;\n        if (this.dragSource.onDragStopped) {\n            this.dragSource.onDragStopped();\n        }\n        if (this.lastDropTarget && this.lastDropTarget.onDragStop) {\n            var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);\n            this.lastDropTarget.onDragStop(draggingEvent);\n        }\n        this.lastDropTarget = null;\n        this.dragItem = null;\n        this.removeGhost();\n    };\n    DragAndDropService.prototype.onDragging = function (mouseEvent, fromNudge) {\n        var hDirection = this.getHorizontalDirection(mouseEvent);\n        var vDirection = this.getVerticalDirection(mouseEvent);\n        this.eventLastTime = mouseEvent;\n        this.positionGhost(mouseEvent);\n        // check if mouseEvent intersects with any of the drop targets\n        var dropTarget = _.find(this.dropTargets, this.isMouseOnDropTarget.bind(this, mouseEvent));\n        if (dropTarget !== this.lastDropTarget) {\n            this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);\n            this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            this.lastDropTarget = dropTarget;\n        }\n        else if (dropTarget && dropTarget.onDragging) {\n            var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            dropTarget.onDragging(draggingEvent);\n        }\n    };\n    DragAndDropService.prototype.enterDragTargetIfExists = function (dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {\n        if (!dropTarget) {\n            return;\n        }\n        if (dropTarget.onDragEnter) {\n            var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            dropTarget.onDragEnter(dragEnterEvent);\n        }\n        this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);\n    };\n    DragAndDropService.prototype.leaveLastTargetIfExists = function (mouseEvent, hDirection, vDirection, fromNudge) {\n        if (!this.lastDropTarget) {\n            return;\n        }\n        if (this.lastDropTarget.onDragLeave) {\n            var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            this.lastDropTarget.onDragLeave(dragLeaveEvent);\n        }\n        this.setGhostIcon(null);\n    };\n    DragAndDropService.prototype.getAllContainersFromDropTarget = function (dropTarget) {\n        var containers = [dropTarget.getContainer()];\n        var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;\n        if (secondaryContainers) {\n            containers = containers.concat(secondaryContainers);\n        }\n        return containers;\n    };\n    // checks if the mouse is on the drop target. it checks eContainer and eSecondaryContainers\n    DragAndDropService.prototype.isMouseOnDropTarget = function (mouseEvent, dropTarget) {\n        var mouseOverTarget = false;\n        this.getAllContainersFromDropTarget(dropTarget)\n            .filter(function (eContainer) { return eContainer; }) // secondary can be missing\n            .forEach(function (eContainer) {\n            var rect = eContainer.getBoundingClientRect();\n            // if element is not visible, then width and height are zero\n            if (rect.width === 0 || rect.height === 0) {\n                return;\n            }\n            var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX <= rect.right;\n            var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY <= rect.bottom;\n            if (horizontalFit && verticalFit) {\n                mouseOverTarget = true;\n            }\n        });\n        return mouseOverTarget && dropTarget.isInterestedIn(this.dragSource.type);\n    };\n    DragAndDropService.prototype.addDropTarget = function (dropTarget) {\n        this.dropTargets.push(dropTarget);\n    };\n    DragAndDropService.prototype.removeDropTarget = function (dropTarget) {\n        this.dropTargets = this.dropTargets.filter(function (target) { return target.getContainer() !== dropTarget.getContainer(); });\n    };\n    DragAndDropService.prototype.hasExternalDropZones = function () {\n        return this.dropTargets.some(function (zones) { return zones.external; });\n    };\n    DragAndDropService.prototype.findExternalZone = function (params) {\n        var externalTargets = this.dropTargets.filter(function (target) { return target.external; });\n        return _.find(externalTargets, function (zone) { return zone.getContainer() === params.getContainer(); });\n    };\n    DragAndDropService.prototype.getHorizontalDirection = function (event) {\n        var clientX = this.eventLastTime.clientX;\n        var eClientX = event.clientX;\n        if (clientX === eClientX) {\n            return null;\n        }\n        return clientX > eClientX ? HorizontalDirection.Left : HorizontalDirection.Right;\n    };\n    DragAndDropService.prototype.getVerticalDirection = function (event) {\n        var clientY = this.eventLastTime.clientY;\n        var eClientY = event.clientY;\n        if (clientY === eClientY) {\n            return null;\n        }\n        return clientY > eClientY ? VerticalDirection.Up : VerticalDirection.Down;\n    };\n    DragAndDropService.prototype.createDropTargetEvent = function (dropTarget, event, hDirection, vDirection, fromNudge) {\n        // localise x and y to the target\n        var dropZoneTarget = dropTarget.getContainer();\n        var rect = dropZoneTarget.getBoundingClientRect();\n        var _a = this, api = _a.gridApi, columnApi = _a.columnApi, dragItem = _a.dragItem, dragSource = _a.dragSource;\n        var x = event.clientX - rect.left;\n        var y = event.clientY - rect.top;\n        return { event: event, x: x, y: y, vDirection: vDirection, hDirection: hDirection, dragSource: dragSource, fromNudge: fromNudge, dragItem: dragItem, api: api, columnApi: columnApi, dropZoneTarget: dropZoneTarget };\n    };\n    DragAndDropService.prototype.positionGhost = function (event) {\n        var ghost = this.eGhost;\n        var ghostRect = ghost.getBoundingClientRect();\n        var ghostHeight = ghostRect.height;\n        // for some reason, without the '-2', it still overlapped by 1 or 2 pixels, which\n        // then brought in scrollbars to the browser. no idea why, but putting in -2 here\n        // works around it which is good enough for me.\n        var browserWidth = _.getBodyWidth() - 2;\n        var browserHeight = _.getBodyHeight() - 2;\n        var top = event.pageY - (ghostHeight / 2);\n        var left = event.pageX - 10;\n        var usrDocument = this.gridOptionsWrapper.getDocument();\n        var windowScrollY = window.pageYOffset || usrDocument.documentElement.scrollTop;\n        var windowScrollX = window.pageXOffset || usrDocument.documentElement.scrollLeft;\n        // check ghost is not positioned outside of the browser\n        if (browserWidth > 0 && ((left + ghost.clientWidth) > (browserWidth + windowScrollX))) {\n            left = browserWidth + windowScrollX - ghost.clientWidth;\n        }\n        if (left < 0) {\n            left = 0;\n        }\n        if (browserHeight > 0 && ((top + ghost.clientHeight) > (browserHeight + windowScrollY))) {\n            top = browserHeight + windowScrollY - ghost.clientHeight;\n        }\n        if (top < 0) {\n            top = 0;\n        }\n        ghost.style.left = left + \"px\";\n        ghost.style.top = top + \"px\";\n    };\n    DragAndDropService.prototype.removeGhost = function () {\n        if (this.eGhost && this.eGhostParent) {\n            this.eGhostParent.removeChild(this.eGhost);\n        }\n        this.eGhost = null;\n    };\n    DragAndDropService.prototype.createGhost = function () {\n        this.eGhost = _.loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);\n        var theme = this.environment.getTheme().theme;\n        if (theme) {\n            _.addCssClass(this.eGhost, theme);\n        }\n        this.eGhostIcon = this.eGhost.querySelector('.ag-dnd-ghost-icon');\n        this.setGhostIcon(null);\n        var eText = this.eGhost.querySelector('.ag-dnd-ghost-label');\n        var dragItemName = this.dragSource.dragItemName;\n        if (_.isFunction(dragItemName)) {\n            dragItemName = dragItemName();\n        }\n        eText.innerHTML = _.escape(dragItemName);\n        this.eGhost.style.height = '25px';\n        this.eGhost.style.top = '20px';\n        this.eGhost.style.left = '20px';\n        var usrDocument = this.gridOptionsWrapper.getDocument();\n        this.eGhostParent = usrDocument.querySelector('body');\n        if (!this.eGhostParent) {\n            console.warn('ag-Grid: could not find document body, it is needed for dragging columns');\n        }\n        else {\n            this.eGhostParent.appendChild(this.eGhost);\n        }\n    };\n    DragAndDropService.prototype.setGhostIcon = function (iconName, shake) {\n        if (shake === void 0) { shake = false; }\n        _.clearElement(this.eGhostIcon);\n        var eIcon;\n        if (!iconName) {\n            iconName = this.dragSource.defaultIconName || DragAndDropService_1.ICON_NOT_ALLOWED;\n        }\n        switch (iconName) {\n            case DragAndDropService_1.ICON_PINNED:\n                eIcon = this.ePinnedIcon;\n                break;\n            case DragAndDropService_1.ICON_MOVE:\n                eIcon = this.eMoveIcon;\n                break;\n            case DragAndDropService_1.ICON_LEFT:\n                eIcon = this.eLeftIcon;\n                break;\n            case DragAndDropService_1.ICON_RIGHT:\n                eIcon = this.eRightIcon;\n                break;\n            case DragAndDropService_1.ICON_GROUP:\n                eIcon = this.eGroupIcon;\n                break;\n            case DragAndDropService_1.ICON_AGGREGATE:\n                eIcon = this.eAggregateIcon;\n                break;\n            case DragAndDropService_1.ICON_PIVOT:\n                eIcon = this.ePivotIcon;\n                break;\n            case DragAndDropService_1.ICON_NOT_ALLOWED:\n                eIcon = this.eDropNotAllowedIcon;\n                break;\n            case DragAndDropService_1.ICON_HIDE:\n                eIcon = this.eHideIcon;\n                break;\n        }\n        _.addOrRemoveCssClass(this.eGhostIcon, 'ag-shake-left-to-right', shake);\n        if (eIcon === this.eHideIcon && this.gridOptionsWrapper.isSuppressDragLeaveHidesColumns()) {\n            return;\n        }\n        if (eIcon) {\n            this.eGhostIcon.appendChild(eIcon);\n        }\n    };\n    var DragAndDropService_1;\n    DragAndDropService.ICON_PINNED = 'pinned';\n    DragAndDropService.ICON_MOVE = 'move';\n    DragAndDropService.ICON_LEFT = 'left';\n    DragAndDropService.ICON_RIGHT = 'right';\n    DragAndDropService.ICON_GROUP = 'group';\n    DragAndDropService.ICON_AGGREGATE = 'aggregate';\n    DragAndDropService.ICON_PIVOT = 'pivot';\n    DragAndDropService.ICON_NOT_ALLOWED = 'notAllowed';\n    DragAndDropService.ICON_HIDE = 'hide';\n    DragAndDropService.GHOST_TEMPLATE = \"<div class=\\\"ag-dnd-ghost ag-unselectable\\\">\\n            <span class=\\\"ag-dnd-ghost-icon ag-shake-left-to-right\\\"></span>\\n            <div class=\\\"ag-dnd-ghost-label\\\"></div>\\n        </div>\";\n    __decorate([\n        Autowired('gridOptionsWrapper')\n    ], DragAndDropService.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate([\n        Autowired('dragService')\n    ], DragAndDropService.prototype, \"dragService\", void 0);\n    __decorate([\n        Autowired('environment')\n    ], DragAndDropService.prototype, \"environment\", void 0);\n    __decorate([\n        Autowired('columnApi')\n    ], DragAndDropService.prototype, \"columnApi\", void 0);\n    __decorate([\n        Autowired('gridApi')\n    ], DragAndDropService.prototype, \"gridApi\", void 0);\n    __decorate([\n        PostConstruct\n    ], DragAndDropService.prototype, \"init\", null);\n    __decorate([\n        PreDestroy\n    ], DragAndDropService.prototype, \"clearDragSourceParamsList\", null);\n    DragAndDropService = DragAndDropService_1 = __decorate([\n        Bean('dragAndDropService')\n    ], DragAndDropService);\n    return DragAndDropService;\n}(BeanStub));\nexport { DragAndDropService };\n"]},"metadata":{},"sourceType":"module"}